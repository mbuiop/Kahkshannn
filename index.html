<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸš€ Ú©Ù‡Ú©Ø´Ø§Ù† ÙØ±Ø§Ø±ÛŒ - Ø³ÛŒÙ†Ù…Ø§ÛŒÛŒ</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { 
            overflow: hidden; 
            background: #000;
            font-family: system-ui, -apple-system, sans-serif;
        }
        #renderCanvas { 
            width: 100vw; 
            height: 100vh; 
            display: block;
            outline: none;
        }
        #gamepadStatus {
            position: fixed;
            bottom: 20px;
            right: 20px;
            color: #00ff88;
            font-size: 14px;
            background: rgba(0, 20, 40, 0.8);
            padding: 10px 15px;
            border-radius: 10px;
            border: 1px solid #00ff88;
            z-index: 1000;
        }
    </style>
</head>
<body>
    <canvas id="renderCanvas" tabindex="0"></canvas>
    <div id="gamepadStatus">ğŸ® Ø¬ÙˆÛŒâ€ŒØ§Ø³ØªÛŒÚ©: Ø¯Ø± Ø§Ù†ØªØ¸Ø§Ø±...</div>

    <!-- Ú©ØªØ§Ø¨Ø®Ø§Ù†Ù‡ BabylonJS -->
    <script src="https://cdn.babylonjs.com/babylon.js"></script>
    <script src="https://cdn.babylonjs.com/materialsLibrary/babylonjs.materials.min.js"></script>
    <script src="https://cdn.babylonjs.com/proceduralTexturesLibrary/babylonjs.proceduralTextures.min.js"></script>
    <script src="https://cdn.babylonjs.com/postProcessesLibrary/babylonjs.postProcess.min.js"></script>
    
    <!-- Ù…Ø§Ú˜ÙˆÙ„â€ŒÙ‡Ø§ÛŒ Ø¨Ø§Ø²ÛŒ -->
    <script src="m1.graphics.js"></script>
    <script src="m1.universe.js"></script>
    <script src="m1.ship.js"></script>
    <script src="m1.game.js"></script>

    <script>
        // Ø±Ø§Ù‡â€ŒØ§Ù†Ø¯Ø§Ø²ÛŒ Ø§ØµÙ„ÛŒ Ø¨Ø§Ø²ÛŒ
        class GalacticShowdown {
            constructor() {
                this.canvas = document.getElementById('renderCanvas');
                this.canvas.focus();
                
                // Ø§ÛŒØ¬Ø§Ø¯ Ù…ÙˆØªÙˆØ± Ú¯Ø±Ø§ÙÛŒÚ©
                this.graphics = new GraphicsSystem(this.canvas);
                this.scene = this.graphics.scene;
                
                // Ø§ÛŒØ¬Ø§Ø¯ Ø¬Ù‡Ø§Ù† Ø¨Ø§Ø²ÛŒ
                this.universe = new UniverseSystem(this.scene);
                
                // Ø§ÛŒØ¬Ø§Ø¯ Ø¬Ù†Ú¯Ù†Ø¯Ù‡ Ø¨Ø§Ø²ÛŒÚ©Ù†
                this.ship = new ShipSystem(this.scene);
                
                // Ø§ÛŒØ¬Ø§Ø¯ Ø³ÛŒØ³ØªÙ… Ø¨Ø§Ø²ÛŒ
                this.game = new GameSystem(this.scene, this.ship);
                
                this.startGameLoop();
            }
            
            startGameLoop() {
                this.graphics.engine.runRenderLoop(() => {
                    const deltaTime = this.graphics.engine.getDeltaTime() / 1000;
                    
                    // Ø¢Ù¾Ø¯ÛŒØª Ø³ÛŒØ³ØªÙ…â€ŒÙ‡Ø§
                    this.ship.update(deltaTime);
                    this.game.update(deltaTime);
                    this.universe.update(deltaTime);
                    
                    // Ø±Ù†Ø¯Ø± ØµØ­Ù†Ù‡
                    this.scene.render();
                });
            }
        }

        // Ø´Ø±ÙˆØ¹ Ø¨Ø§Ø²ÛŒ
        window.addEventListener('load', () => {
            new GalacticShowdown();
        });
    </script>
</body>
</html>
