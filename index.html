<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ØªØ³Øª Babylon.js - Ø¨Ø§Ø²ÛŒ Ú©Ù‡Ú©Ø´Ø§Ù†ÛŒ</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { 
            overflow: hidden; 
            background: #000;
            font-family: 'Segoe UI', Tahoma, sans-serif;
        }
        #renderCanvas { 
            width: 100%; 
            height: 100%; 
            display: block;
        }
        #info {
            position: fixed;
            top: 20px;
            left: 20px;
            color: white;
            background: rgba(0,0,0,0.7);
            padding: 15px;
            border-radius: 10px;
            border: 2px solid #00ccff;
        }
    </style>
</head>
<body>
    <canvas id="renderCanvas"></canvas>
    <div id="info">
        <h3>ğŸš€ ØªØ³Øª Babylon.js</h3>
        <div id="status">Ø¯Ø± Ø­Ø§Ù„ Ø±Ø§Ù‡â€ŒØ§Ù†Ø¯Ø§Ø²ÛŒ...</div>
    </div>

    <!-- Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² ÙØ§ÛŒÙ„ Ù…Ø­Ù„ÛŒ -->
    <script src="babylon.js"></script>
    
    <script>
        // ØªØ³Øª Ø³Ø±ÛŒØ¹ Babylon.js
        console.log("ğŸ”§ Ø´Ø±ÙˆØ¹ ØªØ³Øª Babylon.js...");
        
        try {
            // 1. Ø§ÛŒØ¬Ø§Ø¯ Ù…ÙˆØªÙˆØ±
            const canvas = document.getElementById('renderCanvas');
            const engine = new BABYLON.Engine(canvas, true);
            document.getElementById('status').textContent = "âœ… Ù…ÙˆØªÙˆØ± Ø§ÛŒØ¬Ø§Ø¯ Ø´Ø¯";
            
            // 2. Ø§ÛŒØ¬Ø§Ø¯ ØµØ­Ù†Ù‡
            const scene = new BABYLON.Scene(engine);
            scene.clearColor = new BABYLON.Color4(0, 0, 0.1, 1); // Ø¢Ø¨ÛŒ ØªÛŒØ±Ù‡
            document.getElementById('status').textContent = "âœ… ØµØ­Ù†Ù‡ Ø§ÛŒØ¬Ø§Ø¯ Ø´Ø¯";
            
            // 3. Ø¯ÙˆØ±Ø¨ÛŒÙ†
            const camera = new BABYLON.ArcRotateCamera(
                "camera", 
                -Math.PI / 2, Math.PI / 4, 
                15, 
                BABYLON.Vector3.Zero(), 
                scene
            );
            camera.attachControl(canvas, true);
            document.getElementById('status').textContent = "âœ… Ø¯ÙˆØ±Ø¨ÛŒÙ† Ø§ÛŒØ¬Ø§Ø¯ Ø´Ø¯";
            
            // 4. Ù†ÙˆØ±
            const light = new BABYLON.HemisphericLight(
                "light", 
                new BABYLON.Vector3(0, 1, 0), 
                scene
            );
            light.intensity = 0.7;
            document.getElementById('status').textContent = "âœ… Ù†ÙˆØ± Ø§ÛŒØ¬Ø§Ø¯ Ø´Ø¯";
            
            // 5. Ø§ÛŒØ¬Ø§Ø¯ Ø§Ø´Ú©Ø§Ù„ Ø³Ù‡â€ŒØ¨Ø¹Ø¯ÛŒ (Ø§ÛŒÙ†Ùˆ Babylon.js Ø¨Ø±Ø§Øª Ù…ÛŒØ³Ø§Ø²Ù‡)
            
            // Ø¬Ù†Ú¯Ù†Ø¯Ù‡ Ø¨Ø§Ø²ÛŒÚ©Ù†
            const player = BABYLON.MeshBuilder.CreateCylinder("player", {
                diameterTop: 0.5,
                diameterBottom: 1,
                height: 3,
                tessellation: 8
            }, scene);
            player.rotation.x = Math.PI / 2;
            
            const playerMat = new BABYLON.StandardMaterial("playerMat", scene);
            playerMat.diffuseColor = new BABYLON.Color3(0, 0.5, 1);
            playerMat.emissiveColor = new BABYLON.Color3(0, 0.2, 0.4);
            player.material = playerMat;
            
            // Ø³ÛŒØ§Ø±Ù‡
            const planet = BABYLON.MeshBuilder.CreateSphere("planet", {
                diameter: 4,
                segments: 32
            }, scene);
            planet.position.x = 8;
            
            const planetMat = new BABYLON.StandardMaterial("planetMat", scene);
            planetMat.diffuseColor = new BABYLON.Color3(1, 0.5, 0);
            planetMat.emissiveColor = new BABYLON.Color3(0.3, 0.1, 0);
            planet.material = planetMat;
            
            // Ø³ÛŒØ§Ø±Ú©â€ŒÙ‡Ø§
            const asteroids = [];
            for (let i = 0; i < 5; i++) {
                const asteroid = BABYLON.MeshBuilder.CreateSphere("asteroid" + i, {
                    diameter: 0.5 + Math.random() * 1,
                    segments: 6
                }, scene);
                
                asteroid.position = new BABYLON.Vector3(
                    (Math.random() - 0.5) * 20,
                    (Math.random() - 0.5) * 10,
                    (Math.random() - 0.5) * 15
                );
                
                const asteroidMat = new BABYLON.StandardMaterial("asteroidMat" + i, scene);
                asteroidMat.diffuseColor = new BABYLON.Color3(0.4, 0.3, 0.2);
                asteroid.material = asteroidMat;
                
                asteroids.push(asteroid);
            }
            
            document.getElementById('status').textContent = "âœ… Ø¬Ù‡Ø§Ù† Ø¨Ø§Ø²ÛŒ Ø³Ø§Ø®ØªÙ‡ Ø´Ø¯!";
            document.getElementById('status').innerHTML += "<br>ğŸ® Ø¨Ø§Ø²ÛŒ Ø¯Ø± Ø­Ø§Ù„ Ø§Ø¬Ø±Ø§Ø³Øª!";
            
            // 6. Ø­Ù„Ù‚Ù‡ Ø¨Ø§Ø²ÛŒ
            engine.runRenderLoop(() => {
                // Babylon.js Ø§ÛŒÙ† Ø§Ù†ÛŒÙ…ÛŒØ´Ù†â€ŒÙ‡Ø§ Ø±Ùˆ Ø§Ø¬Ø±Ø§ Ù…ÛŒÚ©Ù†Ù‡:
                player.rotation.z += 0.01; // Ú†Ø±Ø®Ø´ Ø¬Ù†Ú¯Ù†Ø¯Ù‡
                planet.rotation.y += 0.005; // Ú†Ø±Ø®Ø´ Ø³ÛŒØ§Ø±Ù‡
                
                // Ú†Ø±Ø®Ø´ Ø³ÛŒØ§Ø±Ú©â€ŒÙ‡Ø§
                asteroids.forEach((asteroid, index) => {
                    asteroid.rotation.x += 0.01 * (index + 1);
                    asteroid.rotation.y += 0.008 * (index + 1);
                });
                
                scene.render(); // Babylon Ø§ÛŒÙ† Ø±Ù†Ø¯Ø± Ø±Ùˆ Ø§Ù†Ø¬Ø§Ù… Ù…ÛŒØ¯Ù‡
            });
            
            // Ø±ÛŒØ³Ø§ÛŒØ²
            window.addEventListener("resize", () => {
                engine.resize();
            });
            
            console.log("ğŸ‰ ØªØ³Øª Babylon.js Ù…ÙˆÙÙ‚ÛŒØªâ€ŒØ¢Ù…ÛŒØ² Ø¨ÙˆØ¯!");
            
        } catch (error) {
            console.error("âŒ Ø®Ø·Ø§ Ø¯Ø± ØªØ³Øª:", error);
            document.getElementById('status').textContent = "âŒ Ø®Ø·Ø§: " + error.message;
            document.getElementById('status').style.color = "red";
        }
    </script>
</body>
</html>
