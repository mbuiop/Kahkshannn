<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø¨Ø§Ø²ÛŒ Ú©Ù‡Ú©Ø´Ø§Ù†ÛŒ Ù¾ÛŒØ´Ø±ÙØªÙ‡</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { 
            background: #000; 
            overflow: hidden; 
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        #gameCanvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1;
        }
        
        .ui-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 2;
            pointer-events: none;
        }
        
        .hud {
            position: absolute;
            top: 20px;
            left: 20px;
            color: white;
            font-size: 18px;
            background: rgba(0,0,0,0.7);
            padding: 10px;
            border-radius: 10px;
        }
        
        .main-menu {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #000428, #004e92);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 3;
            color: white;
        }
        
        .menu-button {
            background: linear-gradient(45deg, #00ccff, #0066ff);
            border: none;
            padding: 15px 30px;
            margin: 10px;
            font-size: 18px;
            border-radius: 25px;
            cursor: pointer;
            color: white;
            pointer-events: all;
            transition: transform 0.3s;
        }
        
        .menu-button:hover {
            transform: scale(1.05);
        }
        
        .hidden {
            display: none !important;
        }
    </style>
</head>
<body>
    <canvas id="gameCanvas"></canvas>
    
    <div class="ui-overlay">
        <div class="hud">
            <div>Ø§Ù…ØªÛŒØ§Ø²: <span id="score">0</span></div>
            <div>Ø³ÙˆØ®Øª: <span id="fuel">100</span>%</div>
            <div>Ù…Ø±Ø­Ù„Ù‡: <span id="level">1</span></div>
        </div>
    </div>
    
    <div id="mainMenu" class="main-menu">
        <h1 style="font-size: 3em; margin-bottom: 30px; background: linear-gradient(45deg, #ff8a00, #e52e71); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">
            ğŸš€ Ø¨Ø§Ø²ÛŒ Ú©Ù‡Ú©Ø´Ø§Ù†ÛŒ
        </h1>
        <button class="menu-button" onclick="startGame()">ğŸ® Ø´Ø±ÙˆØ¹ Ø¨Ø§Ø²ÛŒ</button>
        <button class="menu-button" onclick="showInstructions()">ğŸ“– Ø±Ø§Ù‡Ù†Ù…Ø§</button>
        <button class="menu-button" onclick="showSettings()">âš™ï¸ ØªÙ†Ø¸ÛŒÙ…Ø§Øª</button>
    </div>

    <script src="m1.js"></script>
    <script src="m2.js"></script>
    <script>
        // Ù…ØªØºÛŒØ±Ù‡Ø§ÛŒ Ø§ØµÙ„ÛŒ Ø¨Ø§Ø²ÛŒ
        let gameInstance = null;
        let graphicsEngine = null;
        let cameraSystem = null;
        
        // Ø´Ø±ÙˆØ¹ Ø¨Ø§Ø²ÛŒ
        function startGame() {
            document.getElementById('mainMenu').classList.add('hidden');
            
            // Ù…Ù‚Ø¯Ø§Ø±Ø¯Ù‡ÛŒ Ø§ÙˆÙ„ÛŒÙ‡ Ù…ÙˆØªÙˆØ±Ù‡Ø§ÛŒ Ø¨Ø§Ø²ÛŒ
            graphicsEngine = new GraphicsEngine();
            cameraSystem = new CameraSystem();
            gameInstance = new GameInstance();
            
            // Ø´Ø±ÙˆØ¹ Ø¨Ø§Ø²ÛŒ
            gameInstance.initialize();
        }
        
        // Ù†Ù…Ø§ÛŒØ´ Ø±Ø§Ù‡Ù†Ù…Ø§
        function showInstructions() {
            alert('ğŸ® Ø±Ø§Ù‡Ù†Ù…Ø§ÛŒ Ø¨Ø§Ø²ÛŒ:\n\nâ€¢ Ø¨Ø§ Ù…ÙˆØ³ ÛŒØ§ Ù„Ù…Ø³ ØµÙØ­Ù‡ Ø­Ø±Ú©Øª Ú©Ù†ÛŒØ¯\nâ€¢ Ø³Ú©Ù‡â€ŒÙ‡Ø§ Ø±Ø§ Ø¬Ù…Ø¹â€ŒØ¢ÙˆØ±ÛŒ Ú©Ù†ÛŒØ¯\nâ€¢ Ø§Ø² Ø¨Ø±Ø®ÙˆØ±Ø¯ Ø¨Ø§ Ø¯Ø´Ù…Ù†Ø§Ù† Ø®ÙˆØ¯Ø¯Ø§Ø±ÛŒ Ú©Ù†ÛŒØ¯\nâ€¢ Ø³ÙˆØ®Øª Ø®ÙˆØ¯ Ø±Ø§ Ù…Ø¯ÛŒØ±ÛŒØª Ú©Ù†ÛŒØ¯');
        }
        
        // Ù†Ù…Ø§ÛŒØ´ ØªÙ†Ø¸ÛŒÙ…Ø§Øª
        function showSettings() {
            alert('âš™ï¸ ØªÙ†Ø¸ÛŒÙ…Ø§Øª:\n\nâ€¢ Ú¯Ø±Ø§ÙÛŒÚ©: Ø¨Ø§Ù„Ø§\nâ€¢ ØµØ¯Ø§: ÙØ¹Ø§Ù„\nâ€¢ Ú©Ù†ØªØ±Ù„: Ø­Ø³Ø§Ø³ÛŒØª Ù…ØªÙˆØ³Ø·');
        }
        
        // Ø¨Ù‡â€ŒØ±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ HUD
        function updateHUD(score, fuel, level) {
            document.getElementById('score').textContent = score;
            document.getElementById('fuel').textContent = Math.round(fuel);
            document.getElementById('level').textContent = level;
        }
        
        // Ø¨Ø§Ø²Ú¯Ø´Øª Ø¨Ù‡ Ù…Ù†ÙˆÛŒ Ø§ØµÙ„ÛŒ
        function returnToMainMenu() {
            if (gameInstance) {
                gameInstance.cleanup();
                gameInstance = null;
            }
            document.getElementById('mainMenu').classList.remove('hidden');
        }
        
        // Ù…Ø¯ÛŒØ±ÛŒØª Ø±ÙˆÛŒØ¯Ø§Ø¯Ù‡Ø§ÛŒ ØµÙØ­Ù‡â€ŒÚ©Ù„ÛŒØ¯
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') {
                returnToMainMenu();
            }
        });
    </script>
</body>
</html>
