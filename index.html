<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø´Ø±ÙˆØ¹ Ø¨Ø§Ø²ÛŒ</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            text-align: center;
        }
        
        .container {
            background: rgba(255, 255, 255, 0.9);
            padding: 40px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            max-width: 400px;
        }
        
        h1 {
            color: #333;
            margin-bottom: 20px;
            font-size: 28px;
        }
        
        p {
            color: #666;
            margin-bottom: 30px;
            font-size: 16px;
            line-height: 1.6;
        }
        
        .start-btn {
            background: linear-gradient(45deg, #FF6B6B, #FF8E53);
            color: white;
            border: none;
            padding: 15px 40px;
            font-size: 18px;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(255, 107, 107, 0.4);
        }
        
        .start-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(255, 107, 107, 0.6);
        }
        
        .start-btn:active {
            transform: translateY(-1px);
        }
        
        .start-btn:disabled {
            background: #cccccc;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }
        
        .error-message {
            color: #ff4757;
            background: rgba(255, 71, 87, 0.1);
            padding: 10px;
            border-radius: 5px;
            margin-top: 15px;
            display: none;
        }
        
        .loading {
            display: none;
            color: #2ed573;
            margin-top: 15px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ® Ø¨Ø§Ø²ÛŒ Ø¬Ø°Ø§Ø¨</h1>
        <p>Ø¨Ø±Ø§ÛŒ Ø´Ø±ÙˆØ¹ Ø¨Ø§Ø²ÛŒ Ø±ÙˆÛŒ Ø¯Ú©Ù…Ù‡ Ø²ÛŒØ± Ú©Ù„ÛŒÚ© Ú©Ù†ÛŒØ¯</p>
        <button class="start-btn" onclick="checkAndStartGame()">Ø´Ø±ÙˆØ¹ Ø¨Ø§Ø²ÛŒ</button>
        <div class="loading" id="loading">Ø¯Ø± Ø­Ø§Ù„ Ø¨Ø±Ø±Ø³ÛŒ ÙØ§ÛŒÙ„ Ø¨Ø§Ø²ÛŒ...</div>
        <div class="error-message" id="errorMessage">
            ÙØ§ÛŒÙ„ Ø¨Ø§Ø²ÛŒ ÛŒØ§ÙØª Ù†Ø´Ø¯! Ù„Ø·ÙØ§ Ø§Ø² Ù…ÙˆØ¬ÙˆØ¯ Ø¨ÙˆØ¯Ù† ÙØ§ÛŒÙ„ m.js Ø§Ø·Ù…ÛŒÙ†Ø§Ù† Ø­Ø§ØµÙ„ Ú©Ù†ÛŒØ¯.
        </div>
    </div>

    <script>
        async function checkAndStartGame() {
            const startBtn = document.querySelector('.start-btn');
            const loading = document.getElementById('loading');
            const errorMessage = document.getElementById('errorMessage');
            
            // ØºÛŒØ±ÙØ¹Ø§Ù„ Ú©Ø±Ø¯Ù† Ø¯Ú©Ù…Ù‡ Ùˆ Ù¾Ù†Ù‡Ø§Ù† Ú©Ø±Ø¯Ù† Ø®Ø·Ø§
            startBtn.disabled = true;
            errorMessage.style.display = 'none';
            loading.style.display = 'block';
            startBtn.textContent = 'Ø¯Ø± Ø­Ø§Ù„ Ø¨Ø±Ø±Ø³ÛŒ...';
            
            try {
                // Ø¨Ø±Ø±Ø³ÛŒ ÙˆØ¬ÙˆØ¯ ÙØ§ÛŒÙ„ m.js
                const response = await fetch('m.js', { method: 'HEAD' });
                
                if (response.ok) {
                    // ÙØ§ÛŒÙ„ ÙˆØ¬ÙˆØ¯ Ø¯Ø§Ø±Ø¯ - Ø¨Ø§Ø±Ú¯ÛŒØ±ÛŒ Ø¨Ø§Ø²ÛŒ
                    loading.textContent = 'Ø¯Ø± Ø­Ø§Ù„ Ø¨Ø§Ø±Ú¯ÛŒØ±ÛŒ Ø¨Ø§Ø²ÛŒ...';
                    await loadGame();
                } else {
                    throw new Error('File not found');
                }
                
            } catch (error) {
                // Ù†Ù…Ø§ÛŒØ´ Ø®Ø·Ø§
                errorMessage.style.display = 'block';
                loading.style.display = 'none';
                startBtn.textContent = 'Ø´Ø±ÙˆØ¹ Ø¨Ø§Ø²ÛŒ';
                startBtn.disabled = false;
                console.error('Ø®Ø·Ø§ Ø¯Ø± ÛŒØ§ÙØªÙ† ÙØ§ÛŒÙ„ Ø¨Ø§Ø²ÛŒ:', error);
            }
        }
        
        function loadGame() {
            return new Promise((resolve, reject) => {
                const script = document.createElement('script');
                script.src = 'm.js';
                script.onload = function() {
                    console.log('Ø¨Ø§Ø²ÛŒ Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø¨Ø§Ø±Ú¯ÛŒØ±ÛŒ Ø´Ø¯!');
                    // Ù…Ø®ÙÛŒ Ú©Ø±Ø¯Ù† ØµÙØ­Ù‡ Ø´Ø±ÙˆØ¹
                    document.querySelector('.container').style.display = 'none';
                    
                    // Ø§Ú¯Ø± ØªØ§Ø¨Ø¹ Ø®Ø§ØµÛŒ Ø¨Ø±Ø§ÛŒ Ø´Ø±ÙˆØ¹ Ø¨Ø§Ø²ÛŒ Ø¯Ø± m.js ÙˆØ¬ÙˆØ¯ Ø¯Ø§Ø±Ø¯ØŒ Ø¢Ù† Ø±Ø§ ÙØ±Ø§Ø®ÙˆØ§Ù†ÛŒ Ú©Ù†ÛŒØ¯
                    if (typeof initGame === 'function') {
                        initGame();
                    }
                    resolve();
                };
                script.onerror = function() {
                    reject(new Error('Ø®Ø·Ø§ Ø¯Ø± Ø¨Ø§Ø±Ú¯ÛŒØ±ÛŒ ÙØ§ÛŒÙ„ Ø¨Ø§Ø²ÛŒ'));
                };
                document.head.appendChild(script);
            });
        }
        
        // Ø¨Ø±Ø±Ø³ÛŒ Ø®ÙˆØ¯Ú©Ø§Ø± Ù‡Ù†Ú¯Ø§Ù… Ø¨Ø§Ø±Ú¯ÛŒØ±ÛŒ ØµÙØ­Ù‡ (Ø§Ø®ØªÛŒØ§Ø±ÛŒ)
        window.addEventListener('load', function() {
            // Ù…ÛŒâ€ŒØªÙˆØ§Ù†ÛŒØ¯ Ø§ÛŒÙ† Ù‚Ø³Ù…Øª Ø±Ø§ ÙØ¹Ø§Ù„ Ú©Ù†ÛŒØ¯ Ø§Ú¯Ø± Ù…ÛŒâ€ŒØ®ÙˆØ§Ù‡ÛŒØ¯ Ù‡Ù†Ú¯Ø§Ù… Ù„ÙˆØ¯ ØµÙØ­Ù‡ Ø¨Ø±Ø±Ø³ÛŒ Ø´ÙˆØ¯
            // checkFileExists();
        });
        
        // ØªØ§Ø¨Ø¹ Ø¨Ø±Ø§ÛŒ Ø¨Ø±Ø±Ø³ÛŒ ÙˆØ¬ÙˆØ¯ ÙØ§ÛŒÙ„ (Ù…ÛŒâ€ŒØªÙˆØ§Ù†Ø¯ Ø¬Ø¯Ø§Ú¯Ø§Ù†Ù‡ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø´ÙˆØ¯)
        async function checkFileExists() {
            try {
                const response = await fetch('m.js', { method: 'HEAD' });
                return response.ok;
            } catch (error) {
                return false;
            }
        }
    </script>
</body>
</html>