<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Ù†Ø¨Ø±Ø¯ Ú©Ù‡Ú©Ø´Ø§Ù†ÛŒ Ù¾Ø±Ùˆ - Galactic Warfare PRO</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ğŸš€</text></svg>">
    
    <style>
        /* Reset Ùˆ ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ù¾Ø§ÛŒÙ‡ */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
            user-select: none;
            touch-action: manipulation;
            image-rendering: pixelated;
            image-rendering: -webkit-optimize-contrast;
        }
        
        html, body {
            width: 100%;
            height: 100%;
            overflow: hidden;
            background: #000000;
            position: fixed;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            color: white;
            touch-action: none;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        /* ØµÙØ­Ù‡ Ø´Ø±ÙˆØ¹ */
        #ØµÙØ­Ù‡_Ø´Ø±ÙˆØ¹ {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(ellipse at center, #0a0a2a 0%, #000000 100%);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            padding: env(safe-area-inset-top) env(safe-area-inset-right) env(safe-area-inset-bottom) env(safe-area-inset-left);
        }

        .Ù¾Ø³â€ŒØ²Ù…ÛŒÙ†Ù‡_Ø³ØªØ§Ø±Ù‡â€ŒÙ‡Ø§ {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: 
                radial-gradient(2px 2px at 20px 30px, #eee, transparent),
                radial-gradient(2px 2px at 40px 70px, #fff, transparent),
                radial-gradient(1px 1px at 90px 40px, #fff, transparent),
                radial-gradient(1px 1px at 130px 80px, #fff, transparent);
            background-repeat: repeat;
            background-size: 200px 100px;
            animation: Ø­Ø±Ú©Øª_Ø³ØªØ§Ø±Ù‡â€ŒÙ‡Ø§ 100s linear infinite;
        }

        @keyframes Ø­Ø±Ú©Øª_Ø³ØªØ§Ø±Ù‡â€ŒÙ‡Ø§ {
            from { transform: translateY(0); }
            to { transform: translateY(200px); }
        }

        .Ø¸Ø±Ù_Ø¹Ù†ÙˆØ§Ù† {
            text-align: center;
            margin-bottom: 40px;
            position: relative;
            z-index: 2;
        }

        .Ø¹Ù†ÙˆØ§Ù†_Ø§ØµÙ„ÛŒ {
            font-size: 3rem;
            font-weight: 900;
            background: linear-gradient(45deg, #ff0080, #8000ff, #0080ff);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-shadow: 0 0 50px rgba(255, 0, 128, 0.7);
            margin-bottom: 15px;
            letter-spacing: 2px;
        }

        .Ø¹Ù†ÙˆØ§Ù†_ÙØ±Ø¹ÛŒ {
            font-size: 1.2rem;
            color: #aaccff;
            margin-bottom: 20px;
            opacity: 0.9;
        }

        .Ø¸Ø±Ù_Ø¢Ù…Ø§Ø± {
            display: flex;
            gap: 20px;
            margin-bottom: 40px;
            flex-wrap: wrap;
            justify-content: center;
        }

        .Ø¢ÛŒØªÙ…_Ø¢Ù…Ø§Ø± {
            background: rgba(0, 20, 40, 0.8);
            border: 2px solid rgba(0, 204, 255, 0.6);
            border-radius: 15px;
            padding: 15px 25px;
            text-align: center;
            backdrop-filter: blur(10px);
            min-width: 120px;
            transition: transform 0.3s;
        }

        .Ø¢ÛŒØªÙ…_Ø¢Ù…Ø§Ø±:hover {
            transform: translateY(-5px);
            border-color: rgba(0, 204, 255, 0.9);
        }

        .Ù…Ù‚Ø¯Ø§Ø±_Ø¢Ù…Ø§Ø± {
            font-size: 2rem;
            color: #00ccff;
            font-weight: bold;
            margin-bottom: 5px;
            text-shadow: 0 0 10px rgba(0, 204, 255, 0.5);
        }

        .Ø¨Ø±Ú†Ø³Ø¨_Ø¢Ù…Ø§Ø± {
            font-size: 0.9rem;
            color: #88aaff;
            opacity: 0.8;
        }

        .Ø¯Ú©Ù…Ù‡_Ø´Ø±ÙˆØ¹ {
            background: linear-gradient(45deg, #ff0080, #ff6600);
            border: none;
            padding: 20px 50px;
            font-size: 1.5rem;
            border-radius: 15px;
            color: white;
            cursor: pointer;
            font-weight: bold;
            box-shadow: 0 10px 30px rgba(255, 0, 128, 0.5);
            transition: all 0.3s;
            z-index: 2;
            margin-top: 20px;
            position: relative;
            overflow: hidden;
        }

        .Ø¯Ú©Ù…Ù‡_Ø´Ø±ÙˆØ¹::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: 0.5s;
        }

        .Ø¯Ú©Ù…Ù‡_Ø´Ø±ÙˆØ¹:hover::before {
            left: 100%;
        }

        .Ø¯Ú©Ù…Ù‡_Ø´Ø±ÙˆØ¹:hover {
            transform: scale(1.05);
            box-shadow: 0 15px 40px rgba(255, 0, 128, 0.7);
        }

        /* ØµÙØ­Ù‡ Ø¨Ø§Ø²ÛŒ */
        #ØµÙØ­Ù‡_Ø¨Ø§Ø²ÛŒ {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 100;
            display: none;
            overflow: hidden;
            padding: env(safe-area-inset-top) env(safe-area-inset-right) env(safe-area-inset-bottom) env(safe-area-inset-left);
        }

        #Ú©Ø§Ù†ÙˆØ§Ø³_Ø¨Ø§Ø²ÛŒ {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1;
        }

        /* Ø±Ø§Ø¨Ø· Ø¨Ø§Ø²ÛŒ - Ø³Ø§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ Ø´Ø¯Ù‡ */
        .Ø±Ø§Ø¨Ø·_Ø¨Ø§Ø²ÛŒ {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 200;
            padding: env(safe-area-inset-top) env(safe-area-inset-right) env(safe-area-inset-bottom) env(safe-area-inset-left);
        }

        .Ø±Ø§Ø¨Ø·_Ø¨Ø§Ù„Ø§ {
            position: absolute;
            top: max(15px, env(safe-area-inset-top));
            left: 0;
            width: 100%;
            display: flex;
            justify-content: space-between;
            padding: 0 20px;
            gap: 15px;
        }

        .Ø¸Ø±Ù_Ø§Ù…ØªÛŒØ§Ø², .Ø¸Ø±Ù_Ù…Ø±Ø­Ù„Ù‡, .Ø¸Ø±Ù_Ø³Ù„Ø§Ù…Øª {
            background: rgba(0, 10, 30, 0.9);
            border: 2px solid rgba(255, 255, 255, 0.5);
            border-radius: 12px;
            padding: 12px 20px;
            backdrop-filter: blur(15px);
            min-width: 80px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.5);
        }

        .Ù…Ù‚Ø¯Ø§Ø±_Ø§Ù…ØªÛŒØ§Ø², .Ù…Ù‚Ø¯Ø§Ø±_Ù…Ø±Ø­Ù„Ù‡, .Ù…Ù‚Ø¯Ø§Ø±_Ø³Ù„Ø§Ù…Øª {
            font-size: 1.3rem;
            color: #00ffaa;
            font-weight: bold;
            text-align: center;
            text-shadow: 0 0 10px rgba(0, 255, 170, 0.5);
        }

        .Ø¨Ø±Ú†Ø³Ø¨_Ø§Ù…ØªÛŒØ§Ø², .Ø¨Ø±Ú†Ø³Ø¨_Ù…Ø±Ø­Ù„Ù‡, .Ø¨Ø±Ú†Ø³Ø¨_Ø³Ù„Ø§Ù…Øª {
            font-size: 0.7rem;
            color: #aaccff;
            text-align: center;
            opacity: 0.8;
        }

        /* Ø¯ÙˆØ±Ø¨ÛŒÙ† Ø¢Ù†Ù„Ø§ÛŒÙ† - Ø³Ø§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ Ø´Ø¯Ù‡ */
        .Ø¯ÙˆØ±Ø¨ÛŒÙ†_Ø¢Ù†Ù„Ø§ÛŒÙ† {
            position: absolute;
            bottom: max(20px, env(safe-area-inset-bottom));
            right: 20px;
            width: 250px;
            height: 250px;
            background: rgba(0, 5, 15, 0.95);
            border: 3px solid rgba(255, 255, 255, 0.7);
            border-radius: 12px;
            backdrop-filter: blur(20px);
            z-index: 250;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.7);
        }

        .Ø¹Ù†ÙˆØ§Ù†_Ø¯ÙˆØ±Ø¨ÛŒÙ† {
            position: absolute;
            top: 10px;
            right: 10px;
            background: rgba(0, 0, 0, 0.7);
            border-radius: 8px;
            padding: 8px 12px;
            font-size: 0.8rem;
            color: #00ffaa;
            z-index: 2;
            text-shadow: 0 0 5px rgba(0, 255, 170, 0.5);
        }

        /* Ù¾ÛŒØ§Ù… Ø¨Ø§Ø²ÛŒ */
        .Ù¾ÛŒØ§Ù…_Ø¨Ø§Ø²ÛŒ {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0, 10, 30, 0.95);
            border: 3px solid #00ff88;
            border-radius: 20px;
            padding: 30px 40px;
            text-align: center;
            z-index: 400;
            display: none;
            backdrop-filter: blur(20px);
            box-shadow: 0 0 50px rgba(0, 255, 136, 0.6);
            min-width: 300px;
        }

        .Ù…ØªÙ†_Ù¾ÛŒØ§Ù… {
            font-size: 1.8rem;
            color: #00ff88;
            margin-bottom: 25px;
            text-shadow: 0 0 15px rgba(0, 255, 136, 0.7);
            line-height: 1.5;
        }

        .Ø¯Ú©Ù…Ù‡_Ù¾ÛŒØ§Ù… {
            background: linear-gradient(45deg, #00ff88, #00cc66);
            border: none;
            padding: 12px 30px;
            font-size: 1.2rem;
            border-radius: 10px;
            color: white;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s;
        }

        .Ø¯Ú©Ù…Ù‡_Ù¾ÛŒØ§Ù…:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 20px rgba(0, 255, 136, 0.5);
        }

        /* ØµÙØ­Ù‡ Ù„ÙˆØ¯ÛŒÙ†Ú¯ */
        .Ù„ÙˆØ¯ÛŒÙ†Ú¯_Ø±Ù†Ú¯ÛŒ {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.95);
            display: none;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 500;
        }

        .Ø¹Ù†ÙˆØ§Ù†_Ù„ÙˆØ¯ÛŒÙ†Ú¯ {
            font-size: 3.5rem;
            color: #00ccff;
            margin-bottom: 30px;
            text-align: center;
            animation: Ú†Ø±Ø®Ø´_Ø±Ù†Ú¯ 3s infinite;
            text-shadow: 0 0 25px rgba(0, 204, 255, 0.8);
        }

        .Ø¹Ù†ÙˆØ§Ù†_ÙØ±Ø¹ÛŒ_Ù„ÙˆØ¯ÛŒÙ†Ú¯ {
            font-size: 1.8rem;
            color: #aaccff;
            margin-bottom: 50px;
            text-align: center;
            opacity: 0.9;
        }

        .Ø§Ø³Ù¾ÛŒÙ†Ø±_Ø±Ù†Ú¯ÛŒ {
            width: 150px;
            height: 150px;
            border: 10px solid transparent;
            border-radius: 50%;
            animation: Ú†Ø±Ø®Ø´_Ø§Ø³Ù¾ÛŒÙ†Ø± 2s linear infinite;
            position: relative;
        }

        .Ø§Ø³Ù¾ÛŒÙ†Ø±_Ø¯Ø§Ø®Ù„ÛŒ {
            position: absolute;
            top: 15px;
            left: 15px;
            right: 15px;
            bottom: 15px;
            border: 6px solid transparent;
            border-radius: 50%;
            animation: Ú†Ø±Ø®Ø´_Ø§Ø³Ù¾ÛŒÙ†Ø±_Ù…Ø¹Ú©ÙˆØ³ 1.5s linear infinite;
        }

        @keyframes Ú†Ø±Ø®Ø´_Ø§Ø³Ù¾ÛŒÙ†Ø± {
            0% { 
                border-top-color: #ff0080;
                border-right-color: #8000ff;
                border-bottom-color: #0080ff;
                border-left-color: #00ff80;
                transform: rotate(0deg);
            }
            100% { 
                transform: rotate(360deg);
            }
        }

        @keyframes Ú†Ø±Ø®Ø´_Ø§Ø³Ù¾ÛŒÙ†Ø±_Ù…Ø¹Ú©ÙˆØ³ {
            0% { 
                border-top-color: #00ff80;
                border-right-color: #ff0080;
                border-bottom-color: #8000ff;
                border-left-color: #0080ff;
                transform: rotate(0deg);
            }
            100% { 
                transform: rotate(-360deg);
            }
        }

        @keyframes Ú†Ø±Ø®Ø´_Ø±Ù†Ú¯ {
            0% { color: #ff0080; }
            25% { color: #8000ff; }
            50% { color: #0080ff; }
            75% { color: #00ff80; }
            100% { color: #ff0080; }
        }

        /* Ø¬ÙˆÛŒâ€ŒØ§Ø³ØªÛŒÚ© Ø¨Ù‡Ø¨ÙˆØ¯ ÛŒØ§ÙØªÙ‡ */
        .Ø¸Ø±Ù_Ø¬ÙˆÛŒâ€ŒØ§Ø³ØªÛŒÚ© {
            position: fixed;
            bottom: max(30px, env(safe-area-inset-bottom));
            left: 50%;
            transform: translateX(-50%);
            width: 110px;
            height: 110px;
            z-index: 300;
        }

        .Ù¾Ø§ÛŒÙ‡_Ø¬ÙˆÛŒâ€ŒØ§Ø³ØªÛŒÚ© {
            width: 100%;
            height: 100%;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            border: 3px solid rgba(255, 255, 255, 0.4);
            backdrop-filter: blur(15px);
            display: flex;
            justify-content: center;
            align-items: center;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
        }

        .Ø¯Ø³ØªÙ‡_Ø¬ÙˆÛŒâ€ŒØ§Ø³ØªÛŒÚ© {
            width: 45px;
            height: 45px;
            background: linear-gradient(45deg, #00ccff, #0066ff);
            border-radius: 50%;
            box-shadow: 0 0 20px rgba(0, 204, 255, 0.8);
            transition: transform 0.1s;
        }

        /* Ø±Ø³Ù¾Ø§Ù†Ø³ÛŒÙˆ */
        @media (max-width: 768px) {
            .Ø¹Ù†ÙˆØ§Ù†_Ø§ØµÙ„ÛŒ {
                font-size: 2.2rem;
            }
            
            .Ø¹Ù†ÙˆØ§Ù†_ÙØ±Ø¹ÛŒ {
                font-size: 1rem;
            }
            
            .Ø¸Ø±Ù_Ø¢Ù…Ø§Ø± {
                flex-direction: column;
                gap: 15px;
            }
            
            .Ø¢ÛŒØªÙ…_Ø¢Ù…Ø§Ø± {
                padding: 12px 20px;
                min-width: 100px;
            }
            
            .Ù…Ù‚Ø¯Ø§Ø±_Ø¢Ù…Ø§Ø± {
                font-size: 1.8rem;
            }
            
            .Ø¯Ú©Ù…Ù‡_Ø´Ø±ÙˆØ¹ {
                padding: 18px 40px;
                font-size: 1.3rem;
            }
            
            .Ø¯ÙˆØ±Ø¨ÛŒÙ†_Ø¢Ù†Ù„Ø§ÛŒÙ† {
                width: 180px;
                height: 180px;
            }
            
            .Ø±Ø§Ø¨Ø·_Ø¨Ø§Ù„Ø§ {
                flex-wrap: wrap;
                justify-content: center;
                gap: 10px;
            }
        }

        @media (max-width: 480px) {
            .Ø¹Ù†ÙˆØ§Ù†_Ø§ØµÙ„ÛŒ {
                font-size: 1.8rem;
            }
            
            .Ø¹Ù†ÙˆØ§Ù†_ÙØ±Ø¹ÛŒ {
                font-size: 0.9rem;
            }
            
            .Ø¢ÛŒØªÙ…_Ø¢Ù…Ø§Ø± {
                padding: 10px 15px;
                min-width: 90px;
            }
            
            .Ù…Ù‚Ø¯Ø§Ø±_Ø¢Ù…Ø§Ø± {
                font-size: 1.5rem;
            }
            
            .Ø¨Ø±Ú†Ø³Ø¨_Ø¢Ù…Ø§Ø± {
                font-size: 0.8rem;
            }
            
            .Ø¯ÙˆØ±Ø¨ÛŒÙ†_Ø¢Ù†Ù„Ø§ÛŒÙ† {
                width: 150px;
                height: 150px;
            }
            
            .Ø¸Ø±Ù_Ø¬ÙˆÛŒâ€ŒØ§Ø³ØªÛŒÚ© {
                width: 100px;
                height: 100px;
            }
            
            .Ø¯Ø³ØªÙ‡_Ø¬ÙˆÛŒâ€ŒØ§Ø³ØªÛŒÚ© {
                width: 40px;
                height: 40px;
            }
        }

        /* Ø§Ø³ØªØ§ÛŒÙ„â€ŒÙ‡Ø§ÛŒ Ù…Ø®ØµÙˆØµ Ø§Ù†Ø¯Ø±ÙˆÛŒØ¯ */
        @media (max-width: 768px) and (orientation: portrait) {
            .Ø¯ÙˆØ±Ø¨ÛŒÙ†_Ø¢Ù†Ù„Ø§ÛŒÙ† {
                bottom: 120px;
            }
        }
        
        @media (max-width: 768px) and (orientation: landscape) {
            .Ø±Ø§Ø¨Ø·_Ø¨Ø§Ù„Ø§ {
                top: 5px;
            }
            
            .Ø¯ÙˆØ±Ø¨ÛŒÙ†_Ø¢Ù†Ù„Ø§ÛŒÙ† {
                bottom: 10px;
                right: 10px;
                width: 140px;
                height: 140px;
            }
        }
    </style>
</head>
<body>
    <!-- ØµÙØ­Ù‡ Ø´Ø±ÙˆØ¹ -->
    <div id="ØµÙØ­Ù‡_Ø´Ø±ÙˆØ¹">
        <div class="Ù¾Ø³â€ŒØ²Ù…ÛŒÙ†Ù‡_Ø³ØªØ§Ø±Ù‡â€ŒÙ‡Ø§"></div>
        
        <div class="Ø¸Ø±Ù_Ø¹Ù†ÙˆØ§Ù†">
            <h1 class="Ø¹Ù†ÙˆØ§Ù†_Ø§ØµÙ„ÛŒ">Ù†Ø¨Ø±Ø¯ Ú©Ù‡Ú©Ø´Ø§Ù†ÛŒ PRO</h1>
            <p class="Ø¹Ù†ÙˆØ§Ù†_ÙØ±Ø¹ÛŒ">Ù…ÙˆØªÙˆØ± Ø¨Ø§Ø²ÛŒ Ø­Ø±ÙÙ‡â€ŒØ§ÛŒ Ø¨Ø§ Ø¨Ù‡ÛŒÙ†Ù‡â€ŒØ³Ø§Ø²ÛŒ Ø§Ù†Ø¯Ø±ÙˆÛŒØ¯</p>
        </div>
        
        <div class="Ø¸Ø±Ù_Ø¢Ù…Ø§Ø±">
            <div class="Ø¢ÛŒØªÙ…_Ø¢Ù…Ø§Ø±">
                <div class="Ù…Ù‚Ø¯Ø§Ø±_Ø¢Ù…Ø§Ø±" id="Ø¨Ø§Ù„Ø§ØªØ±ÛŒÙ†_Ø§Ù…ØªÛŒØ§Ø²">Û°</div>
                <div class="Ø¨Ø±Ú†Ø³Ø¨_Ø¢Ù…Ø§Ø±">Ø¨Ø§Ù„Ø§ØªØ±ÛŒÙ† Ø§Ù…ØªÛŒØ§Ø²</div>
            </div>
            <div class="Ø¢ÛŒØªÙ…_Ø¢Ù…Ø§Ø±">
                <div class="Ù…Ù‚Ø¯Ø§Ø±_Ø¢Ù…Ø§Ø±" id="Ù…Ø¬Ù…ÙˆØ¹_Ø³Ú©Ù‡â€ŒÙ‡Ø§">Û°</div>
                <div class="Ø¨Ø±Ú†Ø³Ø¨_Ø¢Ù…Ø§Ø±">Ø³Ú©Ù‡â€ŒÙ‡Ø§ÛŒ Ø¬Ù…Ø¹â€ŒØ¢ÙˆØ±ÛŒ Ø´Ø¯Ù‡</div>
            </div>
            <div class="Ø¢ÛŒØªÙ…_Ø¢Ù…Ø§Ø±">
                <div class="Ù…Ù‚Ø¯Ø§Ø±_Ø¢Ù…Ø§Ø±" id="Ù…Ø¬Ù…ÙˆØ¹_Ú©Ø´ØªÙ‡â€ŒÙ‡Ø§">Û°</div>
                <div class="Ø¨Ø±Ú†Ø³Ø¨_Ø¢Ù…Ø§Ø±">Ø¯Ø´Ù…Ù†Ø§Ù† Ù†Ø§Ø¨ÙˆØ¯ Ø´Ø¯Ù‡</div>
            </div>
        </div>
        
        <button class="Ø¯Ú©Ù…Ù‡_Ø´Ø±ÙˆØ¹" onclick="Ø´Ø±ÙˆØ¹_Ø¨Ø§Ø²ÛŒ()">ğŸš€ Ø´Ø±ÙˆØ¹ Ù¾Ø±ÙˆØ§Ø²</button>
    </div>

    <!-- ØµÙØ­Ù‡ Ø¨Ø§Ø²ÛŒ -->
    <div id="ØµÙØ­Ù‡_Ø¨Ø§Ø²ÛŒ">
        <canvas id="Ú©Ø§Ù†ÙˆØ§Ø³_Ø¨Ø§Ø²ÛŒ"></canvas>
        
        <!-- Ø±Ø§Ø¨Ø· Ø¨Ø§Ø²ÛŒ -->
        <div class="Ø±Ø§Ø¨Ø·_Ø¨Ø§Ø²ÛŒ">
            <div class="Ø±Ø§Ø¨Ø·_Ø¨Ø§Ù„Ø§">
                <div class="Ø¸Ø±Ù_Ø§Ù…ØªÛŒØ§Ø²">
                    <div class="Ù…Ù‚Ø¯Ø§Ø±_Ø§Ù…ØªÛŒØ§Ø²" id="Ù…Ù‚Ø¯Ø§Ø±_Ø§Ù…ØªÛŒØ§Ø²">Û°</div>
                    <div class="Ø¨Ø±Ú†Ø³Ø¨_Ø§Ù…ØªÛŒØ§Ø²">Ø§Ù…ØªÛŒØ§Ø²</div>
                </div>
                
                <div class="Ø¸Ø±Ù_Ù…Ø±Ø­Ù„Ù‡">
                    <div class="Ù…Ù‚Ø¯Ø§Ø±_Ù…Ø±Ø­Ù„Ù‡" id="Ù…Ù‚Ø¯Ø§Ø±_Ù…Ø±Ø­Ù„Ù‡">Û±</div>
                    <div class="Ø¨Ø±Ú†Ø³Ø¨_Ù…Ø±Ø­Ù„Ù‡">Ù…Ø±Ø­Ù„Ù‡</div>
                </div>
                
                <div class="Ø¸Ø±Ù_Ø³Ù„Ø§Ù…Øª">
                    <div class="Ù…Ù‚Ø¯Ø§Ø±_Ø³Ù„Ø§Ù…Øª" id="Ù…Ù‚Ø¯Ø§Ø±_Ø³Ù„Ø§Ù…Øª">Û±Û°Û°</div>
                    <div class="Ø¨Ø±Ú†Ø³Ø¨_Ø³Ù„Ø§Ù…Øª">Ø³Ù„Ø§Ù…Øª</div>
                </div>
            </div>
            
            <!-- Ø¯ÙˆØ±Ø¨ÛŒÙ† Ø¢Ù†Ù„Ø§ÛŒÙ† -->
            <div class="Ø¯ÙˆØ±Ø¨ÛŒÙ†_Ø¢Ù†Ù„Ø§ÛŒÙ†">
                <canvas id="Ø¯ÙˆØ±Ø¨ÛŒÙ†_Ø¢Ù†Ù„Ø§ÛŒÙ†_Ú©Ø§Ù†ÙˆØ§Ø³"></canvas>
                <div class="Ø¹Ù†ÙˆØ§Ù†_Ø¯ÙˆØ±Ø¨ÛŒÙ†">ğŸ“ Ù†Ù‚Ø´Ù‡ Ø²Ù†Ø¯Ù‡</div>
            </div>
        </div>
        
        <!-- Ø¬ÙˆÛŒâ€ŒØ§Ø³ØªÛŒÚ© -->
        <div class="Ø¸Ø±Ù_Ø¬ÙˆÛŒâ€ŒØ§Ø³ØªÛŒÚ©">
            <div class="Ù¾Ø§ÛŒÙ‡_Ø¬ÙˆÛŒâ€ŒØ§Ø³ØªÛŒÚ©">
                <div class="Ø¯Ø³ØªÙ‡_Ø¬ÙˆÛŒâ€ŒØ§Ø³ØªÛŒÚ©" id="Ø¯Ø³ØªÙ‡_Ø¬ÙˆÛŒâ€ŒØ§Ø³ØªÛŒÚ©"></div>
            </div>
        </div>
        
        <!-- Ù¾ÛŒØ§Ù… Ø¨Ø§Ø²ÛŒ -->
        <div class="Ù¾ÛŒØ§Ù…_Ø¨Ø§Ø²ÛŒ" id="Ù¾ÛŒØ§Ù…_Ø¨Ø§Ø²ÛŒ">
            <div class="Ù…ØªÙ†_Ù¾ÛŒØ§Ù…" id="Ù…ØªÙ†_Ù¾ÛŒØ§Ù…"></div>
            <button class="Ø¯Ú©Ù…Ù‡_Ù¾ÛŒØ§Ù…" onclick="Ø´Ø±ÙˆØ¹_Ù…Ø¬Ø¯Ø¯_Ù…Ø±Ø­Ù„Ù‡()">Ø´Ø±ÙˆØ¹ Ù…Ø¬Ø¯Ø¯</button>
        </div>
        
        <!-- ØµÙØ­Ù‡ Ù„ÙˆØ¯ÛŒÙ†Ú¯ -->
        <div class="Ù„ÙˆØ¯ÛŒÙ†Ú¯_Ø±Ù†Ú¯ÛŒ" id="Ù„ÙˆØ¯ÛŒÙ†Ú¯_Ø±Ù†Ú¯ÛŒ">
            <div class="Ø¹Ù†ÙˆØ§Ù†_Ù„ÙˆØ¯ÛŒÙ†Ú¯">Ù…Ø±Ø­Ù„Ù‡ Ø¨Ø¹Ø¯</div>
            <div class="Ø¹Ù†ÙˆØ§Ù†_ÙØ±Ø¹ÛŒ_Ù„ÙˆØ¯ÛŒÙ†Ú¯">Ø¯Ø± Ø­Ø§Ù„ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø¬Ù‡Ø§Ù† Ø¬Ø¯ÛŒØ¯...</div>
            <div class="Ø§Ø³Ù¾ÛŒÙ†Ø±_Ø±Ù†Ú¯ÛŒ">
                <div class="Ø§Ø³Ù¾ÛŒÙ†Ø±_Ø¯Ø§Ø®Ù„ÛŒ"></div>
            </div>
        </div>
    </div>

    <script>
        // ============================================
        // Ù…ÙˆØªÙˆØ± Ø¨Ø§Ø²ÛŒ Ø­Ø±ÙÙ‡â€ŒØ§ÛŒ - Ø¨Ù‡ÛŒÙ†Ù‡â€ŒØ³Ø§Ø²ÛŒ Ø´Ø¯Ù‡ Ø¨Ø±Ø§ÛŒ Ø§Ù†Ø¯Ø±ÙˆÛŒØ¯
        // ============================================

        // ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ø¨Ø§Ø²ÛŒ - Ø¨Ù‡Ø¨ÙˆØ¯ ÛŒØ§ÙØªÙ‡
        const ØªÙ†Ø¸ÛŒÙ…Ø§Øª_Ø¨Ø§Ø²ÛŒ = {
            // Ø¬Ù‡Ø§Ù† 5 Ø¨Ø±Ø§Ø¨Ø± Ø¨Ø²Ø±Ú¯â€ŒØªØ±
            Ø§Ù†Ø¯Ø§Ø²Ù‡_Ø¬Ù‡Ø§Ù†: 100000,
            
            // Ø³ÛŒØ³ØªÙ… Ù…Ø±Ø­Ù„Ù‡â€ŒØ¨Ù†Ø¯ÛŒ Ù¾ÙˆÛŒØ§
            Ø³Ú©Ù‡_Ù…Ø±Ø­Ù„Ù‡_Ø§ÙˆÙ„: 10,
            Ø§ÙØ²Ø§ÛŒØ´_Ø³Ú©Ù‡_Ù‡Ø±_Ù…Ø±Ø­Ù„Ù‡: 10,
            
            // ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ø¯Ø´Ù…Ù†Ø§Ù†
            Ø¯Ø´Ù…Ù†Ø§Ù†_Ø§ÙˆÙ„ÛŒÙ‡: 40,
            Ø§ÙØ²Ø§ÛŒØ´_Ø¯Ø´Ù…Ù†_Ù‡Ø±_Ù…Ø±Ø­Ù„Ù‡: 5,
            Ù†Ø±Ø®_ØªÙˆÙ„ÛŒØ¯_Ø¯Ø´Ù…Ù†: 1500,
            Ú©Ø§Ù‡Ø´_ØªÙˆÙ„ÛŒØ¯_Ù‡Ø±_Ù…Ø±Ø­Ù„Ù‡: 100,
            
            // ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ø¨Ø§Ø²ÛŒÚ©Ù†
            Ø³Ø±Ø¹Øª_Ø¨Ø§Ø²ÛŒÚ©Ù†: 25,
            Ø§Ù†Ø¯Ø§Ø²Ù‡_Ø¨Ø§Ø²ÛŒÚ©Ù†: 100,
            Ø³Ø±Ø¹Øª_Ø¨Ø§Ø²Ú¯Ø´Øª_Ø³Ù„Ø§Ù…Øª: 0.01, // Ø¨Ø§Ø²ÛŒØ§Ø¨ÛŒ Ø®ÙˆØ¯Ú©Ø§Ø± Ø³Ù„Ø§Ù…Øª
            
            // ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ø´Ù„ÛŒÚ©
            ØªØ¹Ø¯Ø§Ø¯_Ú¯Ù„ÙˆÙ„Ù‡: 10,
            Ø³Ø±Ø¹Øª_Ú¯Ù„ÙˆÙ„Ù‡: 22,
            Ø¨Ø±Ø¯_Ú¯Ù„ÙˆÙ„Ù‡: 3000,
            Ù†Ø±Ø®_Ø´Ù„ÛŒÚ©_Ø®ÙˆØ¯Ú©Ø§Ø±: 350,
            
            // ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ø¯ÙˆØ±Ø¨ÛŒÙ†
            Ø³Ø±Ø¹Øª_Ø¯Ù†Ø¨Ø§Ù„_Ú©Ø±Ø¯Ù†_Ø¯ÙˆØ±Ø¨ÛŒÙ†: 0.1,
            Ø¶Ø±ÛŒØ¨_Ø²ÙˆÙ…: 0.25,
            
            // ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ø¢ÛŒØªÙ…â€ŒÙ‡Ø§
            Ø§Ù†Ø¯Ø§Ø²Ù‡_Ø³Ú©Ù‡: 70,
            Ø§Ù†Ø¯Ø§Ø²Ù‡_Ø¯Ø´Ù…Ù†: 60,
            Ù†Ø±Ø®_ØªÙˆÙ„ÛŒØ¯_Ø³Ù„Ø§Ù…Øª: 45000,
            Ù…Ø¯Øª_Ø³Ù„Ø§Ù…Øª: 45000,
            
            // ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ú¯Ø±Ø§ÙÛŒÚ©
            ØªØ¹Ø¯Ø§Ø¯_Ø³ØªØ§Ø±Ù‡: 8000,
            ØªØ¹Ø¯Ø§Ø¯_Ø°Ø±Ø§Øª_Ø­Ø¯Ø§Ú©Ø«Ø±: 500
        };

        // ÙˆØ¶Ø¹ÛŒØª Ø¨Ø§Ø²ÛŒ
        const ÙˆØ¶Ø¹ÛŒØª_Ø¨Ø§Ø²ÛŒ = {
            Ø§Ù…ØªÛŒØ§Ø²: 0,
            Ø¨Ø§Ù„Ø§ØªØ±ÛŒÙ†_Ø§Ù…ØªÛŒØ§Ø²: parseInt(localStorage.getItem('Ø¨Ø§Ù„Ø§ØªØ±ÛŒÙ†_Ø§Ù…ØªÛŒØ§Ø²')) || 0,
            Ù…Ø¬Ù…ÙˆØ¹_Ø³Ú©Ù‡â€ŒÙ‡Ø§: parseInt(localStorage.getItem('Ù…Ø¬Ù…ÙˆØ¹_Ø³Ú©Ù‡â€ŒÙ‡Ø§')) || 0,
            Ù…Ø¬Ù…ÙˆØ¹_Ú©Ø´ØªÙ‡â€ŒÙ‡Ø§: parseInt(localStorage.getItem('Ù…Ø¬Ù…ÙˆØ¹_Ú©Ø´ØªÙ‡â€ŒÙ‡Ø§')) || 0,
            Ø³Ú©Ù‡â€ŒÙ‡Ø§ÛŒ_Ø¬Ù…Ø¹â€ŒØ¢ÙˆØ±ÛŒ_Ø´Ø¯Ù‡: 0,
            Ø³Ù„Ø§Ù…Øª: 100,
            Ù…Ø±Ø­Ù„Ù‡: parseInt(localStorage.getItem('Ù…Ø±Ø­Ù„Ù‡')) || 1,
            Ø¯Ø´Ù…Ù†Ø§Ù†_Ù†Ø§Ø¨ÙˆØ¯_Ø´Ø¯Ù‡: 0,
            Ø¨Ø§Ø²ÛŒ_Ø¯Ø±_Ø­Ø§Ù„_Ø§Ø¬Ø±Ø§: false,
            Ø¯ÙˆØ±Ø¨ÛŒÙ†: { x: 0, y: 0 },
            Ø¢Ø®Ø±ÛŒÙ†_ØªÙˆÙ„ÛŒØ¯_Ø³Ù„Ø§Ù…Øª: 0,
            Ø¢ÛŒØªÙ…â€ŒÙ‡Ø§ÛŒ_Ø³Ù„Ø§Ù…Øª: [],
            Ø¢Ø®Ø±ÛŒÙ†_Ø²Ù…Ø§Ù†_Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ: 0,
            fps: 0
        };

        // Ø§Ù„Ù…Ø§Ù†â€ŒÙ‡Ø§ÛŒ DOM
        const ØµÙØ­Ù‡_Ø´Ø±ÙˆØ¹ = document.getElementById('ØµÙØ­Ù‡_Ø´Ø±ÙˆØ¹');
        const ØµÙØ­Ù‡_Ø¨Ø§Ø²ÛŒ = document.getElementById('ØµÙØ­Ù‡_Ø¨Ø§Ø²ÛŒ');
        const Ú©Ø§Ù†ÙˆØ§Ø³_Ø¨Ø§Ø²ÛŒ = document.getElementById('Ú©Ø§Ù†ÙˆØ§Ø³_Ø¨Ø§Ø²ÛŒ');
        const Ø¯ÙˆØ±Ø¨ÛŒÙ†_Ø¢Ù†Ù„Ø§ÛŒÙ†_Ú©Ø§Ù†ÙˆØ§Ø³ = document.getElementById('Ø¯ÙˆØ±Ø¨ÛŒÙ†_Ø¢Ù†Ù„Ø§ÛŒÙ†_Ú©Ø§Ù†ÙˆØ§Ø³');
        const Ù…Ù‚Ø¯Ø§Ø±_Ø§Ù…ØªÛŒØ§Ø² = document.getElementById('Ù…Ù‚Ø¯Ø§Ø±_Ø§Ù…ØªÛŒØ§Ø²');
        const Ù…Ù‚Ø¯Ø§Ø±_Ù…Ø±Ø­Ù„Ù‡ = document.getElementById('Ù…Ù‚Ø¯Ø§Ø±_Ù…Ø±Ø­Ù„Ù‡');
        const Ù…Ù‚Ø¯Ø§Ø±_Ø³Ù„Ø§Ù…Øª = document.getElementById('Ù…Ù‚Ø¯Ø§Ø±_Ø³Ù„Ø§Ù…Øª');
        const Ø¨Ø§Ù„Ø§ØªØ±ÛŒÙ†_Ø§Ù…ØªÛŒØ§Ø² = document.getElementById('Ø¨Ø§Ù„Ø§ØªØ±ÛŒÙ†_Ø§Ù…ØªÛŒØ§Ø²');
        const Ù…Ø¬Ù…ÙˆØ¹_Ø³Ú©Ù‡â€ŒÙ‡Ø§ = document.getElementById('Ù…Ø¬Ù…ÙˆØ¹_Ø³Ú©Ù‡â€ŒÙ‡Ø§');
        const Ù…Ø¬Ù…ÙˆØ¹_Ú©Ø´ØªÙ‡â€ŒÙ‡Ø§ = document.getElementById('Ù…Ø¬Ù…ÙˆØ¹_Ú©Ø´ØªÙ‡â€ŒÙ‡Ø§');
        const Ø¯Ø³ØªÙ‡_Ø¬ÙˆÛŒâ€ŒØ§Ø³ØªÛŒÚ© = document.getElementById('Ø¯Ø³ØªÙ‡_Ø¬ÙˆÛŒâ€ŒØ§Ø³ØªÛŒÚ©');
        const Ù¾ÛŒØ§Ù…_Ø¨Ø§Ø²ÛŒ = document.getElementById('Ù¾ÛŒØ§Ù…_Ø¨Ø§Ø²ÛŒ');
        const Ù…ØªÙ†_Ù¾ÛŒØ§Ù… = document.getElementById('Ù…ØªÙ†_Ù¾ÛŒØ§Ù…');
        const Ù„ÙˆØ¯ÛŒÙ†Ú¯_Ø±Ù†Ú¯ÛŒ = document.getElementById('Ù„ÙˆØ¯ÛŒÙ†Ú¯_Ø±Ù†Ú¯ÛŒ');

        // ContextÙ‡Ø§ÛŒ Canvas
        const Ù‚Ù„Ù… = Ú©Ø§Ù†ÙˆØ§Ø³_Ø¨Ø§Ø²ÛŒ.getContext('2d', { alpha: false });
        const Ù‚Ù„Ù…_Ø¯ÙˆØ±Ø¨ÛŒÙ† = Ø¯ÙˆØ±Ø¨ÛŒÙ†_Ø¢Ù†Ù„Ø§ÛŒÙ†_Ú©Ø§Ù†ÙˆØ§Ø³.getContext('2d');

        // Object Pools Ø¨Ø±Ø§ÛŒ Ø¨Ù‡ÛŒÙ†Ù‡â€ŒØ³Ø§Ø²ÛŒ Ø­Ø§ÙØ¸Ù‡
        class ObjectPool {
            constructor(createFn, resetFn, initialSize = 100) {
                this.createFn = createFn;
                this.resetFn = resetFn;
                this.pool = [];
                this.active = new Set();
                
                for (let i = 0; i < initialSize; i++) {
                    this.pool.push(createFn());
                }
            }
            
            acquire() {
                let obj;
                if (this.pool.length > 0) {
                    obj = this.pool.pop();
                } else {
                    obj = this.createFn();
                }
                
                this.resetFn(obj);
                this.active.add(obj);
                return obj;
            }
            
            release(obj) {
                if (this.active.has(obj)) {
                    this.active.delete(obj);
                    this.pool.push(obj);
                }
            }
            
            releaseAll() {
                for (const obj of this.active) {
                    this.pool.push(obj);
                }
                this.active.clear();
            }
        }

        // Spatial Partitioning Ø¨Ø±Ø§ÛŒ Ø¨Ù‡ÛŒÙ†Ù‡â€ŒØ³Ø§Ø²ÛŒ ØªØ´Ø®ÛŒØµ Ø¨Ø±Ø®ÙˆØ±Ø¯
        class SpatialGrid {
            constructor(cellSize) {
                this.cellSize = cellSize;
                this.grid = new Map();
            }
            
            getCellKey(x, y) {
                return `${Math.floor(x / this.cellSize)},${Math.floor(y / this.cellSize)}`;
            }
            
            insert(obj) {
                const key = this.getCellKey(obj.x, obj.y);
                if (!this.grid.has(key)) {
                    this.grid.set(key, []);
                }
                this.grid.get(key).push(obj);
                obj._cellKey = key;
            }
            
            remove(obj) {
                if (obj._cellKey && this.grid.has(obj._cellKey)) {
                    const cell = this.grid.get(obj._cellKey);
                    const index = cell.indexOf(obj);
                    if (index > -1) {
                        cell.splice(index, 1);
                    }
                }
            }
            
            query(x, y, radius) {
                const results = [];
                const startX = Math.floor((x - radius) / this.cellSize);
                const startY = Math.floor((y - radius) / this.cellSize);
                const endX = Math.floor((x + radius) / this.cellSize);
                const endY = Math.floor((y + radius) / this.cellSize);
                
                for (let cx = startX; cx <= endX; cx++) {
                    for (let cy = startY; cy <= endY; cy++) {
                        const key = `${cx},${cy}`;
                        if (this.grid.has(key)) {
                            results.push(...this.grid.get(key));
                        }
                    }
                }
                
                return results;
            }
            
            clear() {
                this.grid.clear();
            }
        }

        // Ø§ÛŒØ¬Ø§Ø¯ Object Pools
        const Ø°Ø±Ø§Øª_Ù¾ÙˆÙ„ = new ObjectPool(
            () => ({ x: 0, y: 0, vx: 0, vy: 0, life: 0, maxLife: 0, size: 0, color: '' }),
            (Ø°Ø±Ù‡) => {
                Ø°Ø±Ù‡.life = Ø°Ø±Ù‡.maxLife;
            },
            200
        );

        const Ú¯Ù„ÙˆÙ„Ù‡_Ù¾ÙˆÙ„ = new ObjectPool(
            () => ({
                x: 0, y: 0, vx: 0, vy: 0,
                width: 0, height: 0,
                color: '', isPlayer: false,
                damage: 0, range: 0, distanceTraveled: 0
            }),
            (Ú¯Ù„ÙˆÙ„Ù‡) => {
                Ú¯Ù„ÙˆÙ„Ù‡.distanceTraveled = 0;
            },
            100
        );

        // Ø§ÛŒØ¬Ø§Ø¯ Spatial Grids
        const Ø¯Ø´Ù…Ù†Ø§Ù†_Ú¯Ø±ÛŒØ¯ = new SpatialGrid(500);
        const Ø³Ú©Ù‡â€ŒÙ‡Ø§_Ú¯Ø±ÛŒØ¯ = new SpatialGrid(500);
        const Ú¯Ù„ÙˆÙ„Ù‡â€ŒÙ‡Ø§_Ú¯Ø±ÛŒØ¯ = new SpatialGrid(300);

        // Ø§Ø´ÛŒØ§Ø¡ Ø¨Ø§Ø²ÛŒ
        let Ø¨Ø§Ø²ÛŒÚ©Ù† = {
            x: ØªÙ†Ø¸ÛŒÙ…Ø§Øª_Ø¨Ø§Ø²ÛŒ.Ø§Ù†Ø¯Ø§Ø²Ù‡_Ø¬Ù‡Ø§Ù† / 2,
            y: ØªÙ†Ø¸ÛŒÙ…Ø§Øª_Ø¨Ø§Ø²ÛŒ.Ø§Ù†Ø¯Ø§Ø²Ù‡_Ø¬Ù‡Ø§Ù† / 2,
            width: ØªÙ†Ø¸ÛŒÙ…Ø§Øª_Ø¨Ø§Ø²ÛŒ.Ø§Ù†Ø¯Ø§Ø²Ù‡_Ø¨Ø§Ø²ÛŒÚ©Ù†,
            height: ØªÙ†Ø¸ÛŒÙ…Ø§Øª_Ø¨Ø§Ø²ÛŒ.Ø§Ù†Ø¯Ø§Ø²Ù‡_Ø¨Ø§Ø²ÛŒÚ©Ù† * 0.8,
            speed: ØªÙ†Ø¸ÛŒÙ…Ø§Øª_Ø¨Ø§Ø²ÛŒ.Ø³Ø±Ø¹Øª_Ø¨Ø§Ø²ÛŒÚ©Ù†,
            color: '#00aaff',
            rotation: 0,
            lastHit: 0
        };

        let Ø¯Ø´Ù…Ù†Ø§Ù† = [];
        let Ú¯Ù„ÙˆÙ„Ù‡â€ŒÙ‡Ø§ = [];
        let Ø³Ú©Ù‡â€ŒÙ‡Ø§ = [];
        let Ø°Ø±Ø§Øª = [];
        let Ø³ØªØ§Ø±Ù‡â€ŒÙ‡Ø§ = [];

        // Ú©Ù†ØªØ±Ù„â€ŒÙ‡Ø§
        let Ú©Ù†ØªØ±Ù„â€ŒÙ‡Ø§ = {
            Ø­Ø±Ú©Øª_x: 0,
            Ø­Ø±Ú©Øª_y: 0,
            Ø¬ÙˆÛŒâ€ŒØ§Ø³ØªÛŒÚ©_ÙØ¹Ø§Ù„: false,
            Ø¬ÙˆÛŒâ€ŒØ§Ø³ØªÛŒÚ©_Ø´Ø±ÙˆØ¹_x: 0,
            Ø¬ÙˆÛŒâ€ŒØ§Ø³ØªÛŒÚ©_Ø´Ø±ÙˆØ¹_y: 0
        };

        // ØªØ§ÛŒÙ…Ø±Ù‡Ø§
        let Ø¨Ø§Ø²Ù‡_Ø´Ù„ÛŒÚ©_Ø®ÙˆØ¯Ú©Ø§Ø± = null;
        let Ø¨Ø§Ø²Ù‡_ØªÙˆÙ„ÛŒØ¯_Ø¯Ø´Ù…Ù† = null;
        let Ø¨Ø§Ø²Ù‡_Ø´Ù„ÛŒÚ©_Ø¯Ø´Ù…Ù†Ø§Ù† = null;

        // ============================================
        // ØªÙˆØ§Ø¨Ø¹ Ú©Ù…Ú©ÛŒ Ø¨Ù‡ÛŒÙ†Ù‡â€ŒØ³Ø§Ø²ÛŒ
        // ============================================

        // Ù…Ø­Ø§Ø³Ø¨Ù‡ ØªØ¹Ø¯Ø§Ø¯ Ø³Ú©Ù‡â€ŒÙ‡Ø§ÛŒ Ù…ÙˆØ±Ø¯ Ù†ÛŒØ§Ø² Ø¨Ø±Ø§ÛŒ Ù…Ø±Ø­Ù„Ù‡ ÙØ¹Ù„ÛŒ
        function Ù…Ø­Ø§Ø³Ø¨Ù‡_Ø³Ú©Ù‡â€ŒÙ‡Ø§ÛŒ_Ù…ÙˆØ±Ø¯_Ù†ÛŒØ§Ø²() {
            return ØªÙ†Ø¸ÛŒÙ…Ø§Øª_Ø¨Ø§Ø²ÛŒ.Ø³Ú©Ù‡_Ù…Ø±Ø­Ù„Ù‡_Ø§ÙˆÙ„ + 
                   (ÙˆØ¶Ø¹ÛŒØª_Ø¨Ø§Ø²ÛŒ.Ù…Ø±Ø­Ù„Ù‡ - 1) * ØªÙ†Ø¸ÛŒÙ…Ø§Øª_Ø¨Ø§Ø²ÛŒ.Ø§ÙØ²Ø§ÛŒØ´_Ø³Ú©Ù‡_Ù‡Ø±_Ù…Ø±Ø­Ù„Ù‡;
        }

        // Ù…Ø­Ø§Ø³Ø¨Ù‡ ØªØ¹Ø¯Ø§Ø¯ Ø¯Ø´Ù…Ù†Ø§Ù† Ø§ÙˆÙ„ÛŒÙ‡ Ø¨Ø±Ø§ÛŒ Ù…Ø±Ø­Ù„Ù‡ ÙØ¹Ù„ÛŒ
        function Ù…Ø­Ø§Ø³Ø¨Ù‡_Ø¯Ø´Ù…Ù†Ø§Ù†_Ø§ÙˆÙ„ÛŒÙ‡() {
            return ØªÙ†Ø¸ÛŒÙ…Ø§Øª_Ø¨Ø§Ø²ÛŒ.Ø¯Ø´Ù…Ù†Ø§Ù†_Ø§ÙˆÙ„ÛŒÙ‡ + 
                   (ÙˆØ¶Ø¹ÛŒØª_Ø¨Ø§Ø²ÛŒ.Ù…Ø±Ø­Ù„Ù‡ - 1) * ØªÙ†Ø¸ÛŒÙ…Ø§Øª_Ø¨Ø§Ø²ÛŒ.Ø§ÙØ²Ø§ÛŒØ´_Ø¯Ø´Ù…Ù†_Ù‡Ø±_Ù…Ø±Ø­Ù„Ù‡;
        }

        // Ù…Ø­Ø§Ø³Ø¨Ù‡ Ù†Ø±Ø® ØªÙˆÙ„ÛŒØ¯ Ø¯Ø´Ù…Ù† Ø¨Ø±Ø§ÛŒ Ù…Ø±Ø­Ù„Ù‡ ÙØ¹Ù„ÛŒ
        function Ù…Ø­Ø§Ø³Ø¨Ù‡_Ù†Ø±Ø®_ØªÙˆÙ„ÛŒØ¯_Ø¯Ø´Ù…Ù†() {
            return Math.max(500, ØªÙ†Ø¸ÛŒÙ…Ø§Øª_Ø¨Ø§Ø²ÛŒ.Ù†Ø±Ø®_ØªÙˆÙ„ÛŒØ¯_Ø¯Ø´Ù…Ù† - 
                   (ÙˆØ¶Ø¹ÛŒØª_Ø¨Ø§Ø²ÛŒ.Ù…Ø±Ø­Ù„Ù‡ - 1) * ØªÙ†Ø¸ÛŒÙ…Ø§Øª_Ø¨Ø§Ø²ÛŒ.Ú©Ø§Ù‡Ø´_ØªÙˆÙ„ÛŒØ¯_Ù‡Ø±_Ù…Ø±Ø­Ù„Ù‡);
        }

        // Ù…Ø­Ø§Ø³Ø¨Ù‡ Ø³Ù„Ø§Ù…Øª Ø¯Ø´Ù…Ù† Ø¨Ø±Ø§ÛŒ Ù…Ø±Ø­Ù„Ù‡ ÙØ¹Ù„ÛŒ
        function Ù…Ø­Ø§Ø³Ø¨Ù‡_Ø³Ù„Ø§Ù…Øª_Ø¯Ø´Ù…Ù†() {
            return 2 + Math.floor(ÙˆØ¶Ø¹ÛŒØª_Ø¨Ø§Ø²ÛŒ.Ù…Ø±Ø­Ù„Ù‡ * 0.8);
        }

        // ============================================
        // ØªÙˆØ§Ø¨Ø¹ Ø§ØµÙ„ÛŒ Ø¨Ø§Ø²ÛŒ
        // ============================================

        function ØªÙ†Ø¸ÛŒÙ…_Ú©Ø§Ù†ÙˆØ§Ø³() {
            const dpr = window.devicePixelRatio || 1;
            
            // ØªÙ†Ø¸ÛŒÙ… Ø§Ù†Ø¯Ø§Ø²Ù‡ Ø§ØµÙ„ÛŒ
            Ú©Ø§Ù†ÙˆØ§Ø³_Ø¨Ø§Ø²ÛŒ.width = window.innerWidth * dpr;
            Ú©Ø§Ù†ÙˆØ§Ø³_Ø¨Ø§Ø²ÛŒ.height = window.innerHeight * dpr;
            Ú©Ø§Ù†ÙˆØ§Ø³_Ø¨Ø§Ø²ÛŒ.style.width = window.innerWidth + 'px';
            Ú©Ø§Ù†ÙˆØ§Ø³_Ø¨Ø§Ø²ÛŒ.style.height = window.innerHeight + 'px';
            
            // ØªÙ†Ø¸ÛŒÙ… Ø¯ÙˆØ±Ø¨ÛŒÙ† Ø¢Ù†Ù„Ø§ÛŒÙ†
            Ø¯ÙˆØ±Ø¨ÛŒÙ†_Ø¢Ù†Ù„Ø§ÛŒÙ†_Ú©Ø§Ù†ÙˆØ§Ø³.width = Ø¯ÙˆØ±Ø¨ÛŒÙ†_Ø¢Ù†Ù„Ø§ÛŒÙ†_Ú©Ø§Ù†ÙˆØ§Ø³.clientWidth * dpr;
            Ø¯ÙˆØ±Ø¨ÛŒÙ†_Ø¢Ù†Ù„Ø§ÛŒÙ†_Ú©Ø§Ù†ÙˆØ§Ø³.height = Ø¯ÙˆØ±Ø¨ÛŒÙ†_Ø¢Ù†Ù„Ø§ÛŒÙ†_Ú©Ø§Ù†ÙˆØ§Ø³.clientHeight * dpr;
            Ø¯ÙˆØ±Ø¨ÛŒÙ†_Ø¢Ù†Ù„Ø§ÛŒÙ†_Ú©Ø§Ù†ÙˆØ§Ø³.style.width = Ø¯ÙˆØ±Ø¨ÛŒÙ†_Ø¢Ù†Ù„Ø§ÛŒÙ†_Ú©Ø§Ù†ÙˆØ§Ø³.clientWidth + 'px';
            Ø¯ÙˆØ±Ø¨ÛŒÙ†_Ø¢Ù†Ù„Ø§ÛŒÙ†_Ú©Ø§Ù†ÙˆØ§Ø³.style.height = Ø¯ÙˆØ±Ø¨ÛŒÙ†_Ø¢Ù†Ù„Ø§ÛŒÙ†_Ú©Ø§Ù†ÙˆØ§Ø³.clientHeight + 'px';
            
            // ØªÙ†Ø¸ÛŒÙ… scale Ø¨Ø±Ø§ÛŒ context
            Ù‚Ù„Ù….scale(dpr, dpr);
            Ù‚Ù„Ù…_Ø¯ÙˆØ±Ø¨ÛŒÙ†.scale(dpr, dpr);
        }

        function Ø§ÛŒØ¬Ø§Ø¯_Ø³ØªØ§Ø±Ù‡â€ŒÙ‡Ø§() {
            Ø³ØªØ§Ø±Ù‡â€ŒÙ‡Ø§ = [];
            for (let i = 0; i < ØªÙ†Ø¸ÛŒÙ…Ø§Øª_Ø¨Ø§Ø²ÛŒ.ØªØ¹Ø¯Ø§Ø¯_Ø³ØªØ§Ø±Ù‡; i++) {
                Ø³ØªØ§Ø±Ù‡â€ŒÙ‡Ø§.push({
                    x: Math.random() * ØªÙ†Ø¸ÛŒÙ…Ø§Øª_Ø¨Ø§Ø²ÛŒ.Ø§Ù†Ø¯Ø§Ø²Ù‡_Ø¬Ù‡Ø§Ù†,
                    y: Math.random() * ØªÙ†Ø¸ÛŒÙ…Ø§Øª_Ø¨Ø§Ø²ÛŒ.Ø§Ù†Ø¯Ø§Ø²Ù‡_Ø¬Ù‡Ø§Ù†,
                    size: Math.random() * 2 + 1,
                    brightness: Math.random() * 0.7 + 0.3,
                    speed: Math.random() * 0.5 + 0.1
                });
            }
        }

        function Ø§ÛŒØ¬Ø§Ø¯_Ø³Ú©Ù‡â€ŒÙ‡Ø§() {
            Ø³Ú©Ù‡â€ŒÙ‡Ø§ = [];
            Ø³Ú©Ù‡â€ŒÙ‡Ø§_Ú¯Ø±ÛŒØ¯.clear();
            
            const ØªØ¹Ø¯Ø§Ø¯_Ø³Ú©Ù‡ = Ù…Ø­Ø§Ø³Ø¨Ù‡_Ø³Ú©Ù‡â€ŒÙ‡Ø§ÛŒ_Ù…ÙˆØ±Ø¯_Ù†ÛŒØ§Ø²();
            
            for (let i = 0; i < ØªØ¹Ø¯Ø§Ø¯_Ø³Ú©Ù‡; i++) {
                const Ø³Ú©Ù‡ = {
                    x: Math.random() * ØªÙ†Ø¸ÛŒÙ…Ø§Øª_Ø¨Ø§Ø²ÛŒ.Ø§Ù†Ø¯Ø§Ø²Ù‡_Ø¬Ù‡Ø§Ù†,
                    y: Math.random() * ØªÙ†Ø¸ÛŒÙ…Ø§Øª_Ø¨Ø§Ø²ÛŒ.Ø§Ù†Ø¯Ø§Ø²Ù‡_Ø¬Ù‡Ø§Ù†,
                    size: ØªÙ†Ø¸ÛŒÙ…Ø§Øª_Ø¨Ø§Ø²ÛŒ.Ø§Ù†Ø¯Ø§Ø²Ù‡_Ø³Ú©Ù‡,
                    value: 100 * ÙˆØ¶Ø¹ÛŒØª_Ø¨Ø§Ø²ÛŒ.Ù…Ø±Ø­Ù„Ù‡,
                    hits: 0,
                    hitsRequired: 3 + Math.floor(ÙˆØ¶Ø¹ÛŒØª_Ø¨Ø§Ø²ÛŒ.Ù…Ø±Ø­Ù„Ù‡ / 3),
                    type: Math.floor(Math.random() * 4),
                    rotation: 0,
                    collected: false,
                    id: i
                };
                
                Ø³Ú©Ù‡â€ŒÙ‡Ø§.push(Ø³Ú©Ù‡);
                Ø³Ú©Ù‡â€ŒÙ‡Ø§_Ú¯Ø±ÛŒØ¯.insert(Ø³Ú©Ù‡);
            }
            
            console.log(`Ø³Ú©Ù‡â€ŒÙ‡Ø§ÛŒ Ù…Ø±Ø­Ù„Ù‡ ${ÙˆØ¶Ø¹ÛŒØª_Ø¨Ø§Ø²ÛŒ.Ù…Ø±Ø­Ù„Ù‡}: ${ØªØ¹Ø¯Ø§Ø¯_Ø³Ú©Ù‡} Ø³Ú©Ù‡`);
        }

        function Ø§ÛŒØ¬Ø§Ø¯_Ø¯Ø´Ù…Ù†() {
            const x = Math.random() * ØªÙ†Ø¸ÛŒÙ…Ø§Øª_Ø¨Ø§Ø²ÛŒ.Ø§Ù†Ø¯Ø§Ø²Ù‡_Ø¬Ù‡Ø§Ù†;
            const y = Math.random() * ØªÙ†Ø¸ÛŒÙ…Ø§Øª_Ø¨Ø§Ø²ÛŒ.Ø§Ù†Ø¯Ø§Ø²Ù‡_Ø¬Ù‡Ø§Ù†;
            
            const Ø³Ù„Ø§Ù…Øª = Ù…Ø­Ø§Ø³Ø¨Ù‡_Ø³Ù„Ø§Ù…Øª_Ø¯Ø´Ù…Ù†();
            const Ø§Ù†ÙˆØ§Ø¹_Ø¯Ø´Ù…Ù† = [
                { health: Ø³Ù„Ø§Ù…Øª, speed: 2.0, color: '#ff3333', size: ØªÙ†Ø¸ÛŒÙ…Ø§Øª_Ø¨Ø§Ø²ÛŒ.Ø§Ù†Ø¯Ø§Ø²Ù‡_Ø¯Ø´Ù…Ù†, emoji: 'ğŸŒ‹' },
                { health: Ø³Ù„Ø§Ù…Øª + 2, speed: 1.5, color: '#ff6600', size: ØªÙ†Ø¸ÛŒÙ…Ø§Øª_Ø¨Ø§Ø²ÛŒ.Ø§Ù†Ø¯Ø§Ø²Ù‡_Ø¯Ø´Ù…Ù† * 1.2, emoji: 'ğŸ”¥' },
                { health: Ø³Ù„Ø§Ù…Øª + 4, speed: 1.2, color: '#cc0000', size: ØªÙ†Ø¸ÛŒÙ…Ø§Øª_Ø¨Ø§Ø²ÛŒ.Ø§Ù†Ø¯Ø§Ø²Ù‡_Ø¯Ø´Ù…Ù† * 1.4, emoji: 'ğŸ‘¾' },
                { health: Ø³Ù„Ø§Ù…Øª + 6, speed: 1.0, color: '#990000', size: ØªÙ†Ø¸ÛŒÙ…Ø§Øª_Ø¨Ø§Ø²ÛŒ.Ø§Ù†Ø¯Ø§Ø²Ù‡_Ø¯Ø´Ù…Ù† * 1.6, emoji: 'ğŸ’€' }
            ];
            
            const Ù†ÙˆØ¹_Ø§ÛŒÙ†Ø¯Ú©Ø³ = Math.min(ÙˆØ¶Ø¹ÛŒØª_Ø¨Ø§Ø²ÛŒ.Ù…Ø±Ø­Ù„Ù‡ - 1, 3);
            const Ù†ÙˆØ¹ = Ø§Ù†ÙˆØ§Ø¹_Ø¯Ø´Ù…Ù†[Ù†ÙˆØ¹_Ø§ÛŒÙ†Ø¯Ú©Ø³];
            
            const Ø¯Ø´Ù…Ù† = {
                x: x,
                y: y,
                width: Ù†ÙˆØ¹.size,
                height: Ù†ÙˆØ¹.size,
                speed: Ù†ÙˆØ¹.speed,
                health: Ù†ÙˆØ¹.health,
                maxHealth: Ù†ÙˆØ¹.health,
                color: Ù†ÙˆØ¹.color,
                emoji: Ù†ÙˆØ¹.emoji,
                lastShot: Date.now(),
                shootDelay: 1800 - (ÙˆØ¶Ø¹ÛŒØª_Ø¨Ø§Ø²ÛŒ.Ù…Ø±Ø­Ù„Ù‡ * 100),
                rotation: Math.random() * Math.PI * 2,
                rotationSpeed: (Math.random() - 0.5) * 0.03,
                id: Ø¯Ø´Ù…Ù†Ø§Ù†.length
            };
            
            Ø¯Ø´Ù…Ù†Ø§Ù†.push(Ø¯Ø´Ù…Ù†);
            Ø¯Ø´Ù…Ù†Ø§Ù†_Ú¯Ø±ÛŒØ¯.insert(Ø¯Ø´Ù…Ù†);
            
            return Ø¯Ø´Ù…Ù†;
        }

        function Ø§ÛŒØ¬Ø§Ø¯_Ø¢ÛŒØªÙ…_Ø³Ù„Ø§Ù…Øª() {
            const Ø¢ÛŒØªÙ… = {
                x: Math.random() * (ØªÙ†Ø¸ÛŒÙ…Ø§Øª_Ø¨Ø§Ø²ÛŒ.Ø§Ù†Ø¯Ø§Ø²Ù‡_Ø¬Ù‡Ø§Ù† - 200) + 100,
                y: Math.random() * (ØªÙ†Ø¸ÛŒÙ…Ø§Øª_Ø¨Ø§Ø²ÛŒ.Ø§Ù†Ø¯Ø§Ø²Ù‡_Ø¬Ù‡Ø§Ù† - 200) + 100,
                size: 45,
                spawnTime: Date.now(),
                collected: false,
                pulsate: 0
            };
            
            ÙˆØ¶Ø¹ÛŒØª_Ø¨Ø§Ø²ÛŒ.Ø¢ÛŒØªÙ…â€ŒÙ‡Ø§ÛŒ_Ø³Ù„Ø§Ù…Øª.push(Ø¢ÛŒØªÙ…);
            return Ø¢ÛŒØªÙ…;
        }

        function Ø§ÛŒØ¬Ø§Ø¯_Ú¯Ù„ÙˆÙ„Ù‡(x, y, targetX, targetY, isPlayer = true) {
            const dx = targetX - x;
            const dy = targetY - y;
            const distance = Math.sqrt(dx * dx + dy * dy);
            
            if (distance === 0) return null;
            
            const speed = isPlayer ? ØªÙ†Ø¸ÛŒÙ…Ø§Øª_Ø¨Ø§Ø²ÛŒ.Ø³Ø±Ø¹Øª_Ú¯Ù„ÙˆÙ„Ù‡ : 6 + ÙˆØ¶Ø¹ÛŒØª_Ø¨Ø§Ø²ÛŒ.Ù…Ø±Ø­Ù„Ù‡ * 0.5;
            const damage = isPlayer ? (1.5 + ÙˆØ¶Ø¹ÛŒØª_Ø¨Ø§Ø²ÛŒ.Ù…Ø±Ø­Ù„Ù‡ * 0.4) : 0.8;
            
            const Ú¯Ù„ÙˆÙ„Ù‡ = Ú¯Ù„ÙˆÙ„Ù‡_Ù¾ÙˆÙ„.acquire();
            Object.assign(Ú¯Ù„ÙˆÙ„Ù‡, {
                x: x,
                y: y,
                vx: (dx / distance) * speed,
                vy: (dy / distance) * speed,
                width: isPlayer ? 14 : 8,
                height: isPlayer ? 14 : 8,
                color: isPlayer ? '#00ffff' : '#ff3300',
                isPlayer: isPlayer,
                damage: damage,
                range: ØªÙ†Ø¸ÛŒÙ…Ø§Øª_Ø¨Ø§Ø²ÛŒ.Ø¨Ø±Ø¯_Ú¯Ù„ÙˆÙ„Ù‡,
                distanceTraveled: 0
            });
            
            Ú¯Ù„ÙˆÙ„Ù‡â€ŒÙ‡Ø§.push(Ú¯Ù„ÙˆÙ„Ù‡);
            Ú¯Ù„ÙˆÙ„Ù‡â€ŒÙ‡Ø§_Ú¯Ø±ÛŒØ¯.insert(Ú¯Ù„ÙˆÙ„Ù‡);
            
            if (isPlayer) {
                Ø§ÛŒØ¬Ø§Ø¯_Ø°Ø±Ø§Øª(x, y, 3, '#00aaff', 0.8);
            }
            
            return Ú¯Ù„ÙˆÙ„Ù‡;
        }

        function Ø§ÛŒØ¬Ø§Ø¯_Ø°Ø±Ø§Øª(x, y, count, color, sizeMultiplier = 1) {
            if (Ø°Ø±Ø§Øª.length > ØªÙ†Ø¸ÛŒÙ…Ø§Øª_Ø¨Ø§Ø²ÛŒ.ØªØ¹Ø¯Ø§Ø¯_Ø°Ø±Ø§Øª_Ø­Ø¯Ø§Ú©Ø«Ø±) return;
            
            for (let i = 0; i < count; i++) {
                const Ø°Ø±Ù‡ = Ø°Ø±Ø§Øª_Ù¾ÙˆÙ„.acquire();
                Object.assign(Ø°Ø±Ù‡, {
                    x: x + (Math.random() - 0.5) * 20,
                    y: y + (Math.random() - 0.5) * 20,
                    vx: (Math.random() - 0.5) * 10,
                    vy: (Math.random() - 0.5) * 10,
                    life: 1,
                    maxLife: 1.2,
                    size: Math.random() * 4 + 3 * sizeMultiplier,
                    color: color
                });
                Ø°Ø±Ø§Øª.push(Ø°Ø±Ù‡);
            }
        }

        function Ø§ÛŒØ¬Ø§Ø¯_Ø§Ù†ÙØ¬Ø§Ø±_Ø³Ú©Ù‡(x, y) {
            for (let i = 0; i < 25; i++) {
                const Ø°Ø±Ù‡ = Ø°Ø±Ø§Øª_Ù¾ÙˆÙ„.acquire();
                Object.assign(Ø°Ø±Ù‡, {
                    x: x + (Math.random() - 0.5) * 50,
                    y: y + (Math.random() - 0.5) * 50,
                    vx: (Math.random() - 0.5) * 12,
                    vy: (Math.random() - 0.5) * 12,
                    life: 1,
                    maxLife: 1.8,
                    size: Math.random() * 6 + 4,
                    color: '#ffd700'
                });
                Ø°Ø±Ø§Øª.push(Ø°Ø±Ù‡);
            }
            
            // Ø°Ø±Ø§Øª ÙˆÛŒÚ˜Ù‡
            for (let i = 0; i < 8; i++) {
                const Ø°Ø±Ù‡ = Ø°Ø±Ø§Øª_Ù¾ÙˆÙ„.acquire();
                Object.assign(Ø°Ø±Ù‡, {
                    x: x,
                    y: y,
                    vx: (Math.random() - 0.5) * 6,
                    vy: (Math.random() - 0.5) * 6,
                    life: 1,
                    maxLife: 2.5,
                    size: Math.random() * 10 + 8,
                    color: '#ffff00'
                });
                Ø°Ø±Ø§Øª.push(Ø°Ø±Ù‡);
            }
        }

        function Ø´Ù„ÛŒÚ©_Ø®ÙˆØ¯Ú©Ø§Ø±() {
            if (!ÙˆØ¶Ø¹ÛŒØª_Ø¨Ø§Ø²ÛŒ.Ø¨Ø§Ø²ÛŒ_Ø¯Ø±_Ø­Ø§Ù„_Ø§Ø¬Ø±Ø§) return;
            
            let Ù†Ø²Ø¯ÛŒÚ©â€ŒØªØ±ÛŒÙ†_Ù‡Ø¯Ù = null;
            let Ù†Ø²Ø¯ÛŒÚ©â€ŒØªØ±ÛŒÙ†_ÙØ§ØµÙ„Ù‡ = 1200;
            
            // Ø§ÙˆÙ„ÙˆÛŒØª Ø¨Ø§ Ø³Ú©Ù‡â€ŒÙ‡Ø§
            const Ø³Ú©Ù‡â€ŒÙ‡Ø§ÛŒ_Ù†Ø²Ø¯ÛŒÚ© = Ø³Ú©Ù‡â€ŒÙ‡Ø§_Ú¯Ø±ÛŒØ¯.query(Ø¨Ø§Ø²ÛŒÚ©Ù†.x, Ø¨Ø§Ø²ÛŒÚ©Ù†.y, 1000);
            for (const Ø³Ú©Ù‡ of Ø³Ú©Ù‡â€ŒÙ‡Ø§ÛŒ_Ù†Ø²Ø¯ÛŒÚ©) {
                if (Ø³Ú©Ù‡.collected) continue;
                
                const dx = Ø³Ú©Ù‡.x - Ø¨Ø§Ø²ÛŒÚ©Ù†.x;
                const dy = Ø³Ú©Ù‡.y - Ø¨Ø§Ø²ÛŒÚ©Ù†.y;
                const distance = Math.sqrt(dx * dx + dy * dy);
                
                if (distance < Ù†Ø²Ø¯ÛŒÚ©â€ŒØªØ±ÛŒÙ†_ÙØ§ØµÙ„Ù‡) {
                    Ù†Ø²Ø¯ÛŒÚ©â€ŒØªØ±ÛŒÙ†_ÙØ§ØµÙ„Ù‡ = distance;
                    Ù†Ø²Ø¯ÛŒÚ©â€ŒØªØ±ÛŒÙ†_Ù‡Ø¯Ù = Ø³Ú©Ù‡;
                }
            }
            
            // Ø§Ú¯Ø± Ø³Ú©Ù‡ Ù†Ø²Ø¯ÛŒÚ© Ù†Ø¨ÙˆØ¯ØŒ Ø¨Ù‡ Ø¯Ø´Ù…Ù†Ø§Ù† Ø´Ù„ÛŒÚ© Ú©Ù†
            if (!Ù†Ø²Ø¯ÛŒÚ©â€ŒØªØ±ÛŒÙ†_Ù‡Ø¯Ù) {
                const Ø¯Ø´Ù…Ù†Ø§Ù†_Ù†Ø²Ø¯ÛŒÚ© = Ø¯Ø´Ù…Ù†Ø§Ù†_Ú¯Ø±ÛŒØ¯.query(Ø¨Ø§Ø²ÛŒÚ©Ù†.x, Ø¨Ø§Ø²ÛŒÚ©Ù†.y, 1500);
                for (const Ø¯Ø´Ù…Ù† of Ø¯Ø´Ù…Ù†Ø§Ù†_Ù†Ø²Ø¯ÛŒÚ©) {
                    const dx = Ø¯Ø´Ù…Ù†.x - Ø¨Ø§Ø²ÛŒÚ©Ù†.x;
                    const dy = Ø¯Ø´Ù…Ù†.y - Ø¨Ø§Ø²ÛŒÚ©Ù†.y;
                    const distance = Math.sqrt(dx * dx + dy * dy);
                    
                    if (distance < Ù†Ø²Ø¯ÛŒÚ©â€ŒØªØ±ÛŒÙ†_ÙØ§ØµÙ„Ù‡) {
                        Ù†Ø²Ø¯ÛŒÚ©â€ŒØªØ±ÛŒÙ†_ÙØ§ØµÙ„Ù‡ = distance;
                        Ù†Ø²Ø¯ÛŒÚ©â€ŒØªØ±ÛŒÙ†_Ù‡Ø¯Ù = Ø¯Ø´Ù…Ù†;
                    }
                }
            }
            
            if (Ù†Ø²Ø¯ÛŒÚ©â€ŒØªØ±ÛŒÙ†_Ù‡Ø¯Ù) {
                for (let i = 0; i < ØªÙ†Ø¸ÛŒÙ…Ø§Øª_Ø¨Ø§Ø²ÛŒ.ØªØ¹Ø¯Ø§Ø¯_Ú¯Ù„ÙˆÙ„Ù‡; i++) {
                    setTimeout(() => {
                        if (ÙˆØ¶Ø¹ÛŒØª_Ø¨Ø§Ø²ÛŒ.Ø¨Ø§Ø²ÛŒ_Ø¯Ø±_Ø­Ø§Ù„_Ø§Ø¬Ø±Ø§) {
                            const scatter = 30 + ÙˆØ¶Ø¹ÛŒØª_Ø¨Ø§Ø²ÛŒ.Ù…Ø±Ø­Ù„Ù‡ * 5;
                            const targetX = Ù†Ø²Ø¯ÛŒÚ©â€ŒØªØ±ÛŒÙ†_Ù‡Ø¯Ù.x + (Math.random() - 0.5) * scatter;
                            const targetY = Ù†Ø²Ø¯ÛŒÚ©â€ŒØªØ±ÛŒÙ†_Ù‡Ø¯Ù.y + (Math.random() - 0.5) * scatter;
                            Ø§ÛŒØ¬Ø§Ø¯_Ú¯Ù„ÙˆÙ„Ù‡(Ø¨Ø§Ø²ÛŒÚ©Ù†.x, Ø¨Ø§Ø²ÛŒÚ©Ù†.y, targetX, targetY, true);
                        }
                    }, i * 60);
                }
            }
        }

        function Ø´Ù„ÛŒÚ©_Ø¯Ø´Ù…Ù†Ø§Ù†() {
            if (!ÙˆØ¶Ø¹ÛŒØª_Ø¨Ø§Ø²ÛŒ.Ø¨Ø§Ø²ÛŒ_Ø¯Ø±_Ø­Ø§Ù„_Ø§Ø¬Ø±Ø§) return;
            
            const now = Date.now();
            const Ø¯Ø´Ù…Ù†Ø§Ù†_Ù†Ø²Ø¯ÛŒÚ© = Ø¯Ø´Ù…Ù†Ø§Ù†_Ú¯Ø±ÛŒØ¯.query(Ø¨Ø§Ø²ÛŒÚ©Ù†.x, Ø¨Ø§Ø²ÛŒÚ©Ù†.y, 2000);
            
            for (const Ø¯Ø´Ù…Ù† of Ø¯Ø´Ù…Ù†Ø§Ù†_Ù†Ø²Ø¯ÛŒÚ©) {
                if (now - Ø¯Ø´Ù…Ù†.lastShot > Ø¯Ø´Ù…Ù†.shootDelay) {
                    const dx = Ø¨Ø§Ø²ÛŒÚ©Ù†.x - Ø¯Ø´Ù…Ù†.x;
                    const dy = Ø¨Ø§Ø²ÛŒÚ©Ù†.y - Ø¯Ø´Ù…Ù†.y;
                    const distance = Math.sqrt(dx * dx + dy * dy);
                    
                    if (distance < 1500) {
                        Ø§ÛŒØ¬Ø§Ø¯_Ú¯Ù„ÙˆÙ„Ù‡(Ø¯Ø´Ù…Ù†.x, Ø¯Ø´Ù…Ù†.y, Ø¨Ø§Ø²ÛŒÚ©Ù†.x, Ø¨Ø§Ø²ÛŒÚ©Ù†.y, false);
                        Ø¯Ø´Ù…Ù†.lastShot = now;
                        Ø§ÛŒØ¬Ø§Ø¯_Ø°Ø±Ø§Øª(Ø¯Ø´Ù…Ù†.x, Ø¯Ø´Ù…Ù†.y, 4, '#ff3300', 0.7);
                    }
                }
            }
        }

        function Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ_Ø±Ø§Ø¨Ø·() {
            Ù…Ù‚Ø¯Ø§Ø±_Ø§Ù…ØªÛŒØ§Ø².textContent = ÙˆØ¶Ø¹ÛŒØª_Ø¨Ø§Ø²ÛŒ.Ø§Ù…ØªÛŒØ§Ø².toLocaleString();
            Ù…Ù‚Ø¯Ø§Ø±_Ù…Ø±Ø­Ù„Ù‡.textContent = ÙˆØ¶Ø¹ÛŒØª_Ø¨Ø§Ø²ÛŒ.Ù…Ø±Ø­Ù„Ù‡;
            Ù…Ù‚Ø¯Ø§Ø±_Ø³Ù„Ø§Ù…Øª.textContent = Math.max(0, Math.floor(ÙˆØ¶Ø¹ÛŒØª_Ø¨Ø§Ø²ÛŒ.Ø³Ù„Ø§Ù…Øª));
            
            // Ø±Ù†Ú¯ Ø³Ù„Ø§Ù…Øª Ø¨Ø± Ø§Ø³Ø§Ø³ Ù…Ù‚Ø¯Ø§Ø±
            if (ÙˆØ¶Ø¹ÛŒØª_Ø¨Ø§Ø²ÛŒ.Ø³Ù„Ø§Ù…Øª > 70) {
                Ù…Ù‚Ø¯Ø§Ø±_Ø³Ù„Ø§Ù…Øª.style.color = '#00ffaa';
            } else if (ÙˆØ¶Ø¹ÛŒØª_Ø¨Ø§Ø²ÛŒ.Ø³Ù„Ø§Ù…Øª > 30) {
                Ù…Ù‚Ø¯Ø§Ø±_Ø³Ù„Ø§Ù…Øª.style.color = '#ffaa00';
            } else {
                Ù…Ù‚Ø¯Ø§Ø±_Ø³Ù„Ø§Ù…Øª.style.color = '#ff3300';
            }
        }

        function ØªØ´Ø®ÛŒØµ_Ø¨Ø±Ø®ÙˆØ±Ø¯() {
            const now = Date.now();
            
            // Ø¨Ø±Ø®ÙˆØ±Ø¯ Ú¯Ù„ÙˆÙ„Ù‡â€ŒÙ‡Ø§ÛŒ Ø¨Ø§Ø²ÛŒÚ©Ù† Ø¨Ø§ Ø¯Ø´Ù…Ù†Ø§Ù†
            const Ú¯Ù„ÙˆÙ„Ù‡â€ŒÙ‡Ø§ÛŒ_Ø¨Ø§Ø²ÛŒÚ©Ù† = Ú¯Ù„ÙˆÙ„Ù‡â€ŒÙ‡Ø§.filter(g => g.isPlayer);
            for (const Ú¯Ù„ÙˆÙ„Ù‡ of Ú¯Ù„ÙˆÙ„Ù‡â€ŒÙ‡Ø§ÛŒ_Ø¨Ø§Ø²ÛŒÚ©Ù†) {
                const Ø¯Ø´Ù…Ù†Ø§Ù†_Ù†Ø²Ø¯ÛŒÚ© = Ø¯Ø´Ù…Ù†Ø§Ù†_Ú¯Ø±ÛŒØ¯.query(Ú¯Ù„ÙˆÙ„Ù‡.x, Ú¯Ù„ÙˆÙ„Ù‡.y, 100);
                
                for (const Ø¯Ø´Ù…Ù† of Ø¯Ø´Ù…Ù†Ø§Ù†_Ù†Ø²Ø¯ÛŒÚ©) {
                    const dx = Ú¯Ù„ÙˆÙ„Ù‡.x - Ø¯Ø´Ù…Ù†.x;
                    const dy = Ú¯Ù„ÙˆÙ„Ù‡.y - Ø¯Ø´Ù…Ù†.y;
                    const distance = Math.sqrt(dx * dx + dy * dy);
                    const collisionDistance = (Ú¯Ù„ÙˆÙ„Ù‡.width + Ø¯Ø´Ù…Ù†.width) / 2;
                    
                    if (distance < collisionDistance) {
                        Ø¯Ø´Ù…Ù†.health -= Ú¯Ù„ÙˆÙ„Ù‡.damage;
                        Ø§ÛŒØ¬Ø§Ø¯_Ø°Ø±Ø§Øª(Ø¯Ø´Ù…Ù†.x, Ø¯Ø´Ù…Ù†.y, 6, '#ff6600', 0.9);
                        
                        // Ø¢Ø²Ø§Ø¯ Ú©Ø±Ø¯Ù† Ú¯Ù„ÙˆÙ„Ù‡
                        Ú¯Ù„ÙˆÙ„Ù‡â€ŒÙ‡Ø§_Ú¯Ø±ÛŒØ¯.remove(Ú¯Ù„ÙˆÙ„Ù‡);
                        const index = Ú¯Ù„ÙˆÙ„Ù‡â€ŒÙ‡Ø§.indexOf(Ú¯Ù„ÙˆÙ„Ù‡);
                        if (index > -1) {
                            Ú¯Ù„ÙˆÙ„Ù‡â€ŒÙ‡Ø§.splice(index, 1);
                            Ú¯Ù„ÙˆÙ„Ù‡_Ù¾ÙˆÙ„.release(Ú¯Ù„ÙˆÙ„Ù‡);
                        }
                        
                        if (Ø¯Ø´Ù…Ù†.health <= 0) {
                            Ø§ÛŒØ¬Ø§Ø¯_Ø°Ø±Ø§Øª(Ø¯Ø´Ù…Ù†.x, Ø¯Ø´Ù…Ù†.y, 12, '#ff3300', 1.2);
                            Ø¯Ø´Ù…Ù†Ø§Ù†_Ú¯Ø±ÛŒØ¯.remove(Ø¯Ø´Ù…Ù†);
                            const enemyIndex = Ø¯Ø´Ù…Ù†Ø§Ù†.indexOf(Ø¯Ø´Ù…Ù†);
                            if (enemyIndex > -1) {
                                Ø¯Ø´Ù…Ù†Ø§Ù†.splice(enemyIndex, 1);
                            }
                            
                            ÙˆØ¶Ø¹ÛŒØª_Ø¨Ø§Ø²ÛŒ.Ø§Ù…ØªÛŒØ§Ø² += 150 * ÙˆØ¶Ø¹ÛŒØª_Ø¨Ø§Ø²ÛŒ.Ù…Ø±Ø­Ù„Ù‡;
                            ÙˆØ¶Ø¹ÛŒØª_Ø¨Ø§Ø²ÛŒ.Ø¯Ø´Ù…Ù†Ø§Ù†_Ù†Ø§Ø¨ÙˆØ¯_Ø´Ø¯Ù‡++;
                            ÙˆØ¶Ø¹ÛŒØª_Ø¨Ø§Ø²ÛŒ.Ù…Ø¬Ù…ÙˆØ¹_Ú©Ø´ØªÙ‡â€ŒÙ‡Ø§++;
                            localStorage.setItem('Ù…Ø¬Ù…ÙˆØ¹_Ú©Ø´ØªÙ‡â€ŒÙ‡Ø§', ÙˆØ¶Ø¹ÛŒØª_Ø¨Ø§Ø²ÛŒ.Ù…Ø¬Ù…ÙˆØ¹_Ú©Ø´ØªÙ‡â€ŒÙ‡Ø§);
                        }
                        
                        break;
                    }
                }
            }
            
            // Ø¨Ø±Ø®ÙˆØ±Ø¯ Ú¯Ù„ÙˆÙ„Ù‡â€ŒÙ‡Ø§ÛŒ Ø¨Ø§Ø²ÛŒÚ©Ù† Ø¨Ø§ Ø³Ú©Ù‡â€ŒÙ‡Ø§
            for (const Ú¯Ù„ÙˆÙ„Ù‡ of Ú¯Ù„ÙˆÙ„Ù‡â€ŒÙ‡Ø§ÛŒ_Ø¨Ø§Ø²ÛŒÚ©Ù†) {
                const Ø³Ú©Ù‡â€ŒÙ‡Ø§ÛŒ_Ù†Ø²Ø¯ÛŒÚ© = Ø³Ú©Ù‡â€ŒÙ‡Ø§_Ú¯Ø±ÛŒØ¯.query(Ú¯Ù„ÙˆÙ„Ù‡.x, Ú¯Ù„ÙˆÙ„Ù‡.y, 100);
                
                for (const Ø³Ú©Ù‡ of Ø³Ú©Ù‡â€ŒÙ‡Ø§ÛŒ_Ù†Ø²Ø¯ÛŒÚ©) {
                    if (Ø³Ú©Ù‡.collected) continue;
                    
                    const dx = Ú¯Ù„ÙˆÙ„Ù‡.x - Ø³Ú©Ù‡.x;
                    const dy = Ú¯Ù„ÙˆÙ„Ù‡.y - Ø³Ú©Ù‡.y;
                    const distance = Math.sqrt(dx * dx + dy * dy);
                    const collisionDistance = (Ú¯Ù„ÙˆÙ„Ù‡.width + Ø³Ú©Ù‡.size) / 2;
                    
                    if (distance < collisionDistance) {
                        Ø³Ú©Ù‡.hits += 1;
                        Ø§ÛŒØ¬Ø§Ø¯_Ø°Ø±Ø§Øª(Ø³Ú©Ù‡.x, Ø³Ú©Ù‡.y, 4, '#ffd700', 0.8);
                        
                        // Ø¢Ø²Ø§Ø¯ Ú©Ø±Ø¯Ù† Ú¯Ù„ÙˆÙ„Ù‡
                        Ú¯Ù„ÙˆÙ„Ù‡â€ŒÙ‡Ø§_Ú¯Ø±ÛŒØ¯.remove(Ú¯Ù„ÙˆÙ„Ù‡);
                        const index = Ú¯Ù„ÙˆÙ„Ù‡â€ŒÙ‡Ø§.indexOf(Ú¯Ù„ÙˆÙ„Ù‡);
                        if (index > -1) {
                            Ú¯Ù„ÙˆÙ„Ù‡â€ŒÙ‡Ø§.splice(index, 1);
                            Ú¯Ù„ÙˆÙ„Ù‡_Ù¾ÙˆÙ„.release(Ú¯Ù„ÙˆÙ„Ù‡);
                        }
                        
                        if (Ø³Ú©Ù‡.hits >= Ø³Ú©Ù‡.hitsRequired) {
                            Ø³Ú©Ù‡.collected = true;
                            Ø³Ú©Ù‡â€ŒÙ‡Ø§_Ú¯Ø±ÛŒØ¯.remove(Ø³Ú©Ù‡);
                            const coinIndex = Ø³Ú©Ù‡â€ŒÙ‡Ø§.indexOf(Ø³Ú©Ù‡);
                            if (coinIndex > -1) {
                                Ø³Ú©Ù‡â€ŒÙ‡Ø§.splice(coinIndex, 1);
                            }
                            
                            ÙˆØ¶Ø¹ÛŒØª_Ø¨Ø§Ø²ÛŒ.Ø³Ú©Ù‡â€ŒÙ‡Ø§ÛŒ_Ø¬Ù…Ø¹â€ŒØ¢ÙˆØ±ÛŒ_Ø´Ø¯Ù‡++;
                            ÙˆØ¶Ø¹ÛŒØª_Ø¨Ø§Ø²ÛŒ.Ù…Ø¬Ù…ÙˆØ¹_Ø³Ú©Ù‡â€ŒÙ‡Ø§++;
                            ÙˆØ¶Ø¹ÛŒØª_Ø¨Ø§Ø²ÛŒ.Ø§Ù…ØªÛŒØ§Ø² += Ø³Ú©Ù‡.value;
                            
                            // Ø°Ø®ÛŒØ±Ù‡ Ø¯Ø± localStorage
                            localStorage.setItem('Ù…Ø¬Ù…ÙˆØ¹_Ø³Ú©Ù‡â€ŒÙ‡Ø§', ÙˆØ¶Ø¹ÛŒØª_Ø¨Ø§Ø²ÛŒ.Ù…Ø¬Ù…ÙˆØ¹_Ø³Ú©Ù‡â€ŒÙ‡Ø§);
                            
                            Ø§ÛŒØ¬Ø§Ø¯_Ø§Ù†ÙØ¬Ø§Ø±_Ø³Ú©Ù‡(Ø³Ú©Ù‡.x, Ø³Ú©Ù‡.y);
                            
                            // ØµØ¯Ø§ (Ø¯Ø± ØµÙˆØ±Øª ÙˆØ¬ÙˆØ¯)
                            if (typeof ØµØ¯Ø§ÛŒ_Ø³Ú©Ù‡ !== 'undefined') {
                                ØµØ¯Ø§ÛŒ_Ø³Ú©Ù‡.play();
                            }
                            
                            // Ø¨Ø±Ø±Ø³ÛŒ Ø§ØªÙ…Ø§Ù… Ù…Ø±Ø­Ù„Ù‡
                            const Ø³Ú©Ù‡â€ŒÙ‡Ø§ÛŒ_Ù…ÙˆØ±Ø¯_Ù†ÛŒØ§Ø² = Ù…Ø­Ø§Ø³Ø¨Ù‡_Ø³Ú©Ù‡â€ŒÙ‡Ø§ÛŒ_Ù…ÙˆØ±Ø¯_Ù†ÛŒØ§Ø²();
                            if (ÙˆØ¶Ø¹ÛŒØª_Ø¨Ø§Ø²ÛŒ.Ø³Ú©Ù‡â€ŒÙ‡Ø§ÛŒ_Ø¬Ù…Ø¹â€ŒØ¢ÙˆØ±ÛŒ_Ø´Ø¯Ù‡ >= Ø³Ú©Ù‡â€ŒÙ‡Ø§ÛŒ_Ù…ÙˆØ±Ø¯_Ù†ÛŒØ§Ø²) {
                                Ù†Ù…Ø§ÛŒØ´_Ø§ØªÙ…Ø§Ù…_Ù…Ø±Ø­Ù„Ù‡();
                            }
                        }
                        
                        Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ_Ø±Ø§Ø¨Ø·();
                        break;
                    }
                }
            }
            
            // Ø¨Ø±Ø®ÙˆØ±Ø¯ Ú¯Ù„ÙˆÙ„Ù‡â€ŒÙ‡Ø§ÛŒ Ø¯Ø´Ù…Ù† Ø¨Ø§ Ø¨Ø§Ø²ÛŒÚ©Ù†
            const Ú¯Ù„ÙˆÙ„Ù‡â€ŒÙ‡Ø§ÛŒ_Ø¯Ø´Ù…Ù† = Ú¯Ù„ÙˆÙ„Ù‡â€ŒÙ‡Ø§.filter(g => !g.isPlayer);
            for (const Ú¯Ù„ÙˆÙ„Ù‡ of Ú¯Ù„ÙˆÙ„Ù‡â€ŒÙ‡Ø§ÛŒ_Ø¯Ø´Ù…Ù†) {
                const dx = Ú¯Ù„ÙˆÙ„Ù‡.x - Ø¨Ø§Ø²ÛŒÚ©Ù†.x;
                const dy = Ú¯Ù„ÙˆÙ„Ù‡.y - Ø¨Ø§Ø²ÛŒÚ©Ù†.y;
                const distance = Math.sqrt(dx * dx + dy * dy);
                const collisionDistance = (Ú¯Ù„ÙˆÙ„Ù‡.width + Ø¨Ø§Ø²ÛŒÚ©Ù†.width) / 2;
                
                if (distance < collisionDistance && now - Ø¨Ø§Ø²ÛŒÚ©Ù†.lastHit > 500) {
                    ÙˆØ¶Ø¹ÛŒØª_Ø¨Ø§Ø²ÛŒ.Ø³Ù„Ø§Ù…Øª -= 10 + ÙˆØ¶Ø¹ÛŒØª_Ø¨Ø§Ø²ÛŒ.Ù…Ø±Ø­Ù„Ù‡ * 0.5;
                    Ø¨Ø§Ø²ÛŒÚ©Ù†.lastHit = now;
                    Ø§ÛŒØ¬Ø§Ø¯_Ø°Ø±Ø§Øª(Ø¨Ø§Ø²ÛŒÚ©Ù†.x, Ø¨Ø§Ø²ÛŒÚ©Ù†.y, 10, '#ff0000', 1.1);
                    
                    // Ø¢Ø²Ø§Ø¯ Ú©Ø±Ø¯Ù† Ú¯Ù„ÙˆÙ„Ù‡
                    Ú¯Ù„ÙˆÙ„Ù‡â€ŒÙ‡Ø§_Ú¯Ø±ÛŒØ¯.remove(Ú¯Ù„ÙˆÙ„Ù‡);
                    const index = Ú¯Ù„ÙˆÙ„Ù‡â€ŒÙ‡Ø§.indexOf(Ú¯Ù„ÙˆÙ„Ù‡);
                    if (index > -1) {
                        Ú¯Ù„ÙˆÙ„Ù‡â€ŒÙ‡Ø§.splice(index, 1);
                        Ú¯Ù„ÙˆÙ„Ù‡_Ù¾ÙˆÙ„.release(Ú¯Ù„ÙˆÙ„Ù‡);
                    }
                    
                    if (ÙˆØ¶Ø¹ÛŒØª_Ø¨Ø§Ø²ÛŒ.Ø³Ù„Ø§Ù…Øª <= 0) {
                        ÙˆØ¶Ø¹ÛŒØª_Ø¨Ø§Ø²ÛŒ.Ø³Ù„Ø§Ù…Øª = 0;
                        Ù¾Ø§ÛŒØ§Ù†_Ø¨Ø§Ø²ÛŒ();
                    }
                    
                    Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ_Ø±Ø§Ø¨Ø·();
                }
            }
            
            // Ø¨Ø±Ø®ÙˆØ±Ø¯ Ø¨Ø§Ø²ÛŒÚ©Ù† Ø¨Ø§ Ø³Ù„Ø§Ù…Øª
            for (let i = ÙˆØ¶Ø¹ÛŒØª_Ø¨Ø§Ø²ÛŒ.Ø¢ÛŒØªÙ…â€ŒÙ‡Ø§ÛŒ_Ø³Ù„Ø§Ù…Øª.length - 1; i >= 0; i--) {
                const Ø¢ÛŒØªÙ…_Ø³Ù„Ø§Ù…Øª = ÙˆØ¶Ø¹ÛŒØª_Ø¨Ø§Ø²ÛŒ.Ø¢ÛŒØªÙ…â€ŒÙ‡Ø§ÛŒ_Ø³Ù„Ø§Ù…Øª[i];
                
                if (Ø¢ÛŒØªÙ…_Ø³Ù„Ø§Ù…Øª.collected) continue;
                
                const dx = Ø¨Ø§Ø²ÛŒÚ©Ù†.x - Ø¢ÛŒØªÙ…_Ø³Ù„Ø§Ù…Øª.x;
                const dy = Ø¨Ø§Ø²ÛŒÚ©Ù†.y - Ø¢ÛŒØªÙ…_Ø³Ù„Ø§Ù…Øª.y;
                const distance = Math.sqrt(dx * dx + dy * dy);
                const collisionDistance = (Ø¨Ø§Ø²ÛŒÚ©Ù†.width + Ø¢ÛŒØªÙ…_Ø³Ù„Ø§Ù…Øª.size) / 2;
                
                if (distance < collisionDistance) {
                    Ø¢ÛŒØªÙ…_Ø³Ù„Ø§Ù…Øª.collected = true;
                    ÙˆØ¶Ø¹ÛŒØª_Ø¨Ø§Ø²ÛŒ.Ø³Ù„Ø§Ù…Øª = Math.min(100, ÙˆØ¶Ø¹ÛŒØª_Ø¨Ø§Ø²ÛŒ.Ø³Ù„Ø§Ù…Øª + 30);
                    Ø§ÛŒØ¬Ø§Ø¯_Ø°Ø±Ø§Øª(Ø¢ÛŒØªÙ…_Ø³Ù„Ø§Ù…Øª.x, Ø¢ÛŒØªÙ…_Ø³Ù„Ø§Ù…Øª.y, 12, '#ffff00', 1.3);
                    ÙˆØ¶Ø¹ÛŒØª_Ø¨Ø§Ø²ÛŒ.Ø¢ÛŒØªÙ…â€ŒÙ‡Ø§ÛŒ_Ø³Ù„Ø§Ù…Øª.splice(i, 1);
                    
                    Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ_Ø±Ø§Ø¨Ø·();
                }
            }
            
            // Ø¨Ø±Ø®ÙˆØ±Ø¯ Ø¯Ø´Ù…Ù† Ø¨Ø§ Ø¨Ø§Ø²ÛŒÚ©Ù†
            const Ø¯Ø´Ù…Ù†Ø§Ù†_Ø®ÛŒÙ„ÛŒ_Ù†Ø²Ø¯ÛŒÚ© = Ø¯Ø´Ù…Ù†Ø§Ù†_Ú¯Ø±ÛŒØ¯.query(Ø¨Ø§Ø²ÛŒÚ©Ù†.x, Ø¨Ø§Ø²ÛŒÚ©Ù†.y, 150);
            for (const Ø¯Ø´Ù…Ù† of Ø¯Ø´Ù…Ù†Ø§Ù†_Ø®ÛŒÙ„ÛŒ_Ù†Ø²Ø¯ÛŒÚ©) {
                const dx = Ø¨Ø§Ø²ÛŒÚ©Ù†.x - Ø¯Ø´Ù…Ù†.x;
                const dy = Ø¨Ø§Ø²ÛŒÚ©Ù†.y - Ø¯Ø´Ù…Ù†.y;
                const distance = Math.sqrt(dx * dx + dy * dy);
                const collisionDistance = (Ø¨Ø§Ø²ÛŒÚ©Ù†.width + Ø¯Ø´Ù…Ù†.width) / 2;
                
                if (distance < collisionDistance && now - Ø¨Ø§Ø²ÛŒÚ©Ù†.lastHit > 800) {
                    ÙˆØ¶Ø¹ÛŒØª_Ø¨Ø§Ø²ÛŒ.Ø³Ù„Ø§Ù…Øª -= 15 + ÙˆØ¶Ø¹ÛŒØª_Ø¨Ø§Ø²ÛŒ.Ù…Ø±Ø­Ù„Ù‡;
                    Ø¨Ø§Ø²ÛŒÚ©Ù†.lastHit = now;
                    Ø§ÛŒØ¬Ø§Ø¯_Ø°Ø±Ø§Øª(Ø¨Ø§Ø²ÛŒÚ©Ù†.x, Ø¨Ø§Ø²ÛŒÚ©Ù†.y, 15, '#ff0000', 1.2);
                    
                    // Ú©Ù…ÛŒ Ø¯Ø´Ù…Ù† Ø±Ø§ Ù¾Ø³ Ù…ÛŒâ€ŒØ²Ù†Ø¯
                    const angle = Math.atan2(Ø¨Ø§Ø²ÛŒÚ©Ù†.y - Ø¯Ø´Ù…Ù†.y, Ø¨Ø§Ø²ÛŒÚ©Ù†.x - Ø¯Ø´Ù…Ù†.x);
                    Ø¯Ø´Ù…Ù†.x -= Math.cos(angle) * 50;
                    Ø¯Ø´Ù…Ù†.y -= Math.sin(angle) * 50;
                    Ø¯Ø´Ù…Ù†Ø§Ù†_Ú¯Ø±ÛŒØ¯.remove(Ø¯Ø´Ù…Ù†);
                    Ø¯Ø´Ù…Ù†Ø§Ù†_Ú¯Ø±ÛŒØ¯.insert(Ø¯Ø´Ù…Ù†);
                    
                    if (ÙˆØ¶Ø¹ÛŒØª_Ø¨Ø§Ø²ÛŒ.Ø³Ù„Ø§Ù…Øª <= 0) {
                        ÙˆØ¶Ø¹ÛŒØª_Ø¨Ø§Ø²ÛŒ.Ø³Ù„Ø§Ù…Øª = 0;
                        Ù¾Ø§ÛŒØ§Ù†_Ø¨Ø§Ø²ÛŒ();
                    }
                    
                    Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ_Ø±Ø§Ø¨Ø·();
                }
            }
        }

        function Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ_Ø­Ø±Ú©Øª_Ø¯Ø´Ù…Ù†Ø§Ù†() {
            for (const Ø¯Ø´Ù…Ù† of Ø¯Ø´Ù…Ù†Ø§Ù†) {
                // Ø­Ø±Ú©Øª Ø¨Ù‡ Ø³Ù…Øª Ø¨Ø§Ø²ÛŒÚ©Ù†
                const dx = Ø¨Ø§Ø²ÛŒÚ©Ù†.x - Ø¯Ø´Ù…Ù†.x;
                const dy = Ø¨Ø§Ø²ÛŒÚ©Ù†.y - Ø¯Ø´Ù…Ù†.y;
                const distance = Math.sqrt(dx * dx + dy * dy);
                
                if (distance > 50) { // ÙØ§ØµÙ„Ù‡ Ø­Ø¯Ø§Ù‚Ù„
                    const moveX = (dx / distance) * Ø¯Ø´Ù…Ù†.speed;
                    const moveY = (dy / distance) * Ø¯Ø´Ù…Ù†.speed;
                    
                    // Ø¨Ù‡â€ŒØ±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ù…ÙˆÙ‚Ø¹ÛŒØª
                    Ø¯Ø´Ù…Ù†.x += moveX;
                    Ø¯Ø´Ù…Ù†.y += moveY;
                    Ø¯Ø´Ù…Ù†Ø§Ù†_Ú¯Ø±ÛŒØ¯.remove(Ø¯Ø´Ù…Ù†);
                    Ø¯Ø´Ù…Ù†Ø§Ù†_Ú¯Ø±ÛŒØ¯.insert(Ø¯Ø´Ù…Ù†);
                }
                
                // Ú†Ø±Ø®Ø´
                Ø¯Ø´Ù…Ù†.rotation += Ø¯Ø´Ù…Ù†.rotationSpeed;
            }
        }

        function Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ_Ø¯ÙˆØ±Ø¨ÛŒÙ†() {
            const targetX = Ø¨Ø§Ø²ÛŒÚ©Ù†.x - Ú©Ø§Ù†ÙˆØ§Ø³_Ø¨Ø§Ø²ÛŒ.width / (2 * ØªÙ†Ø¸ÛŒÙ…Ø§Øª_Ø¨Ø§Ø²ÛŒ.Ø¶Ø±ÛŒØ¨_Ø²ÙˆÙ…);
            const targetY = Ø¨Ø§Ø²ÛŒÚ©Ù†.y - Ú©Ø§Ù†ÙˆØ§Ø³_Ø¨Ø§Ø²ÛŒ.height / (2 * ØªÙ†Ø¸ÛŒÙ…Ø§Øª_Ø¨Ø§Ø²ÛŒ.Ø¶Ø±ÛŒØ¨_Ø²ÙˆÙ…);
            
            ÙˆØ¶Ø¹ÛŒØª_Ø¨Ø§Ø²ÛŒ.Ø¯ÙˆØ±Ø¨ÛŒÙ†.x += (targetX - ÙˆØ¶Ø¹ÛŒØª_Ø¨Ø§Ø²ÛŒ.Ø¯ÙˆØ±Ø¨ÛŒÙ†.x) * ØªÙ†Ø¸ÛŒÙ…Ø§Øª_Ø¨Ø§Ø²ÛŒ.Ø³Ø±Ø¹Øª_Ø¯Ù†Ø¨Ø§Ù„_Ú©Ø±Ø¯Ù†_Ø¯ÙˆØ±Ø¨ÛŒÙ†;
            ÙˆØ¶Ø¹ÛŒØª_Ø¨Ø§Ø²ÛŒ.Ø¯ÙˆØ±Ø¨ÛŒÙ†.y += (targetY - ÙˆØ¶Ø¹ÛŒØª_Ø¨Ø§Ø²ÛŒ.Ø¯ÙˆØ±Ø¨ÛŒÙ†.y) * ØªÙ†Ø¸ÛŒÙ…Ø§Øª_Ø¨Ø§Ø²ÛŒ.Ø³Ø±Ø¹Øª_Ø¯Ù†Ø¨Ø§Ù„_Ú©Ø±Ø¯Ù†_Ø¯ÙˆØ±Ø¨ÛŒÙ†;
            
            // Ù…Ø­Ø¯ÙˆØ¯ Ú©Ø±Ø¯Ù† Ø¯ÙˆØ±Ø¨ÛŒÙ† Ø¨Ù‡ Ù…Ø±Ø²Ù‡Ø§ÛŒ Ø¬Ù‡Ø§Ù†
            const maxX = ØªÙ†Ø¸ÛŒÙ…Ø§Øª_Ø¨Ø§Ø²ÛŒ.Ø§Ù†Ø¯Ø§Ø²Ù‡_Ø¬Ù‡Ø§Ù† - Ú©Ø§Ù†ÙˆØ§Ø³_Ø¨Ø§Ø²ÛŒ.width / ØªÙ†Ø¸ÛŒÙ…Ø§Øª_Ø¨Ø§Ø²ÛŒ.Ø¶Ø±ÛŒØ¨_Ø²ÙˆÙ…;
            const maxY = ØªÙ†Ø¸ÛŒÙ…Ø§Øª_Ø¨Ø§Ø²ÛŒ.Ø§Ù†Ø¯Ø§Ø²Ù‡_Ø¬Ù‡Ø§Ù† - Ú©Ø§Ù†ÙˆØ§Ø³_Ø¨Ø§Ø²ÛŒ.height / ØªÙ†Ø¸ÛŒÙ…Ø§Øª_Ø¨Ø§Ø²ÛŒ.Ø¶Ø±ÛŒØ¨_Ø²ÙˆÙ…;
            
            ÙˆØ¶Ø¹ÛŒØª_Ø¨Ø§Ø²ÛŒ.Ø¯ÙˆØ±Ø¨ÛŒÙ†.x = Math.max(0, Math.min(maxX, ÙˆØ¶Ø¹ÛŒØª_Ø¨Ø§Ø²ÛŒ.Ø¯ÙˆØ±Ø¨ÛŒÙ†.x));
            ÙˆØ¶Ø¹ÛŒØª_Ø¨Ø§Ø²ÛŒ.Ø¯ÙˆØ±Ø¨ÛŒÙ†.y = Math.max(0, Math.min(maxY, ÙˆØ¶Ø¹ÛŒØª_Ø¨Ø§Ø²ÛŒ.Ø¯ÙˆØ±Ø¨ÛŒÙ†.y));
        }

        function Ø¬Ù‡Ø§Ù†ÛŒ_Ø¨Ù‡_ØµÙØ­Ù‡(x, y) {
            return {
                x: (x - ÙˆØ¶Ø¹ÛŒØª_Ø¨Ø§Ø²ÛŒ.Ø¯ÙˆØ±Ø¨ÛŒÙ†.x) * ØªÙ†Ø¸ÛŒÙ…Ø§Øª_Ø¨Ø§Ø²ÛŒ.Ø¶Ø±ÛŒØ¨_Ø²ÙˆÙ…,
                y: (y - ÙˆØ¶Ø¹ÛŒØª_Ø¨Ø§Ø²ÛŒ.Ø¯ÙˆØ±Ø¨ÛŒÙ†.y) * ØªÙ†Ø¸ÛŒÙ…Ø§Øª_Ø¨Ø§Ø²ÛŒ.Ø¶Ø±ÛŒØ¨_Ø²ÙˆÙ…
            };
        }

        function Ø±Ø³Ù…_Ø¯ÙˆØ±Ø¨ÛŒÙ†_Ø¢Ù†Ù„Ø§ÛŒÙ†() {
            const canvas = Ø¯ÙˆØ±Ø¨ÛŒÙ†_Ø¢Ù†Ù„Ø§ÛŒÙ†_Ú©Ø§Ù†ÙˆØ§Ø³;
            const ctx = Ù‚Ù„Ù…_Ø¯ÙˆØ±Ø¨ÛŒÙ†;
            
            // Ù¾Ø§Ú© Ú©Ø±Ø¯Ù†
            ctx.fillStyle = '#001122';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            const scale = Math.min(canvas.width, canvas.height) / ØªÙ†Ø¸ÛŒÙ…Ø§Øª_Ø¨Ø§Ø²ÛŒ.Ø§Ù†Ø¯Ø§Ø²Ù‡_Ø¬Ù‡Ø§Ù†;
            const offsetX = (canvas.width - ØªÙ†Ø¸ÛŒÙ…Ø§Øª_Ø¨Ø§Ø²ÛŒ.Ø§Ù†Ø¯Ø§Ø²Ù‡_Ø¬Ù‡Ø§Ù† * scale) / 2;
            const offsetY = (canvas.height - ØªÙ†Ø¸ÛŒÙ…Ø§Øª_Ø¨Ø§Ø²ÛŒ.Ø§Ù†Ø¯Ø§Ø²Ù‡_Ø¬Ù‡Ø§Ù† * scale) / 2;
            
            // Ø±Ø³Ù… Ø³Ú©Ù‡â€ŒÙ‡Ø§ (Ø³Ø¨Ø²)
            ctx.fillStyle = '#00ff00';
            for (const Ø³Ú©Ù‡ of Ø³Ú©Ù‡â€ŒÙ‡Ø§) {
                if (Ø³Ú©Ù‡.collected) continue;
                const x = Ø³Ú©Ù‡.x * scale + offsetX;
                const y = Ø³Ú©Ù‡.y * scale + offsetY;
                
                // Ø§Ú¯Ø± Ø¯Ø± Ù…Ø­Ø¯ÙˆØ¯Ù‡ Ø¯ÛŒØ¯ Ø¨Ø§Ø´Ø¯ØŒ Ø¨Ø²Ø±Ú¯ØªØ± Ø±Ø³Ù… Ú©Ù†
                const dx = Ø³Ú©Ù‡.x - Ø¨Ø§Ø²ÛŒÚ©Ù†.x;
                const dy = Ø³Ú©Ù‡.y - Ø¨Ø§Ø²ÛŒÚ©Ù†.y;
                const distance = Math.sqrt(dx * dx + dy * dy);
                
                const size = distance < 5000 ? 4 : 2;
                ctx.beginPath();
                ctx.arc(x, y, size, 0, Math.PI * 2);
                ctx.fill();
            }
            
            // Ø±Ø³Ù… Ø¯Ø´Ù…Ù†Ø§Ù† (Ù‚Ø±Ù…Ø²)
            ctx.fillStyle = '#ff0000';
            for (const Ø¯Ø´Ù…Ù† of Ø¯Ø´Ù…Ù†Ø§Ù†) {
                const x = Ø¯Ø´Ù…Ù†.x * scale + offsetX;
                const y = Ø¯Ø´Ù…Ù†.y * scale + offsetY;
                
                const dx = Ø¯Ø´Ù…Ù†.x - Ø¨Ø§Ø²ÛŒÚ©Ù†.x;
                const dy = Ø¯Ø´Ù…Ù†.y - Ø¨Ø§Ø²ÛŒÚ©Ù†.y;
                const distance = Math.sqrt(dx * dx + dy * dy);
                
                const size = distance < 5000 ? 4 : 2;
                ctx.beginPath();
                ctx.arc(x, y, size, 0, Math.PI * 2);
                ctx.fill();
            }
            
            // Ø±Ø³Ù… Ø³Ù„Ø§Ù…Øª (Ø²Ø±Ø¯)
            ctx.fillStyle = '#ffff00';
            for (const Ø¢ÛŒØªÙ… of ÙˆØ¶Ø¹ÛŒØª_Ø¨Ø§Ø²ÛŒ.Ø¢ÛŒØªÙ…â€ŒÙ‡Ø§ÛŒ_Ø³Ù„Ø§Ù…Øª) {
                if (Ø¢ÛŒØªÙ….collected) continue;
                const x = Ø¢ÛŒØªÙ….x * scale + offsetX;
                const y = Ø¢ÛŒØªÙ….y * scale + offsetY;
                
                ctx.beginPath();
                ctx.arc(x, y, 3, 0, Math.PI * 2);
                ctx.fill();
            }
            
            // Ø±Ø³Ù… Ø¨Ø§Ø²ÛŒÚ©Ù† (Ø¢Ø¨ÛŒ)
            const playerX = Ø¨Ø§Ø²ÛŒÚ©Ù†.x * scale + offsetX;
            const playerY = Ø¨Ø§Ø²ÛŒÚ©Ù†.y * scale + offsetY;
            
            ctx.fillStyle = '#00aaff';
            ctx.beginPath();
            ctx.arc(playerX, playerY, 5, 0, Math.PI * 2);
            ctx.fill();
            
            // Ø¬Ù‡Øª Ø¨Ø§Ø²ÛŒÚ©Ù†
            ctx.strokeStyle = '#ffffff';
            ctx.lineWidth = 2;
            ctx.beginPath();
            ctx.moveTo(playerX, playerY);
            ctx.lineTo(
                playerX + Math.cos(Ø¨Ø§Ø²ÛŒÚ©Ù†.rotation) * 12,
                playerY + Math.sin(Ø¨Ø§Ø²ÛŒÚ©Ù†.rotation) * 12
            );
            ctx.stroke();
            
            // Ø±Ø³Ù… Ù…Ø±Ø² Ø¯ÛŒØ¯ ÙØ¹Ù„ÛŒ
            const cameraWidth = Ú©Ø§Ù†ÙˆØ§Ø³_Ø¨Ø§Ø²ÛŒ.width / ØªÙ†Ø¸ÛŒÙ…Ø§Øª_Ø¨Ø§Ø²ÛŒ.Ø¶Ø±ÛŒØ¨_Ø²ÙˆÙ… * scale;
            const cameraHeight = Ú©Ø§Ù†ÙˆØ§Ø³_Ø¨Ø§Ø²ÛŒ.height / ØªÙ†Ø¸ÛŒÙ…Ø§Øª_Ø¨Ø§Ø²ÛŒ.Ø¶Ø±ÛŒØ¨_Ø²ÙˆÙ… * scale;
            const cameraX = ÙˆØ¶Ø¹ÛŒØª_Ø¨Ø§Ø²ÛŒ.Ø¯ÙˆØ±Ø¨ÛŒÙ†.x * scale + offsetX;
            const cameraY = ÙˆØ¶Ø¹ÛŒØª_Ø¨Ø§Ø²ÛŒ.Ø¯ÙˆØ±Ø¨ÛŒÙ†.y * scale + offsetY;
            
            ctx.strokeStyle = '#ffffff';
            ctx.lineWidth = 2;
            ctx.strokeRect(cameraX, cameraY, cameraWidth, cameraHeight);
        }

        function Ø±Ù†Ø¯Ø±() {
            const now = Date.now();
            const deltaTime = now - ÙˆØ¶Ø¹ÛŒØª_Ø¨Ø§Ø²ÛŒ.Ø¢Ø®Ø±ÛŒÙ†_Ø²Ù…Ø§Ù†_Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ;
            ÙˆØ¶Ø¹ÛŒØª_Ø¨Ø§Ø²ÛŒ.Ø¢Ø®Ø±ÛŒÙ†_Ø²Ù…Ø§Ù†_Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ = now;
            
            // Ù…Ø­Ø§Ø³Ø¨Ù‡ FPS
            if (deltaTime > 0) {
                ÙˆØ¶Ø¹ÛŒØª_Ø¨Ø§Ø²ÛŒ.fps = Math.round(1000 / deltaTime);
            }
            
            // Ù¾Ø§Ú© Ú©Ø±Ø¯Ù† ØµÙØ­Ù‡ Ø¨Ø§ Ø±Ù†Ú¯ ØªÛŒØ±Ù‡
            Ù‚Ù„Ù….fillStyle = '#000011';
            Ù‚Ù„Ù….fillRect(0, 0, Ú©Ø§Ù†ÙˆØ§Ø³_Ø¨Ø§Ø²ÛŒ.width, Ú©Ø§Ù†ÙˆØ§Ø³_Ø¨Ø§Ø²ÛŒ.height);
            
            // Ø±Ø³Ù… Ø³ØªØ§Ø±Ù‡â€ŒÙ‡Ø§ÛŒ Ù¾Ø³â€ŒØ²Ù…ÛŒÙ†Ù‡
            Ù‚Ù„Ù….fillStyle = '#ffffff';
            for (const Ø³ØªØ§Ø±Ù‡ of Ø³ØªØ§Ø±Ù‡â€ŒÙ‡Ø§) {
                const pos = Ø¬Ù‡Ø§Ù†ÛŒ_Ø¨Ù‡_ØµÙØ­Ù‡(Ø³ØªØ§Ø±Ù‡.x, Ø³ØªØ§Ø±Ù‡.y);
                if (pos.x >= -20 && pos.x <= Ú©Ø§Ù†ÙˆØ§Ø³_Ø¨Ø§Ø²ÛŒ.width + 20 &&
                    pos.y >= -20 && pos.y <= Ú©Ø§Ù†ÙˆØ§Ø³_Ø¨Ø§Ø²ÛŒ.height + 20) {
                    Ù‚Ù„Ù….globalAlpha = Ø³ØªØ§Ø±Ù‡.brightness;
                    Ù‚Ù„Ù….fillRect(pos.x, pos.y, Ø³ØªØ§Ø±Ù‡.size, Ø³ØªØ§Ø±Ù‡.size);
                }
            }
            Ù‚Ù„Ù….globalAlpha = 1;
            
            // Ø±Ø³Ù… Ø³Ú©Ù‡â€ŒÙ‡Ø§
            for (const Ø³Ú©Ù‡ of Ø³Ú©Ù‡â€ŒÙ‡Ø§) {
                if (Ø³Ú©Ù‡.collected) continue;
                
                const pos = Ø¬Ù‡Ø§Ù†ÛŒ_Ø¨Ù‡_ØµÙØ­Ù‡(Ø³Ú©Ù‡.x, Ø³Ú©Ù‡.y);
                if (pos.x < -200 || pos.x > Ú©Ø§Ù†ÙˆØ§Ø³_Ø¨Ø§Ø²ÛŒ.width + 200 ||
                    pos.y < -200 || pos.y > Ú©Ø§Ù†ÙˆØ§Ø³_Ø¨Ø§Ø²ÛŒ.height + 200) {
                    continue;
                }
                
                Ù‚Ù„Ù….save();
                Ù‚Ù„Ù….translate(pos.x, pos.y);
                Ø³Ú©Ù‡.rotation += 0.03;
                Ù‚Ù„Ù….rotate(Ø³Ú©Ù‡.rotation);
                
                // Ø§Ù†ØªØ®Ø§Ø¨ Ø§ÛŒÙ…ÙˆØ¬ÛŒ Ùˆ Ø±Ù†Ú¯ Ø¨Ø± Ø§Ø³Ø§Ø³ Ù†ÙˆØ¹
                let emoji, glowColor;
                switch(Ø³Ú©Ù‡.type) {
                    case 0: emoji = 'ğŸ›Ÿ'; glowColor = '#4ecdc4'; break;
                    case 1: emoji = 'â„ï¸'; glowColor = '#aaccff'; break;
                    case 2: emoji = 'â­'; glowColor = '#ffd700'; break;
                    case 3: emoji = 'ğŸ’'; glowColor = '#ff00ff'; break;
                }
                
                // Ø±Ø³Ù… Ù‡Ø§Ù„Ù‡
                Ù‚Ù„Ù….fillStyle = glowColor + '30';
                Ù‚Ù„Ù….beginPath();
                Ù‚Ù„Ù….arc(0, 0, Ø³Ú©Ù‡.size / 2 + 10, 0, Math.PI * 2);
                Ù‚Ù„Ù….fill();
                
                // Ø±Ø³Ù… Ø³Ú©Ù‡
                Ù‚Ù„Ù….font = `bold ${Ø³Ú©Ù‡.size * 0.8}px Arial`;
                Ù‚Ù„Ù….textAlign = 'center';
                Ù‚Ù„Ù….textBaseline = 'middle';
                Ù‚Ù„Ù….fillText(emoji, 0, 0);
                
                // Ù†Ù…Ø§ÛŒØ´ Ø¶Ø±Ø¨Ø§Øª Ø¨Ø§Ù‚ÛŒâ€ŒÙ…Ø§Ù†Ø¯Ù‡
                const hitsLeft = Ø³Ú©Ù‡.hitsRequired - Ø³Ú©Ù‡.hits;
                if (hitsLeft > 0) {
                    Ù‚Ù„Ù….font = 'bold 18px Arial';
                    Ù‚Ù„Ù….fillStyle = '#ffffff';
                    Ù‚Ù„Ù….fillText(hitsLeft.toString(), 0, Ø³Ú©Ù‡.size / 2 + 20);
                }
                
                Ù‚Ù„Ù….restore();
            }
            
            // Ø±Ø³Ù… Ø¢ÛŒØªÙ…â€ŒÙ‡Ø§ÛŒ Ø³Ù„Ø§Ù…Øª
            for (const Ø¢ÛŒØªÙ… of ÙˆØ¶Ø¹ÛŒØª_Ø¨Ø§Ø²ÛŒ.Ø¢ÛŒØªÙ…â€ŒÙ‡Ø§ÛŒ_Ø³Ù„Ø§Ù…Øª) {
                if (Ø¢ÛŒØªÙ….collected) continue;
                
                const pos = Ø¬Ù‡Ø§Ù†ÛŒ_Ø¨Ù‡_ØµÙØ­Ù‡(Ø¢ÛŒØªÙ….x, Ø¢ÛŒØªÙ….y);
                if (pos.x < -100 || pos.x > Ú©Ø§Ù†ÙˆØ§Ø³_Ø¨Ø§Ø²ÛŒ.width + 100 ||
                    pos.y < -100 || pos.y > Ú©Ø§Ù†ÙˆØ§Ø³_Ø¨Ø§Ø²ÛŒ.height + 100) {
                    continue;
                }
                
                Ø¢ÛŒØªÙ….pulsate = (Ø¢ÛŒØªÙ….pulsate + 0.05) % (Math.PI * 2);
                const scale = 1 + Math.sin(Ø¢ÛŒØªÙ….pulsate) * 0.2;
                
                Ù‚Ù„Ù….save();
                Ù‚Ù„Ù….translate(pos.x, pos.y);
                Ù‚Ù„Ù….scale(scale, scale);
                
                Ù‚Ù„Ù….font = `bold ${Ø¢ÛŒØªÙ….size}px Arial`;
                Ù‚Ù„Ù….textAlign = 'center';
                Ù‚Ù„Ù….textBaseline = 'middle';
                Ù‚Ù„Ù….fillStyle = '#ffff00';
                Ù‚Ù„Ù….fillText('âš¡ï¸', 0, 0);
                
                Ù‚Ù„Ù….restore();
            }
            
            // Ø±Ø³Ù… Ø¯Ø´Ù…Ù†Ø§Ù†
            for (const Ø¯Ø´Ù…Ù† of Ø¯Ø´Ù…Ù†Ø§Ù†) {
                const pos = Ø¬Ù‡Ø§Ù†ÛŒ_Ø¨Ù‡_ØµÙØ­Ù‡(Ø¯Ø´Ù…Ù†.x, Ø¯Ø´Ù…Ù†.y);
                if (pos.x < -150 || pos.x > Ú©Ø§Ù†ÙˆØ§Ø³_Ø¨Ø§Ø²ÛŒ.width + 150 ||
                    pos.y < -150 || pos.y > Ú©Ø§Ù†ÙˆØ§Ø³_Ø¨Ø§Ø²ÛŒ.height + 150) {
                    continue;
                }
                
                Ù‚Ù„Ù….save();
                Ù‚Ù„Ù….translate(pos.x, pos.y);
                Ù‚Ù„Ù….rotate(Ø¯Ø´Ù…Ù†.rotation);
                
                // Ø±Ø³Ù… Ø§ÛŒÙ…ÙˆØ¬ÛŒ Ø¯Ø´Ù…Ù†
                Ù‚Ù„Ù….font = `bold ${Ø¯Ø´Ù…Ù†.width}px Arial`;
                Ù‚Ù„Ù….textAlign = 'center';
                Ù‚Ù„Ù….textBaseline = 'middle';
                Ù‚Ù„Ù….fillText(Ø¯Ø´Ù…Ù†.emoji, 0, 0);
                
                // Ù†ÙˆØ§Ø± Ø³Ù„Ø§Ù…Øª
                const healthWidth = 50;
                const healthPercent = Ø¯Ø´Ù…Ù†.health / Ø¯Ø´Ù…Ù†.maxHealth;
                
                // Ù¾Ø³â€ŒØ²Ù…ÛŒÙ†Ù‡ Ù†ÙˆØ§Ø± Ø³Ù„Ø§Ù…Øª
                Ù‚Ù„Ù….fillStyle = '#333333';
                Ù‚Ù„Ù….fillRect(-healthWidth / 2, -Ø¯Ø´Ù…Ù†.height / 2 - 15, healthWidth, 6);
                
                // Ù†ÙˆØ§Ø± Ø³Ù„Ø§Ù…Øª Ø§ØµÙ„ÛŒ
                let healthColor;
                if (healthPercent > 0.6) {
                    healthColor = '#00ff88';
                } else if (healthPercent > 0.3) {
                    healthColor = '#ffaa00';
                } else {
                    healthColor = '#ff3300';
                }
                
                Ù‚Ù„Ù….fillStyle = healthColor;
                Ù‚Ù„Ù….fillRect(-healthWidth / 2, -Ø¯Ø´Ù…Ù†.height / 2 - 15, healthWidth * healthPercent, 6);
                
                // Ø­Ø§Ø´ÛŒÙ‡ Ù†ÙˆØ§Ø± Ø³Ù„Ø§Ù…Øª
                Ù‚Ù„Ù….strokeStyle = '#ffffff';
                Ù‚Ù„Ù….lineWidth = 1;
                Ù‚Ù„Ù….strokeRect(-healthWidth / 2, -Ø¯Ø´Ù…Ù†.height / 2 - 15, healthWidth, 6);
                
                Ù‚Ù„Ù….restore();
            }
            
            // Ø±Ø³Ù… Ú¯Ù„ÙˆÙ„Ù‡â€ŒÙ‡Ø§
            for (const Ú¯Ù„ÙˆÙ„Ù‡ of Ú¯Ù„ÙˆÙ„Ù‡â€ŒÙ‡Ø§) {
                const pos = Ø¬Ù‡Ø§Ù†ÛŒ_Ø¨Ù‡_ØµÙØ­Ù‡(Ú¯Ù„ÙˆÙ„Ù‡.x, Ú¯Ù„ÙˆÙ„Ù‡.y);
                
                // Ø±Ø³Ù… Ú¯Ù„ÙˆÙ„Ù‡
                Ù‚Ù„Ù….fillStyle = Ú¯Ù„ÙˆÙ„Ù‡.color;
                Ù‚Ù„Ù….beginPath();
                Ù‚Ù„Ù….arc(pos.x, pos.y, Ú¯Ù„ÙˆÙ„Ù‡.width / 2, 0, Math.PI * 2);
                Ù‚Ù„Ù….fill();
                
                // Ø±Ø³Ù… Ø¯Ù†Ø¨Ø§Ù„Ù‡
                Ù‚Ù„Ù….strokeStyle = Ú¯Ù„ÙˆÙ„Ù‡.color + '80';
                Ù‚Ù„Ù….lineWidth = 3;
                Ù‚Ù„Ù….beginPath();
                Ù‚Ù„Ù….moveTo(pos.x - Ú¯Ù„ÙˆÙ„Ù‡.vx * 0.5, pos.y - Ú¯Ù„ÙˆÙ„Ù‡.vy * 0.5);
                Ù‚Ù„Ù….lineTo(pos.x, pos.y);
                Ù‚Ù„Ù….stroke();
            }
            
            // Ø±Ø³Ù… Ø°Ø±Ø§Øª
            for (let i = Ø°Ø±Ø§Øª.length - 1; i >= 0; i--) {
                const Ø°Ø±Ù‡ = Ø°Ø±Ø§Øª[i];
                const pos = Ø¬Ù‡Ø§Ù†ÛŒ_Ø¨Ù‡_ØµÙØ­Ù‡(Ø°Ø±Ù‡.x, Ø°Ø±Ù‡.y);
                
                const alpha = Ø°Ø±Ù‡.life / Ø°Ø±Ù‡.maxLife;
                const size = Ø°Ø±Ù‡.size * alpha;
                
                if (size <= 0) {
                    Ø°Ø±Ø§Øª_Ù¾ÙˆÙ„.release(Ø°Ø±Ù‡);
                    Ø°Ø±Ø§Øª.splice(i, 1);
                    continue;
                }
                
                const colorWithAlpha = Ø°Ø±Ù‡.color + Math.floor(alpha * 255).toString(16).padStart(2, '0');
                Ù‚Ù„Ù….fillStyle = colorWithAlpha;
                Ù‚Ù„Ù….beginPath();
                Ù‚Ù„Ù….arc(pos.x, pos.y, size, 0, Math.PI * 2);
                Ù‚Ù„Ù….fill();
                
                Ø°Ø±Ù‡.life -= 0.016; // Ú©Ø§Ù‡Ø´ Ø¨Ø± Ø§Ø³Ø§Ø³ Ø²Ù…Ø§Ù†
            }
            
            // Ø±Ø³Ù… Ø¨Ø§Ø²ÛŒÚ©Ù†
            const playerPos = Ø¬Ù‡Ø§Ù†ÛŒ_Ø¨Ù‡_ØµÙØ­Ù‡(Ø¨Ø§Ø²ÛŒÚ©Ù†.x, Ø¨Ø§Ø²ÛŒÚ©Ù†.y);
            Ù‚Ù„Ù….save();
            Ù‚Ù„Ù….translate(playerPos.x, playerPos.y);
            
            // Ø¨Ù‡â€ŒØ±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ú†Ø±Ø®Ø´ Ø¨Ø± Ø§Ø³Ø§Ø³ Ø­Ø±Ú©Øª
            if (Ú©Ù†ØªØ±Ù„â€ŒÙ‡Ø§.Ø­Ø±Ú©Øª_x !== 0 || Ú©Ù†ØªØ±Ù„â€ŒÙ‡Ø§.Ø­Ø±Ú©Øª_y !== 0) {
                Ø¨Ø§Ø²ÛŒÚ©Ù†.rotation = Math.atan2(Ú©Ù†ØªØ±Ù„â€ŒÙ‡Ø§.Ø­Ø±Ú©Øª_y, Ú©Ù†ØªØ±Ù„â€ŒÙ‡Ø§.Ø­Ø±Ú©Øª_x);
            }
            Ù‚Ù„Ù….rotate(Ø¨Ø§Ø²ÛŒÚ©Ù†.rotation);
            
            // Ø¨Ø¯Ù†Ù‡ Ø§ØµÙ„ÛŒ
            Ù‚Ù„Ù….fillStyle = Ø¨Ø§Ø²ÛŒÚ©Ù†.color;
            Ù‚Ù„Ù….beginPath();
            Ù‚Ù„Ù….moveTo(Ø¨Ø§Ø²ÛŒÚ©Ù†.width / 2, 0);
            Ù‚Ù„Ù….lineTo(-Ø¨Ø§Ø²ÛŒÚ©Ù†.width / 3, -Ø¨Ø§Ø²ÛŒÚ©Ù†.height / 2);
            Ù‚Ù„Ù….lineTo(-Ø¨Ø§Ø²ÛŒÚ©Ù†.width / 2, 0);
            Ù‚Ù„Ù….lineTo(-Ø¨Ø§Ø²ÛŒÚ©Ù†.width / 3, Ø¨Ø§Ø²ÛŒÚ©Ù†.height / 2);
            Ù‚Ù„Ù….closePath();
            Ù‚Ù„Ù….fill();
            
            // Ú©Ø§Ø¨ÛŒÙ† Ø®Ù„Ø¨Ø§Ù†
            Ù‚Ù„Ù….fillStyle = '#aaffff';
            Ù‚Ù„Ù….beginPath();
            Ù‚Ù„Ù….arc(Ø¨Ø§Ø²ÛŒÚ©Ù†.width / 4, 0, Ø¨Ø§Ø²ÛŒÚ©Ù†.width / 6, 0, Math.PI * 2);
            Ù‚Ù„Ù….fill();
            
            // Ù…ÙˆØªÙˆØ±Ù‡Ø§
            Ù‚Ù„Ù….fillStyle = '#ff6600';
            Ù‚Ù„Ù….beginPath();
            Ù‚Ù„Ù….arc(-Ø¨Ø§Ø²ÛŒÚ©Ù†.width / 3, -Ø¨Ø§Ø²ÛŒÚ©Ù†.height / 4, Ø¨Ø§Ø²ÛŒÚ©Ù†.width / 8, 0, Math.PI * 2);
            Ù‚Ù„Ù….arc(-Ø¨Ø§Ø²ÛŒÚ©Ù†.width / 3, Ø¨Ø§Ø²ÛŒÚ©Ù†.height / 4, Ø¨Ø§Ø²ÛŒÚ©Ù†.width / 8, 0, Math.PI * 2);
            Ù‚Ù„Ù….fill();
            
            // Ø­Ø§Ø´ÛŒÙ‡
            Ù‚Ù„Ù….strokeStyle = '#ffffff';
            Ù‚Ù„Ù….lineWidth = 3;
            Ù‚Ù„Ù….stroke();
            
            // Ø§Ú¯Ø± Ø¢Ø³ÛŒØ¨ Ø¯ÛŒØ¯Ù‡ØŒ Ø§Ø«Ø± Ù‚Ø±Ù…Ø²
            if (now - Ø¨Ø§Ø²ÛŒÚ©Ù†.lastHit < 200) {
                Ù‚Ù„Ù….globalAlpha = 0.3;
                Ù‚Ù„Ù….fillStyle = '#ff0000';
                Ù‚Ù„Ù….fill();
                Ù‚Ù„Ù….globalAlpha = 1;
            }
            
            // Ø§Ú¯Ø± Ø­Ø±Ú©Øª Ù…ÛŒâ€ŒÚ©Ù†Ø¯ØŒ Ø§Ø«Ø± Ù…ÙˆØªÙˆØ±
            if (Ú©Ù†ØªØ±Ù„â€ŒÙ‡Ø§.Ø­Ø±Ú©Øª_x !== 0 || Ú©Ù†ØªØ±Ù„â€ŒÙ‡Ø§.Ø­Ø±Ú©Øª_y !== 0) {
                Ù‚Ù„Ù….fillStyle = '#ff9900';
                Ù‚Ù„Ù….beginPath();
                Ù‚Ù„Ù….ellipse(-Ø¨Ø§Ø²ÛŒÚ©Ù†.width / 2 - 10, -Ø¨Ø§Ø²ÛŒÚ©Ù†.height / 4, 15, 8, 0, 0, Math.PI * 2);
                Ù‚Ù„Ù….ellipse(-Ø¨Ø§Ø²ÛŒÚ©Ù†.width / 2 - 10, Ø¨Ø§Ø²ÛŒÚ©Ù†.height / 4, 15, 8, 0, 0, Math.PI * 2);
                Ù‚Ù„Ù….fill();
            }
            
            Ù‚Ù„Ù….restore();
            
            // Ø±Ø³Ù… Ø¯ÙˆØ±Ø¨ÛŒÙ† Ø¢Ù†Ù„Ø§ÛŒÙ†
            Ø±Ø³Ù…_Ø¯ÙˆØ±Ø¨ÛŒÙ†_Ø¢Ù†Ù„Ø§ÛŒÙ†();
            
            // Ù†Ù…Ø§ÛŒØ´ FPS (ÙÙ‚Ø· Ø¯Ø± Ø­Ø§Ù„Øª Ø¯ÛŒØ¨Ø§Ú¯)
            // Ù‚Ù„Ù….font = '14px Arial';
            // Ù‚Ù„Ù….fillStyle = '#00ff00';
            // Ù‚Ù„Ù….fillText(`FPS: ${ÙˆØ¶Ø¹ÛŒØª_Ø¨Ø§Ø²ÛŒ.fps}`, 10, 20);
        }

        function Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ() {
            if (!ÙˆØ¶Ø¹ÛŒØª_Ø¨Ø§Ø²ÛŒ.Ø¨Ø§Ø²ÛŒ_Ø¯Ø±_Ø­Ø§Ù„_Ø§Ø¬Ø±Ø§) return;
            
            // Ø­Ø±Ú©Øª Ø¨Ø§Ø²ÛŒÚ©Ù†
            Ø¨Ø§Ø²ÛŒÚ©Ù†.x += Ú©Ù†ØªØ±Ù„â€ŒÙ‡Ø§.Ø­Ø±Ú©Øª_x * Ø¨Ø§Ø²ÛŒÚ©Ù†.speed;
            Ø¨Ø§Ø²ÛŒÚ©Ù†.y += Ú©Ù†ØªØ±Ù„â€ŒÙ‡Ø§.Ø­Ø±Ú©Øª_y * Ø¨Ø§Ø²ÛŒÚ©Ù†.speed;
            
            // Ù…Ø­Ø¯ÙˆØ¯ Ú©Ø±Ø¯Ù† Ø¨Ø§Ø²ÛŒÚ©Ù† Ø¨Ù‡ Ù…Ø±Ø²Ù‡Ø§ÛŒ Ø¬Ù‡Ø§Ù†
            const margin = 100;
            Ø¨Ø§Ø²ÛŒÚ©Ù†.x = Math.max(b
                                            Ø¨Ø§Ø²ÛŒÚ©Ù†.width / 2 + margin,
                Math.min(ØªÙ†Ø¸ÛŒÙ…Ø§Øª_Ø¨Ø§Ø²ÛŒ.Ø§Ù†Ø¯Ø§Ø²Ù‡_Ø¬Ù‡Ø§Ù† - Ø¨Ø§Ø²ÛŒÚ©Ù†.width / 2 - margin, Ø¨Ø§Ø²ÛŒÚ©Ù†.x)
            );
            Ø¨Ø§Ø²ÛŒÚ©Ù†.y = Math.max(
                Ø¨Ø§Ø²ÛŒÚ©Ù†.height / 2 + margin,
                Math.min(ØªÙ†Ø¸ÛŒÙ…Ø§Øª_Ø¨Ø§Ø²ÛŒ.Ø§Ù†Ø¯Ø§Ø²Ù‡_Ø¬Ù‡Ø§Ù† - Ø¨Ø§Ø²ÛŒÚ©Ù†.height / 2 - margin, Ø¨Ø§Ø²ÛŒÚ©Ù†.y)
            );
            
            // Ø¨Ø§Ø²ÛŒØ§Ø¨ÛŒ ØªØ¯Ø±ÛŒØ¬ÛŒ Ø³Ù„Ø§Ù…Øª
            if (ÙˆØ¶Ø¹ÛŒØª_Ø¨Ø§Ø²ÛŒ.Ø³Ù„Ø§Ù…Øª < 100) {
                ÙˆØ¶Ø¹ÛŒØª_Ø¨Ø§Ø²ÛŒ.Ø³Ù„Ø§Ù…Øª += ØªÙ†Ø¸ÛŒÙ…Ø§Øª_Ø¨Ø§Ø²ÛŒ.Ø³Ø±Ø¹Øª_Ø¨Ø§Ø²Ú¯Ø´Øª_Ø³Ù„Ø§Ù…Øª;
                if (ÙˆØ¶Ø¹ÛŒØª_Ø¨Ø§Ø²ÛŒ.Ø³Ù„Ø§Ù…Øª > 100) ÙˆØ¶Ø¹ÛŒØª_Ø¨Ø§Ø²ÛŒ.Ø³Ù„Ø§Ù…Øª = 100;
                Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ_Ø±Ø§Ø¨Ø·();
            }
            
            // Ø­Ø±Ú©Øª Ú¯Ù„ÙˆÙ„Ù‡â€ŒÙ‡Ø§ Ùˆ Ø­Ø°Ù Ø¢Ù†â€ŒÙ‡Ø§ÛŒÛŒ Ú©Ù‡ Ø®Ø§Ø±Ø¬ Ø´Ø¯Ù‡â€ŒØ§Ù†Ø¯
            for (let i = Ú¯Ù„ÙˆÙ„Ù‡â€ŒÙ‡Ø§.length - 1; i >= 0; i--) {
                const Ú¯Ù„ÙˆÙ„Ù‡ = Ú¯Ù„ÙˆÙ„Ù‡â€ŒÙ‡Ø§[i];
                Ú¯Ù„ÙˆÙ„Ù‡.x += Ú¯Ù„ÙˆÙ„Ù‡.vx;
                Ú¯Ù„ÙˆÙ„Ù‡.y += Ú¯Ù„ÙˆÙ„Ù‡.vy;
                Ú¯Ù„ÙˆÙ„Ù‡.distanceTraveled += Math.sqrt(Ú¯Ù„ÙˆÙ„Ù‡.vx * Ú¯Ù„ÙˆÙ„Ù‡.vx + Ú¯Ù„ÙˆÙ„Ù‡.vy * Ú¯Ù„ÙˆÙ„Ù‡.vy);
                
                // Ø­Ø°Ù Ú¯Ù„ÙˆÙ„Ù‡â€ŒÙ‡Ø§ÛŒ Ø®Ø§Ø±Ø¬ Ø§Ø² Ù…Ø­Ø¯ÙˆØ¯Ù‡
                if (Ú¯Ù„ÙˆÙ„Ù‡.x < -500 || Ú¯Ù„ÙˆÙ„Ù‡.x > ØªÙ†Ø¸ÛŒÙ…Ø§Øª_Ø¨Ø§Ø²ÛŒ.Ø§Ù†Ø¯Ø§Ø²Ù‡_Ø¬Ù‡Ø§Ù† + 500 ||
                    Ú¯Ù„ÙˆÙ„Ù‡.y < -500 || Ú¯Ù„ÙˆÙ„Ù‡.y > ØªÙ†Ø¸ÛŒÙ…Ø§Øª_Ø¨Ø§Ø²ÛŒ.Ø§Ù†Ø¯Ø§Ø²Ù‡_Ø¬Ù‡Ø§Ù† + 500 ||
                    Ú¯Ù„ÙˆÙ„Ù‡.distanceTraveled > Ú¯Ù„ÙˆÙ„Ù‡.range) {
                    
                    Ú¯Ù„ÙˆÙ„Ù‡â€ŒÙ‡Ø§_Ú¯Ø±ÛŒØ¯.remove(Ú¯Ù„ÙˆÙ„Ù‡);
                    Ú¯Ù„ÙˆÙ„Ù‡â€ŒÙ‡Ø§.splice(i, 1);
                    Ú¯Ù„ÙˆÙ„Ù‡_Ù¾ÙˆÙ„.release(Ú¯Ù„ÙˆÙ„Ù‡);
                } else {
                    // Ø¨Ù‡â€ŒØ±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ù…ÙˆÙ‚Ø¹ÛŒØª Ø¯Ø± Ú¯Ø±ÛŒØ¯
                    Ú¯Ù„ÙˆÙ„Ù‡â€ŒÙ‡Ø§_Ú¯Ø±ÛŒØ¯.remove(Ú¯Ù„ÙˆÙ„Ù‡);
                    Ú¯Ù„ÙˆÙ„Ù‡â€ŒÙ‡Ø§_Ú¯Ø±ÛŒØ¯.insert(Ú¯Ù„ÙˆÙ„Ù‡);
                }
            }
            
            // Ø­Ø±Ú©Øª Ø¯Ø´Ù…Ù†Ø§Ù†
            Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ_Ø­Ø±Ú©Øª_Ø¯Ø´Ù…Ù†Ø§Ù†();
            
            // ØªÙˆÙ„ÛŒØ¯ Ø¢ÛŒØªÙ… Ø³Ù„Ø§Ù…Øª
            const now = Date.now();
            if (now - ÙˆØ¶Ø¹ÛŒØª_Ø¨Ø§Ø²ÛŒ.Ø¢Ø®Ø±ÛŒÙ†_ØªÙˆÙ„ÛŒØ¯_Ø³Ù„Ø§Ù…Øª > ØªÙ†Ø¸ÛŒÙ…Ø§Øª_Ø¨Ø§Ø²ÛŒ.Ù†Ø±Ø®_ØªÙˆÙ„ÛŒØ¯_Ø³Ù„Ø§Ù…Øª) {
                Ø§ÛŒØ¬Ø§Ø¯_Ø¢ÛŒØªÙ…_Ø³Ù„Ø§Ù…Øª();
                ÙˆØ¶Ø¹ÛŒØª_Ø¨Ø§Ø²ÛŒ.Ø¢Ø®Ø±ÛŒÙ†_ØªÙˆÙ„ÛŒØ¯_Ø³Ù„Ø§Ù…Øª = now;
            }
            
            // Ø­Ø°Ù Ø¢ÛŒØªÙ…â€ŒÙ‡Ø§ÛŒ Ø³Ù„Ø§Ù…Øª Ù‚Ø¯ÛŒÙ…ÛŒ
            for (let i = ÙˆØ¶Ø¹ÛŒØª_Ø¨Ø§Ø²ÛŒ.Ø¢ÛŒØªÙ…â€ŒÙ‡Ø§ÛŒ_Ø³Ù„Ø§Ù…Øª.length - 1; i >= 0; i--) {
                const Ø¢ÛŒØªÙ… = ÙˆØ¶Ø¹ÛŒØª_Ø¨Ø§Ø²ÛŒ.Ø¢ÛŒØªÙ…â€ŒÙ‡Ø§ÛŒ_Ø³Ù„Ø§Ù…Øª[i];
                if (now - Ø¢ÛŒØªÙ….spawnTime > ØªÙ†Ø¸ÛŒÙ…Ø§Øª_Ø¨Ø§Ø²ÛŒ.Ù…Ø¯Øª_Ø³Ù„Ø§Ù…Øª && !Ø¢ÛŒØªÙ….collected) {
                    ÙˆØ¶Ø¹ÛŒØª_Ø¨Ø§Ø²ÛŒ.Ø¢ÛŒØªÙ…â€ŒÙ‡Ø§ÛŒ_Ø³Ù„Ø§Ù…Øª.splice(i, 1);
                }
            }
            
            // Ø¨Ù‡â€ŒØ±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ø¯ÙˆØ±Ø¨ÛŒÙ†
            Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ_Ø¯ÙˆØ±Ø¨ÛŒÙ†();
            
            // ØªØ´Ø®ÛŒØµ Ø¨Ø±Ø®ÙˆØ±Ø¯
            ØªØ´Ø®ÛŒØµ_Ø¨Ø±Ø®ÙˆØ±Ø¯();
            
            // Ø±Ù†Ø¯Ø±
            Ø±Ù†Ø¯Ø±();
            
            // Ø¯Ø±Ø®ÙˆØ§Ø³Øª ÙØ±ÛŒÙ… Ø¨Ø¹Ø¯ÛŒ
            requestAnimationFrame(Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ);
        }

        function Ù†Ù…Ø§ÛŒØ´_Ø§ØªÙ…Ø§Ù…_Ù…Ø±Ø­Ù„Ù‡() {
            ÙˆØ¶Ø¹ÛŒØª_Ø¨Ø§Ø²ÛŒ.Ø¨Ø§Ø²ÛŒ_Ø¯Ø±_Ø­Ø§Ù„_Ø§Ø¬Ø±Ø§ = false;
            Ù„ÙˆØ¯ÛŒÙ†Ú¯_Ø±Ù†Ú¯ÛŒ.style.display = 'flex';
            
            // Ø°Ø®ÛŒØ±Ù‡ Ù¾ÛŒØ´Ø±ÙØª
            localStorage.setItem('Ù…Ø±Ø­Ù„Ù‡', ÙˆØ¶Ø¹ÛŒØª_Ø¨Ø§Ø²ÛŒ.Ù…Ø±Ø­Ù„Ù‡);
            localStorage.setItem('Ø¨Ø§Ù„Ø§ØªØ±ÛŒÙ†_Ø§Ù…ØªÛŒØ§Ø²', ÙˆØ¶Ø¹ÛŒØª_Ø¨Ø§Ø²ÛŒ.Ø¨Ø§Ù„Ø§ØªØ±ÛŒÙ†_Ø§Ù…ØªÛŒØ§Ø²);
            
            setTimeout(() => {
                Ù„ÙˆØ¯ÛŒÙ†Ú¯_Ø±Ù†Ú¯ÛŒ.style.display = 'none';
                ØªÚ©Ù…ÛŒÙ„_Ù…Ø±Ø­Ù„Ù‡();
            }, 2500);
        }

        function ØªÚ©Ù…ÛŒÙ„_Ù…Ø±Ø­Ù„Ù‡() {
            // Ø§ÙØ²Ø§ÛŒØ´ Ù…Ø±Ø­Ù„Ù‡
            ÙˆØ¶Ø¹ÛŒØª_Ø¨Ø§Ø²ÛŒ.Ù…Ø±Ø­Ù„Ù‡++;
            ÙˆØ¶Ø¹ÛŒØª_Ø¨Ø§Ø²ÛŒ.Ø³Ú©Ù‡â€ŒÙ‡Ø§ÛŒ_Ø¬Ù…Ø¹â€ŒØ¢ÙˆØ±ÛŒ_Ø´Ø¯Ù‡ = 0;
            
            // Ø¨Ø§Ø²ÛŒØ§Ø¨ÛŒ Ø³Ù„Ø§Ù…Øª
            ÙˆØ¶Ø¹ÛŒØª_Ø¨Ø§Ø²ÛŒ.Ø³Ù„Ø§Ù…Øª = Math.min(100, ÙˆØ¶Ø¹ÛŒØª_Ø¨Ø§Ø²ÛŒ.Ø³Ù„Ø§Ù…Øª + 40);
            
            // Ù¾Ø§Ú©â€ŒØ³Ø§Ø²ÛŒ Ø§Ø´ÛŒØ§Ø¡ Ù‚Ø¯ÛŒÙ…ÛŒ
            Ø¯Ø´Ù…Ù†Ø§Ù† = [];
            Ø¯Ø´Ù…Ù†Ø§Ù†_Ú¯Ø±ÛŒØ¯.clear();
            
            // Ø¢Ø²Ø§Ø¯ Ú©Ø±Ø¯Ù† Ú¯Ù„ÙˆÙ„Ù‡â€ŒÙ‡Ø§
            for (const Ú¯Ù„ÙˆÙ„Ù‡ of Ú¯Ù„ÙˆÙ„Ù‡â€ŒÙ‡Ø§) {
                Ú¯Ù„ÙˆÙ„Ù‡_Ù¾ÙˆÙ„.release(Ú¯Ù„ÙˆÙ„Ù‡);
            }
            Ú¯Ù„ÙˆÙ„Ù‡â€ŒÙ‡Ø§ = [];
            Ú¯Ù„ÙˆÙ„Ù‡â€ŒÙ‡Ø§_Ú¯Ø±ÛŒØ¯.clear();
            
            // Ø¢Ø²Ø§Ø¯ Ú©Ø±Ø¯Ù† Ø°Ø±Ø§Øª
            Ø°Ø±Ø§Øª_Ù¾ÙˆÙ„.releaseAll();
            Ø°Ø±Ø§Øª = [];
            
            // Ù¾Ø§Ú©â€ŒØ³Ø§Ø²ÛŒ Ø¢ÛŒØªÙ…â€ŒÙ‡Ø§ÛŒ Ø³Ù„Ø§Ù…Øª
            ÙˆØ¶Ø¹ÛŒØª_Ø¨Ø§Ø²ÛŒ.Ø¢ÛŒØªÙ…â€ŒÙ‡Ø§ÛŒ_Ø³Ù„Ø§Ù…Øª = [];
            
            // Ø§ÛŒØ¬Ø§Ø¯ Ø³Ú©Ù‡â€ŒÙ‡Ø§ÛŒ Ø¬Ø¯ÛŒØ¯
            Ø§ÛŒØ¬Ø§Ø¯_Ø³Ú©Ù‡â€ŒÙ‡Ø§();
            
            // ØªÙ†Ø¸ÛŒÙ… Ù…Ø¬Ø¯Ø¯ ØªØ§ÛŒÙ…Ø± ØªÙˆÙ„ÛŒØ¯ Ø¯Ø´Ù…Ù†
            if (Ø¨Ø§Ø²Ù‡_ØªÙˆÙ„ÛŒØ¯_Ø¯Ø´Ù…Ù†) clearInterval(Ø¨Ø§Ø²Ù‡_ØªÙˆÙ„ÛŒØ¯_Ø¯Ø´Ù…Ù†);
            const Ù†Ø±Ø®_ØªÙˆÙ„ÛŒØ¯ = Ù…Ø­Ø§Ø³Ø¨Ù‡_Ù†Ø±Ø®_ØªÙˆÙ„ÛŒØ¯_Ø¯Ø´Ù…Ù†();
            Ø¨Ø§Ø²Ù‡_ØªÙˆÙ„ÛŒØ¯_Ø¯Ø´Ù…Ù† = setInterval(Ø§ÛŒØ¬Ø§Ø¯_Ø¯Ø´Ù…Ù†, Ù†Ø±Ø®_ØªÙˆÙ„ÛŒØ¯);
            
            // Ø§ÛŒØ¬Ø§Ø¯ Ø¯Ø´Ù…Ù†Ø§Ù† Ø§ÙˆÙ„ÛŒÙ‡
            const ØªØ¹Ø¯Ø§Ø¯_Ø¯Ø´Ù…Ù†Ø§Ù† = Ù…Ø­Ø§Ø³Ø¨Ù‡_Ø¯Ø´Ù…Ù†Ø§Ù†_Ø§ÙˆÙ„ÛŒÙ‡();
            for (let i = 0; i < ØªØ¹Ø¯Ø§Ø¯_Ø¯Ø´Ù…Ù†Ø§Ù†; i++) {
                setTimeout(() => Ø§ÛŒØ¬Ø§Ø¯_Ø¯Ø´Ù…Ù†(), i * 200);
            }
            
            // Ø°Ø®ÛŒØ±Ù‡ Ù¾ÛŒØ´Ø±ÙØª
            localStorage.setItem('Ù…Ø±Ø­Ù„Ù‡', ÙˆØ¶Ø¹ÛŒØª_Ø¨Ø§Ø²ÛŒ.Ù…Ø±Ø­Ù„Ù‡);
            
            // Ù†Ù…Ø§ÛŒØ´ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ù…Ø±Ø­Ù„Ù‡ Ø¬Ø¯ÛŒØ¯
            console.log(`Ù…Ø±Ø­Ù„Ù‡ ${ÙˆØ¶Ø¹ÛŒØª_Ø¨Ø§Ø²ÛŒ.Ù…Ø±Ø­Ù„Ù‡} Ø¢ØºØ§Ø² Ø´Ø¯!`);
            console.log(`Ø³Ú©Ù‡â€ŒÙ‡Ø§ÛŒ Ù…ÙˆØ±Ø¯ Ù†ÛŒØ§Ø²: ${Ù…Ø­Ø§Ø³Ø¨Ù‡_Ø³Ú©Ù‡â€ŒÙ‡Ø§ÛŒ_Ù…ÙˆØ±Ø¯_Ù†ÛŒØ§Ø²()}`);
            console.log(`Ø¯Ø´Ù…Ù†Ø§Ù† Ø§ÙˆÙ„ÛŒÙ‡: ${ØªØ¹Ø¯Ø§Ø¯_Ø¯Ø´Ù…Ù†Ø§Ù†}`);
            
            // Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ø±Ø§Ø¨Ø·
            Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ_Ø±Ø§Ø¨Ø·();
            
            // Ø§ÛŒØ¬Ø§Ø¯ Ø°Ø±Ø§Øª Ø¬Ø´Ù†
            for (let i = 0; i < 50; i++) {
                setTimeout(() => {
                    Ø§ÛŒØ¬Ø§Ø¯_Ø°Ø±Ø§Øª(
                        Ø¨Ø§Ø²ÛŒÚ©Ù†.x + (Math.random() - 0.5) * 300,
                        Ø¨Ø§Ø²ÛŒÚ©Ù†.y + (Math.random() - 0.5) * 300,
                        5,
                        '#00ffaa',
                        1.2
                    );
                }, i * 30);
            }
            
            // Ø´Ø±ÙˆØ¹ Ù…Ø¬Ø¯Ø¯ Ø¨Ø§Ø²ÛŒ
            ÙˆØ¶Ø¹ÛŒØª_Ø¨Ø§Ø²ÛŒ.Ø¨Ø§Ø²ÛŒ_Ø¯Ø±_Ø­Ø§Ù„_Ø§Ø¬Ø±Ø§ = true;
            Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ();
        }

        function Ù¾Ø§ÛŒØ§Ù†_Ø¨Ø§Ø²ÛŒ() {
            ÙˆØ¶Ø¹ÛŒØª_Ø¨Ø§Ø²ÛŒ.Ø¨Ø§Ø²ÛŒ_Ø¯Ø±_Ø­Ø§Ù„_Ø§Ø¬Ø±Ø§ = false;
            
            // ØªÙˆÙ‚Ù ØªØ§ÛŒÙ…Ø±Ù‡Ø§
            if (Ø¨Ø§Ø²Ù‡_Ø´Ù„ÛŒÚ©_Ø®ÙˆØ¯Ú©Ø§Ø±) clearInterval(Ø¨Ø§Ø²Ù‡_Ø´Ù„ÛŒÚ©_Ø®ÙˆØ¯Ú©Ø§Ø±);
            if (Ø¨Ø§Ø²Ù‡_ØªÙˆÙ„ÛŒØ¯_Ø¯Ø´Ù…Ù†) clearInterval(Ø¨Ø§Ø²Ù‡_ØªÙˆÙ„ÛŒØ¯_Ø¯Ø´Ù…Ù†);
            if (Ø¨Ø§Ø²Ù‡_Ø´Ù„ÛŒÚ©_Ø¯Ø´Ù…Ù†Ø§Ù†) clearInterval(Ø¨Ø§Ø²Ù‡_Ø´Ù„ÛŒÚ©_Ø¯Ø´Ù…Ù†Ø§Ù†);
            
            // Ø°Ø®ÛŒØ±Ù‡ Ø§Ù…ØªÛŒØ§Ø² Ø¨Ø§Ù„Ø§
            if (ÙˆØ¶Ø¹ÛŒØª_Ø¨Ø§Ø²ÛŒ.Ø§Ù…ØªÛŒØ§Ø² > ÙˆØ¶Ø¹ÛŒØª_Ø¨Ø§Ø²ÛŒ.Ø¨Ø§Ù„Ø§ØªØ±ÛŒÙ†_Ø§Ù…ØªÛŒØ§Ø²) {
                ÙˆØ¶Ø¹ÛŒØª_Ø¨Ø§Ø²ÛŒ.Ø¨Ø§Ù„Ø§ØªØ±ÛŒÙ†_Ø§Ù…ØªÛŒØ§Ø² = ÙˆØ¶Ø¹ÛŒØª_Ø¨Ø§Ø²ÛŒ.Ø§Ù…ØªÛŒØ§Ø²;
                localStorage.setItem('Ø¨Ø§Ù„Ø§ØªØ±ÛŒÙ†_Ø§Ù…ØªÛŒØ§Ø²', ÙˆØ¶Ø¹ÛŒØª_Ø¨Ø§Ø²ÛŒ.Ø§Ù…ØªÛŒØ§Ø²);
            }
            
            // Ø°Ø®ÛŒØ±Ù‡ Ø¢Ù…Ø§Ø±
            localStorage.setItem('Ù…Ø¬Ù…ÙˆØ¹_Ø³Ú©Ù‡â€ŒÙ‡Ø§', ÙˆØ¶Ø¹ÛŒØª_Ø¨Ø§Ø²ÛŒ.Ù…Ø¬Ù…ÙˆØ¹_Ø³Ú©Ù‡â€ŒÙ‡Ø§);
            localStorage.setItem('Ù…Ø¬Ù…ÙˆØ¹_Ú©Ø´ØªÙ‡â€ŒÙ‡Ø§', ÙˆØ¶Ø¹ÛŒØª_Ø¨Ø§Ø²ÛŒ.Ù…Ø¬Ù…ÙˆØ¹_Ú©Ø´ØªÙ‡â€ŒÙ‡Ø§);
            localStorage.setItem('Ù…Ø±Ø­Ù„Ù‡', ÙˆØ¶Ø¹ÛŒØª_Ø¨Ø§Ø²ÛŒ.Ù…Ø±Ø­Ù„Ù‡);
            
            // Ø§ÛŒØ¬Ø§Ø¯ Ø§Ù†ÙØ¬Ø§Ø±
            Ø§ÛŒØ¬Ø§Ø¯_Ø°Ø±Ø§Øª(Ø¨Ø§Ø²ÛŒÚ©Ù†.x, Ø¨Ø§Ø²ÛŒÚ©Ù†.y, 50, '#ff0000', 1.5);
            
            // Ù†Ù…Ø§ÛŒØ´ Ù¾ÛŒØ§Ù… Ù¾Ø§ÛŒØ§Ù† Ø¨Ø§Ø²ÛŒ
            setTimeout(() => {
                Ù…ØªÙ†_Ù¾ÛŒØ§Ù….textContent = `Ù…Ø§Ù…ÙˆØ±ÛŒØª Ø´Ú©Ø³Øª Ø®ÙˆØ±Ø¯!\n\nØ§Ù…ØªÛŒØ§Ø²: ${ÙˆØ¶Ø¹ÛŒØª_Ø¨Ø§Ø²ÛŒ.Ø§Ù…ØªÛŒØ§Ø².toLocaleString()}\nÙ…Ø±Ø­Ù„Ù‡: ${ÙˆØ¶Ø¹ÛŒØª_Ø¨Ø§Ø²ÛŒ.Ù…Ø±Ø­Ù„Ù‡}\nØ¯Ø´Ù…Ù†Ø§Ù† Ù†Ø§Ø¨ÙˆØ¯ Ø´Ø¯Ù‡: ${ÙˆØ¶Ø¹ÛŒØª_Ø¨Ø§Ø²ÛŒ.Ø¯Ø´Ù…Ù†Ø§Ù†_Ù†Ø§Ø¨ÙˆØ¯_Ø´Ø¯Ù‡}`;
                Ù¾ÛŒØ§Ù…_Ø¨Ø§Ø²ÛŒ.style.display = 'block';
            }, 1500);
        }

        function Ø´Ø±ÙˆØ¹_Ù…Ø¬Ø¯Ø¯_Ù…Ø±Ø­Ù„Ù‡() {
            Ù¾ÛŒØ§Ù…_Ø¨Ø§Ø²ÛŒ.style.display = 'none';
            
            // Ø¨Ø§Ø²Ù†Ø´Ø§Ù†ÛŒ ÙˆØ¶Ø¹ÛŒØª
            ÙˆØ¶Ø¹ÛŒØª_Ø¨Ø§Ø²ÛŒ.Ø³Ù„Ø§Ù…Øª = 100;
            ÙˆØ¶Ø¹ÛŒØª_Ø¨Ø§Ø²ÛŒ.Ø³Ú©Ù‡â€ŒÙ‡Ø§ÛŒ_Ø¬Ù…Ø¹â€ŒØ¢ÙˆØ±ÛŒ_Ø´Ø¯Ù‡ = 0;
            ÙˆØ¶Ø¹ÛŒØª_Ø¨Ø§Ø²ÛŒ.Ø¯Ø´Ù…Ù†Ø§Ù†_Ù†Ø§Ø¨ÙˆØ¯_Ø´Ø¯Ù‡ = 0;
            ÙˆØ¶Ø¹ÛŒØª_Ø¨Ø§Ø²ÛŒ.Ø¨Ø§Ø²ÛŒ_Ø¯Ø±_Ø­Ø§Ù„_Ø§Ø¬Ø±Ø§ = true;
            
            // Ù¾Ø§Ú©â€ŒØ³Ø§Ø²ÛŒ Ø§Ø´ÛŒØ§Ø¡
            Ø¯Ø´Ù…Ù†Ø§Ù† = [];
            Ø¯Ø´Ù…Ù†Ø§Ù†_Ú¯Ø±ÛŒØ¯.clear();
            
            Ú¯Ù„ÙˆÙ„Ù‡â€ŒÙ‡Ø§.forEach(g => Ú¯Ù„ÙˆÙ„Ù‡_Ù¾ÙˆÙ„.release(g));
            Ú¯Ù„ÙˆÙ„Ù‡â€ŒÙ‡Ø§ = [];
            Ú¯Ù„ÙˆÙ„Ù‡â€ŒÙ‡Ø§_Ú¯Ø±ÛŒØ¯.clear();
            
            Ø°Ø±Ø§Øª_Ù¾ÙˆÙ„.releaseAll();
            Ø°Ø±Ø§Øª = [];
            
            ÙˆØ¶Ø¹ÛŒØª_Ø¨Ø§Ø²ÛŒ.Ø¢ÛŒØªÙ…â€ŒÙ‡Ø§ÛŒ_Ø³Ù„Ø§Ù…Øª = [];
            
            // Ø¨Ø§Ø²Ù†Ø´Ø§Ù†ÛŒ Ù…ÙˆÙ‚Ø¹ÛŒØª Ø¨Ø§Ø²ÛŒÚ©Ù†
            Ø¨Ø§Ø²ÛŒÚ©Ù†.x = ØªÙ†Ø¸ÛŒÙ…Ø§Øª_Ø¨Ø§Ø²ÛŒ.Ø§Ù†Ø¯Ø§Ø²Ù‡_Ø¬Ù‡Ø§Ù† / 2;
            Ø¨Ø§Ø²ÛŒÚ©Ù†.y = ØªÙ†Ø¸ÛŒÙ…Ø§Øª_Ø¨Ø§Ø²ÛŒ.Ø§Ù†Ø¯Ø§Ø²Ù‡_Ø¬Ù‡Ø§Ù† / 2;
            Ø¨Ø§Ø²ÛŒÚ©Ù†.rotation = 0;
            
            // Ø§ÛŒØ¬Ø§Ø¯ Ø¯Ø´Ù…Ù†Ø§Ù† Ø§ÙˆÙ„ÛŒÙ‡
            const ØªØ¹Ø¯Ø§Ø¯_Ø¯Ø´Ù…Ù†Ø§Ù† = Ù…Ø­Ø§Ø³Ø¨Ù‡_Ø¯Ø´Ù…Ù†Ø§Ù†_Ø§ÙˆÙ„ÛŒÙ‡();
            for (let i = 0; i < ØªØ¹Ø¯Ø§Ø¯_Ø¯Ø´Ù…Ù†Ø§Ù†; i++) {
                Ø§ÛŒØ¬Ø§Ø¯_Ø¯Ø´Ù…Ù†();
            }
            
            // Ø±Ø§Ù‡â€ŒØ§Ù†Ø¯Ø§Ø²ÛŒ ØªØ§ÛŒÙ…Ø±Ù‡Ø§
            if (Ø¨Ø§Ø²Ù‡_Ø´Ù„ÛŒÚ©_Ø®ÙˆØ¯Ú©Ø§Ø±) clearInterval(Ø¨Ø§Ø²Ù‡_Ø´Ù„ÛŒÚ©_Ø®ÙˆØ¯Ú©Ø§Ø±);
            Ø¨Ø§Ø²Ù‡_Ø´Ù„ÛŒÚ©_Ø®ÙˆØ¯Ú©Ø§Ø± = setInterval(Ø´Ù„ÛŒÚ©_Ø®ÙˆØ¯Ú©Ø§Ø±, ØªÙ†Ø¸ÛŒÙ…Ø§Øª_Ø¨Ø§Ø²ÛŒ.Ù†Ø±Ø®_Ø´Ù„ÛŒÚ©_Ø®ÙˆØ¯Ú©Ø§Ø±);
            
            if (Ø¨Ø§Ø²Ù‡_Ø´Ù„ÛŒÚ©_Ø¯Ø´Ù…Ù†Ø§Ù†) clearInterval(Ø¨Ø§Ø²Ù‡_Ø´Ù„ÛŒÚ©_Ø¯Ø´Ù…Ù†Ø§Ù†);
            Ø¨Ø§Ø²Ù‡_Ø´Ù„ÛŒÚ©_Ø¯Ø´Ù…Ù†Ø§Ù† = setInterval(Ø´Ù„ÛŒÚ©_Ø¯Ø´Ù…Ù†Ø§Ù†, 100);
            
            // Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ø±Ø§Ø¨Ø·
            Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ_Ø±Ø§Ø¨Ø·();
            
            // Ø´Ø±ÙˆØ¹ Ø¨Ø§Ø²ÛŒ
            Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ();
        }

        // ============================================
        // ØªØ§Ø¨Ø¹ Ø´Ø±ÙˆØ¹ Ø¨Ø§Ø²ÛŒ Ø§ØµÙ„ÛŒ
        // ============================================
        function Ø´Ø±ÙˆØ¹_Ø¨Ø§Ø²ÛŒ() {
            // Ù¾Ù†Ù‡Ø§Ù† Ú©Ø±Ø¯Ù† ØµÙØ­Ù‡ Ø´Ø±ÙˆØ¹
            ØµÙØ­Ù‡_Ø´Ø±ÙˆØ¹.style.display = 'none';
            ØµÙØ­Ù‡_Ø¨Ø§Ø²ÛŒ.style.display = 'block';
            
            // Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø¢Ù…Ø§Ø± Ø°Ø®ÛŒØ±Ù‡ Ø´Ø¯Ù‡
            Ø¨Ø§Ù„Ø§ØªØ±ÛŒÙ†_Ø§Ù…ØªÛŒØ§Ø².textContent = ÙˆØ¶Ø¹ÛŒØª_Ø¨Ø§Ø²ÛŒ.Ø¨Ø§Ù„Ø§ØªØ±ÛŒÙ†_Ø§Ù…ØªÛŒØ§Ø².toLocaleString();
            Ù…Ø¬Ù…ÙˆØ¹_Ø³Ú©Ù‡â€ŒÙ‡Ø§.textContent = ÙˆØ¶Ø¹ÛŒØª_Ø¨Ø§Ø²ÛŒ.Ù…Ø¬Ù…ÙˆØ¹_Ø³Ú©Ù‡â€ŒÙ‡Ø§.toLocaleString();
            Ù…Ø¬Ù…ÙˆØ¹_Ú©Ø´ØªÙ‡â€ŒÙ‡Ø§.textContent = ÙˆØ¶Ø¹ÛŒØª_Ø¨Ø§Ø²ÛŒ.Ù…Ø¬Ù…ÙˆØ¹_Ú©Ø´ØªÙ‡â€ŒÙ‡Ø§.toLocaleString();
            
            // Ø¨Ø§Ø²Ù†Ø´Ø§Ù†ÛŒ ÙˆØ¶Ø¹ÛŒØª Ø¨Ø§Ø²ÛŒ
            ÙˆØ¶Ø¹ÛŒØª_Ø¨Ø§Ø²ÛŒ.Ø§Ù…ØªÛŒØ§Ø² = 0;
            ÙˆØ¶Ø¹ÛŒØª_Ø¨Ø§Ø²ÛŒ.Ø³Ú©Ù‡â€ŒÙ‡Ø§ÛŒ_Ø¬Ù…Ø¹â€ŒØ¢ÙˆØ±ÛŒ_Ø´Ø¯Ù‡ = 0;
            ÙˆØ¶Ø¹ÛŒØª_Ø¨Ø§Ø²ÛŒ.Ø³Ù„Ø§Ù…Øª = 100;
            ÙˆØ¶Ø¹ÛŒØª_Ø¨Ø§Ø²ÛŒ.Ø¯Ø´Ù…Ù†Ø§Ù†_Ù†Ø§Ø¨ÙˆØ¯_Ø´Ø¯Ù‡ = 0;
            ÙˆØ¶Ø¹ÛŒØª_Ø¨Ø§Ø²ÛŒ.Ø¨Ø§Ø²ÛŒ_Ø¯Ø±_Ø­Ø§Ù„_Ø§Ø¬Ø±Ø§ = true;
            ÙˆØ¶Ø¹ÛŒØª_Ø¨Ø§Ø²ÛŒ.Ø¢Ø®Ø±ÛŒÙ†_ØªÙˆÙ„ÛŒØ¯_Ø³Ù„Ø§Ù…Øª = Date.now();
            ÙˆØ¶Ø¹ÛŒØª_Ø¨Ø§Ø²ÛŒ.Ø¢Ø®Ø±ÛŒÙ†_Ø²Ù…Ø§Ù†_Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ = Date.now();
            ÙˆØ¶Ø¹ÛŒØª_Ø¨Ø§Ø²ÛŒ.Ø¢ÛŒØªÙ…â€ŒÙ‡Ø§ÛŒ_Ø³Ù„Ø§Ù…Øª = [];
            
            // Ù¾Ø§Ú©â€ŒØ³Ø§Ø²ÛŒ Ø§Ø´ÛŒØ§Ø¡ Ù‚Ø¯ÛŒÙ…ÛŒ
            Ø¯Ø´Ù…Ù†Ø§Ù† = [];
            Ø¯Ø´Ù…Ù†Ø§Ù†_Ú¯Ø±ÛŒØ¯.clear();
            
            Ú¯Ù„ÙˆÙ„Ù‡â€ŒÙ‡Ø§.forEach(g => Ú¯Ù„ÙˆÙ„Ù‡_Ù¾ÙˆÙ„.release(g));
            Ú¯Ù„ÙˆÙ„Ù‡â€ŒÙ‡Ø§ = [];
            Ú¯Ù„ÙˆÙ„Ù‡â€ŒÙ‡Ø§_Ú¯Ø±ÛŒØ¯.clear();
            
            Ø°Ø±Ø§Øª_Ù¾ÙˆÙ„.releaseAll();
            Ø°Ø±Ø§Øª = [];
            
            // Ø¨Ø§Ø²Ù†Ø´Ø§Ù†ÛŒ Ù…ÙˆÙ‚Ø¹ÛŒØª Ø¨Ø§Ø²ÛŒÚ©Ù†
            Ø¨Ø§Ø²ÛŒÚ©Ù†.x = ØªÙ†Ø¸ÛŒÙ…Ø§Øª_Ø¨Ø§Ø²ÛŒ.Ø§Ù†Ø¯Ø§Ø²Ù‡_Ø¬Ù‡Ø§Ù† / 2;
            Ø¨Ø§Ø²ÛŒÚ©Ù†.y = ØªÙ†Ø¸ÛŒÙ…Ø§Øª_Ø¨Ø§Ø²ÛŒ.Ø§Ù†Ø¯Ø§Ø²Ù‡_Ø¬Ù‡Ø§Ù† / 2;
            Ø¨Ø§Ø²ÛŒÚ©Ù†.rotation = 0;
            
            // Ø¨Ø§Ø²Ù†Ø´Ø§Ù†ÛŒ Ø¯ÙˆØ±Ø¨ÛŒÙ†
            ÙˆØ¶Ø¹ÛŒØª_Ø¨Ø§Ø²ÛŒ.Ø¯ÙˆØ±Ø¨ÛŒÙ†.x = Ø¨Ø§Ø²ÛŒÚ©Ù†.x - Ú©Ø§Ù†ÙˆØ§Ø³_Ø¨Ø§Ø²ÛŒ.width / (2 * ØªÙ†Ø¸ÛŒÙ…Ø§Øª_Ø¨Ø§Ø²ÛŒ.Ø¶Ø±ÛŒØ¨_Ø²ÙˆÙ…);
            ÙˆØ¶Ø¹ÛŒØª_Ø¨Ø§Ø²ÛŒ.Ø¯ÙˆØ±Ø¨ÛŒÙ†.y = Ø¨Ø§Ø²ÛŒÚ©Ù†.y - Ú©Ø§Ù†ÙˆØ§Ø³_Ø¨Ø§Ø²ÛŒ.height / (2 * ØªÙ†Ø¸ÛŒÙ…Ø§Øª_Ø¨Ø§Ø²ÛŒ.Ø¶Ø±ÛŒØ¨_Ø²ÙˆÙ…);
            
            // Ø§ÛŒØ¬Ø§Ø¯ Ù…Ø­ÛŒØ· Ø¨Ø§Ø²ÛŒ
            Ø§ÛŒØ¬Ø§Ø¯_Ø³ØªØ§Ø±Ù‡â€ŒÙ‡Ø§();
            Ø§ÛŒØ¬Ø§Ø¯_Ø³Ú©Ù‡â€ŒÙ‡Ø§();
            
            // Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ø±Ø§Ø¨Ø·
            Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ_Ø±Ø§Ø¨Ø·();
            
            // Ø±Ø§Ù‡â€ŒØ§Ù†Ø¯Ø§Ø²ÛŒ ØªØ§ÛŒÙ…Ø±Ù‡Ø§
            if (Ø¨Ø§Ø²Ù‡_Ø´Ù„ÛŒÚ©_Ø®ÙˆØ¯Ú©Ø§Ø±) clearInterval(Ø¨Ø§Ø²Ù‡_Ø´Ù„ÛŒÚ©_Ø®ÙˆØ¯Ú©Ø§Ø±);
            Ø¨Ø§Ø²Ù‡_Ø´Ù„ÛŒÚ©_Ø®ÙˆØ¯Ú©Ø§Ø± = setInterval(Ø´Ù„ÛŒÚ©_Ø®ÙˆØ¯Ú©Ø§Ø±, ØªÙ†Ø¸ÛŒÙ…Ø§Øª_Ø¨Ø§Ø²ÛŒ.Ù†Ø±Ø®_Ø´Ù„ÛŒÚ©_Ø®ÙˆØ¯Ú©Ø§Ø±);
            
            if (Ø¨Ø§Ø²Ù‡_ØªÙˆÙ„ÛŒØ¯_Ø¯Ø´Ù…Ù†) clearInterval(Ø¨Ø§Ø²Ù‡_ØªÙˆÙ„ÛŒØ¯_Ø¯Ø´Ù…Ù†);
            const Ù†Ø±Ø®_ØªÙˆÙ„ÛŒØ¯ = Ù…Ø­Ø§Ø³Ø¨Ù‡_Ù†Ø±Ø®_ØªÙˆÙ„ÛŒØ¯_Ø¯Ø´Ù…Ù†();
            Ø¨Ø§Ø²Ù‡_ØªÙˆÙ„ÛŒØ¯_Ø¯Ø´Ù…Ù† = setInterval(Ø§ÛŒØ¬Ø§Ø¯_Ø¯Ø´Ù…Ù†, Ù†Ø±Ø®_ØªÙˆÙ„ÛŒØ¯);
            
            if (Ø¨Ø§Ø²Ù‡_Ø´Ù„ÛŒÚ©_Ø¯Ø´Ù…Ù†Ø§Ù†) clearInterval(Ø¨Ø§Ø²Ù‡_Ø´Ù„ÛŒÚ©_Ø¯Ø´Ù…Ù†Ø§Ù†);
            Ø¨Ø§Ø²Ù‡_Ø´Ù„ÛŒÚ©_Ø¯Ø´Ù…Ù†Ø§Ù† = setInterval(Ø´Ù„ÛŒÚ©_Ø¯Ø´Ù…Ù†Ø§Ù†, 100);
            
            // Ø§ÛŒØ¬Ø§Ø¯ Ø¯Ø´Ù…Ù†Ø§Ù† Ø§ÙˆÙ„ÛŒÙ‡
            const ØªØ¹Ø¯Ø§Ø¯_Ø¯Ø´Ù…Ù†Ø§Ù† = Ù…Ø­Ø§Ø³Ø¨Ù‡_Ø¯Ø´Ù…Ù†Ø§Ù†_Ø§ÙˆÙ„ÛŒÙ‡();
            for (let i = 0; i < ØªØ¹Ø¯Ø§Ø¯_Ø¯Ø´Ù…Ù†Ø§Ù†; i++) {
                setTimeout(() => Ø§ÛŒØ¬Ø§Ø¯_Ø¯Ø´Ù…Ù†(), i * 150);
            }
            
            console.log(`Ø´Ø±ÙˆØ¹ Ø¨Ø§Ø²ÛŒ - Ù…Ø±Ø­Ù„Ù‡ ${ÙˆØ¶Ø¹ÛŒØª_Ø¨Ø§Ø²ÛŒ.Ù…Ø±Ø­Ù„Ù‡}`);
            console.log(`Ø³Ú©Ù‡â€ŒÙ‡Ø§ÛŒ Ù…ÙˆØ±Ø¯ Ù†ÛŒØ§Ø²: ${Ù…Ø­Ø§Ø³Ø¨Ù‡_Ø³Ú©Ù‡â€ŒÙ‡Ø§ÛŒ_Ù…ÙˆØ±Ø¯_Ù†ÛŒØ§Ø²()}`);
            console.log(`Ø¯Ø´Ù…Ù†Ø§Ù† Ø§ÙˆÙ„ÛŒÙ‡: ${ØªØ¹Ø¯Ø§Ø¯_Ø¯Ø´Ù…Ù†Ø§Ù†}`);
            
            // Ø´Ø±ÙˆØ¹ Ø­Ù„Ù‚Ù‡ Ø¨Ø§Ø²ÛŒ
            Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ();
        }

        // ============================================
        // Ú©Ù†ØªØ±Ù„â€ŒÙ‡Ø§ÛŒ Ù„Ù…Ø³ÛŒ (Ø¬ÙˆÛŒâ€ŒØ§Ø³ØªÛŒÚ©)
        // ============================================
        const Ø¸Ø±Ù_Ø¬ÙˆÛŒâ€ŒØ§Ø³ØªÛŒÚ© = document.querySelector('.Ø¸Ø±Ù_Ø¬ÙˆÛŒâ€ŒØ§Ø³ØªÛŒÚ©');
        const Ù¾Ø§ÛŒÙ‡_Ø¬ÙˆÛŒâ€ŒØ§Ø³ØªÛŒÚ© = document.querySelector('.Ù¾Ø§ÛŒÙ‡_Ø¬ÙˆÛŒâ€ŒØ§Ø³ØªÛŒÚ©');
        
        Ø¸Ø±Ù_Ø¬ÙˆÛŒâ€ŒØ§Ø³ØªÛŒÚ©.addEventListener('touchstart', (e) => {
            e.preventDefault();
            Ú©Ù†ØªØ±Ù„â€ŒÙ‡Ø§.Ø¬ÙˆÛŒâ€ŒØ§Ø³ØªÛŒÚ©_ÙØ¹Ø§Ù„ = true;
            
            const rect = Ù¾Ø§ÛŒÙ‡_Ø¬ÙˆÛŒâ€ŒØ§Ø³ØªÛŒÚ©.getBoundingClientRect();
            Ú©Ù†ØªØ±Ù„â€ŒÙ‡Ø§.Ø¬ÙˆÛŒâ€ŒØ§Ø³ØªÛŒÚ©_Ø´Ø±ÙˆØ¹_x = rect.left + rect.width / 2;
            Ú©Ù†ØªØ±Ù„â€ŒÙ‡Ø§.Ø¬ÙˆÛŒâ€ŒØ§Ø³ØªÛŒÚ©_Ø´Ø±ÙˆØ¹_y = rect.top + rect.height / 2;
        });

        document.addEventListener('touchmove', (e) => {
            if (!Ú©Ù†ØªØ±Ù„â€ŒÙ‡Ø§.Ø¬ÙˆÛŒâ€ŒØ§Ø³ØªÛŒÚ©_ÙØ¹Ø§Ù„) return;
            e.preventDefault();
            
            const touch = e.touches[0];
            const deltaX = touch.clientX - Ú©Ù†ØªØ±Ù„â€ŒÙ‡Ø§.Ø¬ÙˆÛŒâ€ŒØ§Ø³ØªÛŒÚ©_Ø´Ø±ÙˆØ¹_x;
            const deltaY = touch.clientY - Ú©Ù†ØªØ±Ù„â€ŒÙ‡Ø§.Ø¬ÙˆÛŒâ€ŒØ§Ø³ØªÛŒÚ©_Ø´Ø±ÙˆØ¹_y;
            
            const distance = Math.sqrt(deltaX * deltaX + deltaY * deltaY);
            const maxDistance = 40;
            const limitedDistance = Math.min(distance, maxDistance);
            
            if (distance > 5) {
                const angle = Math.atan2(deltaY, deltaX);
                const moveX = limitedDistance * Math.cos(angle) / maxDistance;
                const moveY = limitedDistance * Math.sin(angle) / maxDistance;
                
                Ú©Ù†ØªØ±Ù„â€ŒÙ‡Ø§.Ø­Ø±Ú©Øª_x = moveX;
                Ú©Ù†ØªØ±Ù„â€ŒÙ‡Ø§.Ø­Ø±Ú©Øª_y = moveY;
                
                Ø¯Ø³ØªÙ‡_Ø¬ÙˆÛŒâ€ŒØ§Ø³ØªÛŒÚ©.style.transform = `translate(${moveX * 30}px, ${moveY * 30}px)`;
            }
        });

        document.addEventListener('touchend', (e) => {
            Ú©Ù†ØªØ±Ù„â€ŒÙ‡Ø§.Ø¬ÙˆÛŒâ€ŒØ§Ø³ØªÛŒÚ©_ÙØ¹Ø§Ù„ = false;
            Ú©Ù†ØªØ±Ù„â€ŒÙ‡Ø§.Ø­Ø±Ú©Øª_x = 0;
            Ú©Ù†ØªØ±Ù„â€ŒÙ‡Ø§.Ø­Ø±Ú©Øª_y = 0;
            Ø¯Ø³ØªÙ‡_Ø¬ÙˆÛŒâ€ŒØ§Ø³ØªÛŒÚ©.style.transform = 'translate(0, 0)';
        });

        document.addEventListener('touchcancel', (e) => {
            Ú©Ù†ØªØ±Ù„â€ŒÙ‡Ø§.Ø¬ÙˆÛŒâ€ŒØ§Ø³ØªÛŒÚ©_ÙØ¹Ø§Ù„ = false;
            Ú©Ù†ØªØ±Ù„â€ŒÙ‡Ø§.Ø­Ø±Ú©Øª_x = 0;
            Ú©Ù†ØªØ±Ù„â€ŒÙ‡Ø§.Ø­Ø±Ú©Øª_y = 0;
            Ø¯Ø³ØªÙ‡_Ø¬ÙˆÛŒâ€ŒØ§Ø³ØªÛŒÚ©.style.transform = 'translate(0, 0)';
        });

        // ============================================
        // Ú©Ù†ØªØ±Ù„â€ŒÙ‡Ø§ÛŒ ØµÙØ­Ù‡â€ŒÚ©Ù„ÛŒØ¯ (Ø¨Ø±Ø§ÛŒ ØªÙˆØ³Ø¹Ù‡)
        // ============================================
        document.addEventListener('keydown', (e) => {
            if (!ÙˆØ¶Ø¹ÛŒØª_Ø¨Ø§Ø²ÛŒ.Ø¨Ø§Ø²ÛŒ_Ø¯Ø±_Ø­Ø§Ù„_Ø§Ø¬Ø±Ø§) return;
            
            switch(e.key) {
                case 'ArrowUp':
                case 'w':
                    Ú©Ù†ØªØ±Ù„â€ŒÙ‡Ø§.Ø­Ø±Ú©Øª_y = -1;
                    break;
                case 'ArrowDown':
                case 's':
                    Ú©Ù†ØªØ±Ù„â€ŒÙ‡Ø§.Ø­Ø±Ú©Øª_y = 1;
                    break;
                case 'ArrowLeft':
                case 'a':
                    Ú©Ù†ØªØ±Ù„â€ŒÙ‡Ø§.Ø­Ø±Ú©Øª_x = -1;
                    break;
                case 'ArrowRight':
                case 'd':
                    Ú©Ù†ØªØ±Ù„â€ŒÙ‡Ø§.Ø­Ø±Ú©Øª_x = 1;
                    break;
                case ' ':
                    // Ø´Ù„ÛŒÚ© Ø¯Ø³ØªÛŒ
                    for (let i = 0; i < 5; i++) {
                        setTimeout(() => {
                            const targetX = Ø¨Ø§Ø²ÛŒÚ©Ù†.x + Math.cos(Ø¨Ø§Ø²ÛŒÚ©Ù†.rotation) * 1000;
                            const targetY = Ø¨Ø§Ø²ÛŒÚ©Ù†.y + Math.sin(Ø¨Ø§Ø²ÛŒÚ©Ù†.rotation) * 1000;
                            Ø§ÛŒØ¬Ø§Ø¯_Ú¯Ù„ÙˆÙ„Ù‡(Ø¨Ø§Ø²ÛŒÚ©Ù†.x, Ø¨Ø§Ø²ÛŒÚ©Ù†.y, targetX, targetY, true);
                        }, i * 50);
                    }
                    break;
            }
        });

        document.addEventListener('keyup', (e) => {
            switch(e.key) {
                case 'ArrowUp':
                case 'w':
                    if (Ú©Ù†ØªØ±Ù„â€ŒÙ‡Ø§.Ø­Ø±Ú©Øª_y === -1) Ú©Ù†ØªØ±Ù„â€ŒÙ‡Ø§.Ø­Ø±Ú©Øª_y = 0;
                    break;
                case 'ArrowDown':
                case 's':
                    if (Ú©Ù†ØªØ±Ù„â€ŒÙ‡Ø§.Ø­Ø±Ú©Øª_y === 1) Ú©Ù†ØªØ±Ù„â€ŒÙ‡Ø§.Ø­Ø±Ú©Øª_y = 0;
                    break;
                case 'ArrowLeft':
                case 'a':
                    if (Ú©Ù†ØªØ±Ù„â€ŒÙ‡Ø§.Ø­Ø±Ú©Øª_x === -1) Ú©Ù†ØªØ±Ù„â€ŒÙ‡Ø§.Ø­Ø±Ú©Øª_x = 0;
                    break;
                case 'ArrowRight':
                case 'd':
                    if (Ú©Ù†ØªØ±Ù„â€ŒÙ‡Ø§.Ø­Ø±Ú©Øª_x === 1) Ú©Ù†ØªØ±Ù„â€ŒÙ‡Ø§.Ø­Ø±Ú©Øª_x = 0;
                    break;
            }
        });

        // ============================================
        // ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ùˆ Ø¨Ù‡ÛŒÙ†Ù‡â€ŒØ³Ø§Ø²ÛŒâ€ŒÙ‡Ø§ÛŒ Ø§Ø¶Ø§ÙÛŒ
        // ============================================

        // ØªÙ†Ø¸ÛŒÙ… Ù…Ø¬Ø¯Ø¯ Ø§Ù†Ø¯Ø§Ø²Ù‡ Ú©Ø§Ù†ÙˆØ§Ø³ Ù‡Ù†Ú¯Ø§Ù… ØªØºÛŒÛŒØ± Ø§Ù†Ø¯Ø§Ø²Ù‡ Ù¾Ù†Ø¬Ø±Ù‡
        window.addEventListener('resize', () => {
            ØªÙ†Ø¸ÛŒÙ…_Ú©Ø§Ù†ÙˆØ§Ø³();
        });

        // Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø§ÙˆÙ„ÛŒÙ‡ Ø¢Ù…Ø§Ø±
        window.addEventListener('load', () => {
            ØªÙ†Ø¸ÛŒÙ…_Ú©Ø§Ù†ÙˆØ§Ø³();
            
            // Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø¢Ù…Ø§Ø± Ø§Ø² localStorage
            ÙˆØ¶Ø¹ÛŒØª_Ø¨Ø§Ø²ÛŒ.Ø¨Ø§Ù„Ø§ØªØ±ÛŒÙ†_Ø§Ù…ØªÛŒØ§Ø² = parseInt(localStorage.getItem('Ø¨Ø§Ù„Ø§ØªØ±ÛŒÙ†_Ø§Ù…ØªÛŒØ§Ø²')) || 0;
            ÙˆØ¶Ø¹ÛŒØª_Ø¨Ø§Ø²ÛŒ.Ù…Ø¬Ù…ÙˆØ¹_Ø³Ú©Ù‡â€ŒÙ‡Ø§ = parseInt(localStorage.getItem('Ù…Ø¬Ù…ÙˆØ¹_Ø³Ú©Ù‡â€ŒÙ‡Ø§')) || 0;
            ÙˆØ¶Ø¹ÛŒØª_Ø¨Ø§Ø²ÛŒ.Ù…Ø¬Ù…ÙˆØ¹_Ú©Ø´ØªÙ‡â€ŒÙ‡Ø§ = parseInt(localStorage.getItem('Ù…Ø¬Ù…ÙˆØ¹_Ú©Ø´ØªÙ‡â€ŒÙ‡Ø§')) || 0;
            ÙˆØ¶Ø¹ÛŒØª_Ø¨Ø§Ø²ÛŒ.Ù…Ø±Ø­Ù„Ù‡ = parseInt(localStorage.getItem('Ù…Ø±Ø­Ù„Ù‡')) || 1;
            
            // Ù†Ù…Ø§ÛŒØ´ Ø¢Ù…Ø§Ø±
            Ø¨Ø§Ù„Ø§ØªØ±ÛŒÙ†_Ø§Ù…ØªÛŒØ§Ø².textContent = ÙˆØ¶Ø¹ÛŒØª_Ø¨Ø§Ø²ÛŒ.Ø¨Ø§Ù„Ø§ØªØ±ÛŒÙ†_Ø§Ù…ØªÛŒØ§Ø².toLocaleString();
            Ù…Ø¬Ù…ÙˆØ¹_Ø³Ú©Ù‡â€ŒÙ‡Ø§.textContent = ÙˆØ¶Ø¹ÛŒØª_Ø¨Ø§Ø²ÛŒ.Ù…Ø¬Ù…ÙˆØ¹_Ø³Ú©Ù‡â€ŒÙ‡Ø§.toLocaleString();
            Ù…Ø¬Ù…ÙˆØ¹_Ú©Ø´ØªÙ‡â€ŒÙ‡Ø§.textContent = ÙˆØ¶Ø¹ÛŒØª_Ø¨Ø§Ø²ÛŒ.Ù…Ø¬Ù…ÙˆØ¹_Ú©Ø´ØªÙ‡â€ŒÙ‡Ø§.toLocaleString();
            
            console.log('Ø¨Ø§Ø²ÛŒ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø´Ø¯!');
            console.log(`Ù…Ø±Ø­Ù„Ù‡ ÙØ¹Ù„ÛŒ: ${ÙˆØ¶Ø¹ÛŒØª_Ø¨Ø§Ø²ÛŒ.Ù…Ø±Ø­Ù„Ù‡}`);
            console.log(`Ø¨Ø§Ù„Ø§ØªØ±ÛŒÙ† Ø§Ù…ØªÛŒØ§Ø²: ${ÙˆØ¶Ø¹ÛŒØª_Ø¨Ø§Ø²ÛŒ.Ø¨Ø§Ù„Ø§ØªØ±ÛŒÙ†_Ø§Ù…ØªÛŒØ§Ø²}`);
        });

        // Ø¬Ù„ÙˆÚ¯ÛŒØ±ÛŒ Ø§Ø² Ø±ÙØªØ§Ø±Ù‡Ø§ÛŒ Ù¾ÛŒØ´â€ŒÙØ±Ø¶ Ù…Ø±ÙˆØ±Ú¯Ø±
        document.addEventListener('gesturestart', function(e) {
            e.preventDefault();
        });
        
        document.addEventListener('gesturechange', function(e) {
            e.preventDefault();
        });
        
        document.addEventListener('gestureend', function(e) {
            e.preventDefault();
        });

        // Ø¬Ù„ÙˆÚ¯ÛŒØ±ÛŒ Ø§Ø² Ø²ÙˆÙ… Ø¨Ø§ Ú©Ù„ÛŒØ¯Ù‡Ø§ÛŒ ØµÙØ­Ù‡â€ŒÚ©Ù„ÛŒØ¯
        document.addEventListener('keydown', function(e) {
            if (e.ctrlKey && (e.key === '+' || e.key === '-' || e.key === '0')) {
                e.preventDefault();
            }
        });

        // Ø¬Ù„ÙˆÚ¯ÛŒØ±ÛŒ Ø§Ø² Ø²ÙˆÙ… Ø¨Ø§ Ø§Ø³Ú©Ø±ÙˆÙ„ Ù…Ø§ÙˆØ³
        document.addEventListener('wheel', function(e) {
            if (e.ctrlKey) {
                e.preventDefault();
            }
        }, { passive: false });

        // Ø¬Ù„ÙˆÚ¯ÛŒØ±ÛŒ Ø§Ø² Ú©Ø´ÛŒØ¯Ù† ØªØµØ§ÙˆÛŒØ±
        document.addEventListener('dragstart', function(e) {
            if (e.target.tagName === 'IMG' || e.target.tagName === 'CANVAS') {
                e.preventDefault();
            }
        });

        // Ø¨Ù‡ÛŒÙ†Ù‡â€ŒØ³Ø§Ø²ÛŒ Ø¨Ø±Ø§ÛŒ Ø¯Ø³ØªÚ¯Ø§Ù‡â€ŒÙ‡Ø§ÛŒ Ù„Ù…Ø³ÛŒ
        if ('ontouchstart' in window) {
            document.body.classList.add('touch-device');
            
            // ØºÛŒØ±ÙØ¹Ø§Ù„ Ú©Ø±Ø¯Ù† hover Ø±ÙˆÛŒ Ø¯Ø³ØªÚ¯Ø§Ù‡â€ŒÙ‡Ø§ÛŒ Ù„Ù…Ø³ÛŒ
            document.addEventListener('touchstart', function() {}, {passive: true});
        }

        // Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ Ø§Ø² ÙˆØ¶Ø¹ÛŒØª ØªÙ…Ø§Ù…â€ŒØµÙØ­Ù‡
        function toggleFullscreen() {
            if (!document.fullscreenElement) {
                document.documentElement.requestFullscreen().catch(err => {
                    console.log(`Ø®Ø·Ø§ Ø¯Ø± Ø­Ø§Ù„Øª ØªÙ…Ø§Ù…â€ŒØµÙØ­Ù‡: ${err.message}`);
                });
            } else {
                if (document.exitFullscreen) {
                    document.exitFullscreen();
                }
            }
        }

        // Ø§Ø¶Ø§ÙÙ‡ Ú©Ø±Ø¯Ù† Ø¯Ú©Ù…Ù‡ ØªÙ…Ø§Ù…â€ŒØµÙØ­Ù‡ (Ø§Ø®ØªÛŒØ§Ø±ÛŒ)
        // const fullscreenBtn = document.createElement('button');
        // fullscreenBtn.innerHTML = 'ğŸ“º';
        // fullscreenBtn.style.position = 'fixed';
        // fullscreenBtn.style.bottom = '20px';
        // fullscreenBtn.style.left = '20px';
        // fullscreenBtn.style.zIndex = '1000';
        // fullscreenBtn.style.padding = '10px';
        // fullscreenBtn.style.background = 'rgba(0,0,0,0.7)';
        // fullscreenBtn.style.color = 'white';
        // fullscreenBtn.style.border = 'none';
        // fullscreenBtn.style.borderRadius = '5px';
        // fullscreenBtn.style.cursor = 'pointer';
        // fullscreenBtn.onclick = toggleFullscreen;
        // document.body.appendChild(fullscreenBtn);

        // ÙØ¹Ø§Ù„ Ú©Ø±Ø¯Ù† WebGL Ø§Ú¯Ø± Ø¯Ø± Ø¯Ø³ØªØ±Ø³ Ø¨Ø§Ø´Ø¯
        function enableWebGL() {
            try {
                const glCanvas = document.createElement('canvas');
                const gl = glCanvas.getContext('webgl') || glCanvas.getContext('experimental-webgl');
                if (gl && gl instanceof WebGLRenderingContext) {
                    console.log('WebGL ÙØ¹Ø§Ù„ Ø§Ø³Øª!');
                    return true;
                }
            } catch (e) {
                console.log('WebGL Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ Ù†Ù…ÛŒâ€ŒØ´ÙˆØ¯ØŒ Ø§Ø² Canvas2D Ø§Ø³ØªÙØ§Ø¯Ù‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯');
            }
            return false;
        }

        // Ø¨Ø±Ø±Ø³ÛŒ WebGL Ø¯Ø± Ø§Ø¨ØªØ¯Ø§
        const webglSupported = enableWebGL();
        if (webglSupported) {
            console.log('Ù…ÙˆØªÙˆØ± WebGL Ø¨Ø±Ø§ÛŒ Ú¯Ø±Ø§ÙÛŒÚ© Ø¨Ù‡ØªØ± ÙØ¹Ø§Ù„ Ø´Ø¯!');
        }

        // ØªØ§Ø¨Ø¹ Ø¨Ø±Ø§ÛŒ Ù¾Ø§Ú©â€ŒØ³Ø§Ø²ÛŒ Ø­Ø§ÙØ¸Ù‡
        function cleanupMemory() {
            if (!ÙˆØ¶Ø¹ÛŒØª_Ø¨Ø§Ø²ÛŒ.Ø¨Ø§Ø²ÛŒ_Ø¯Ø±_Ø­Ø§Ù„_Ø§Ø¬Ø±Ø§) {
                // Ø¢Ø²Ø§Ø¯ Ú©Ø±Ø¯Ù† Ù…Ù†Ø§Ø¨Ø¹ Ø²Ù…Ø§Ù†ÛŒ Ú©Ù‡ Ø¨Ø§Ø²ÛŒ Ø¯Ø± Ø­Ø§Ù„ Ø§Ø¬Ø±Ø§ Ù†ÛŒØ³Øª
                Ø°Ø±Ø§Øª_Ù¾ÙˆÙ„.releaseAll();
                Ø°Ø±Ø§Øª = [];
                
                // Ø¢Ø²Ø§Ø¯ Ú©Ø±Ø¯Ù† Ú¯Ù„ÙˆÙ„Ù‡â€ŒÙ‡Ø§
                Ú¯Ù„ÙˆÙ„Ù‡â€ŒÙ‡Ø§.forEach(g => Ú¯Ù„ÙˆÙ„Ù‡_Ù¾ÙˆÙ„.release(g));
                Ú¯Ù„ÙˆÙ„Ù‡â€ŒÙ‡Ø§ = [];
                Ú¯Ù„ÙˆÙ„Ù‡â€ŒÙ‡Ø§_Ú¯Ø±ÛŒØ¯.clear();
            }
        }

        // Ù¾Ø§Ú©â€ŒØ³Ø§Ø²ÛŒ Ø¯ÙˆØ±Ù‡â€ŒØ§ÛŒ Ø­Ø§ÙØ¸Ù‡
        setInterval(cleanupMemory, 30000); // Ù‡Ø± 30 Ø«Ø§Ù†ÛŒÙ‡

        // ============================================
        // Ø§Ù…Ú©Ø§Ù†Ø§Øª ØªÙˆØ³Ø¹Ù‡â€ŒØ¯Ù‡Ù†Ø¯Ù‡
        // ============================================
        
        // Ú©Ù„ÛŒØ¯Ù‡Ø§ÛŒ Ù…ÛŒØ§Ù†Ø¨Ø± ØªÙˆØ³Ø¹Ù‡
        document.addEventListener('keydown', (e) => {
            // ÙÙ‚Ø· Ø¯Ø± Ø­Ø§Ù„Øª ØªÙˆØ³Ø¹Ù‡ ÙØ¹Ø§Ù„ Ø§Ø³Øª
            if (e.ctrlKey && e.shiftKey) {
                switch(e.key) {
                    case 'N':
                        // Ø±ÙØªÙ† Ø¨Ù‡ Ù…Ø±Ø­Ù„Ù‡ Ø¨Ø¹Ø¯ÛŒ
                        Ù†Ù…Ø§ÛŒØ´_Ø§ØªÙ…Ø§Ù…_Ù…Ø±Ø­Ù„Ù‡();
                        break;
                    case 'H':
                        // Ø¨Ø§Ø²ÛŒØ§Ø¨ÛŒ Ú©Ø§Ù…Ù„ Ø³Ù„Ø§Ù…Øª
                        ÙˆØ¶Ø¹ÛŒØª_Ø¨Ø§Ø²ÛŒ.Ø³Ù„Ø§Ù…Øª = 100;
                        Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ_Ø±Ø§Ø¨Ø·();
                        break;
                    case 'C':
                        // Ø¬Ù…Ø¹â€ŒØ¢ÙˆØ±ÛŒ Ù‡Ù…Ù‡ Ø³Ú©Ù‡â€ŒÙ‡Ø§
                        Ø³Ú©Ù‡â€ŒÙ‡Ø§.forEach(Ø³Ú©Ù‡ => {
                            if (!Ø³Ú©Ù‡.collected) {
                                Ø³Ú©Ù‡.collected = true;
                                ÙˆØ¶Ø¹ÛŒØª_Ø¨Ø§Ø²ÛŒ.Ø³Ú©Ù‡â€ŒÙ‡Ø§ÛŒ_Ø¬Ù…Ø¹â€ŒØ¢ÙˆØ±ÛŒ_Ø´Ø¯Ù‡++;
                                ÙˆØ¶Ø¹ÛŒØª_Ø¨Ø§Ø²ÛŒ.Ø§Ù…ØªÛŒØ§Ø² += Ø³Ú©Ù‡.value;
                                Ø§ÛŒØ¬Ø§Ø¯_Ø§Ù†ÙØ¬Ø§Ø±_Ø³Ú©Ù‡(Ø³Ú©Ù‡.x, Ø³Ú©Ù‡.y);
                            }
                        });
                        Ø³Ú©Ù‡â€ŒÙ‡Ø§ = [];
                        Ø³Ú©Ù‡â€ŒÙ‡Ø§_Ú¯Ø±ÛŒØ¯.clear();
                        Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ_Ø±Ø§Ø¨Ø·();
                        break;
                }
            }
        });

        console.log('Ù…ÙˆØªÙˆØ± Ø¨Ø§Ø²ÛŒ Ù†Ø¨Ø±Ø¯ Ú©Ù‡Ú©Ø´Ø§Ù†ÛŒ PRO Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø´Ø¯!');
        console.log('ÙˆÛŒÚ˜Ú¯ÛŒâ€ŒÙ‡Ø§ÛŒ ÙØ¹Ø§Ù„:');
        console.log('- Ø¬Ù‡Ø§Ù† 5 Ø¨Ø±Ø§Ø¨Ø± Ø¨Ø²Ø±Ú¯â€ŒØªØ±');
        console.log('- Object Pooling Ø¨Ø±Ø§ÛŒ Ù…Ø¯ÛŒØ±ÛŒØª Ø­Ø§ÙØ¸Ù‡');
        console.log('- Spatial Partitioning Ø¨Ø±Ø§ÛŒ Ø¨Ù‡ÛŒÙ†Ù‡â€ŒØ³Ø§Ø²ÛŒ');
        console.log('- Ø³ÛŒØ³ØªÙ… Ù…Ø±Ø­Ù„Ù‡â€ŒØ¨Ù†Ø¯ÛŒ Ù¾ÙˆÛŒØ§');
        console.log('- Ø¯ÙˆØ±Ø¨ÛŒÙ† Ø¢Ù†Ù„Ø§ÛŒÙ† Ù¾ÛŒØ´Ø±ÙØªÙ‡');
        console.log('- Ø¨Ù‡ÛŒÙ†Ù‡â€ŒØ³Ø§Ø²ÛŒ Ø¨Ø±Ø§ÛŒ Ø§Ù†Ø¯Ø±ÙˆÛŒØ¯');
    </script>
</body>
</html>
